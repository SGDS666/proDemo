"use strict";(self.webpackChunklaifaxin_web=self.webpackChunklaifaxin_web||[]).push([[594],{81589:function(Bn,Qe,r){r.d(Qe,{Z:function(){return H}});var ln=r(30279),Ae=r.n(ln),xn=r(44463),ae=r.n(xn),yn=r(71894),x=r(16300),sn=r(94853),Y=r(85170),de={box:"box___y1zVd",pinbox:"pinbox___MxuMl",item:"item___k8fLA",more:"more___Sln5W",label:"label___MupiM",closd:"closd___O3cKC"},Oe=r(43010),ye=["item","style","className"],on=["items","optionItems","style","childClassName","childStyle","className"],Ge=sn.Z.useToken,$=function(ve){var he,K=ve.item,we=ve.style,Be=ve.className,pe=ae()(ve,ye),be=Ge(),Ie=be.token;return(0,Oe.jsxs)("div",Ae()(Ae()({className:"".concat(de.item," ").concat(Be," both-big")},pe),{},{style:Ae()({},we),children:[(0,Oe.jsx)("div",{className:de.label,style:{color:Ie.colorTextLabel},onClick:K==null?void 0:K.onClick,children:K==null?void 0:K.label}),(K==null?void 0:K.children)&&(0,Oe.jsx)("div",{className:de.more,style:{color:Ie.colorTextLabel},children:(he=K==null?void 0:K.children)!==null&&he!==void 0?he:(0,Oe.jsx)(yn.Z,{onClick:K==null?void 0:K.onEdit})}),(K==null?void 0:K.onDelete)&&(0,Oe.jsx)("div",{className:de.closd,style:{color:Ie.colorTextLabel},onClick:K.onDelete,children:(0,Oe.jsx)(x.Z,{style:{color:Ie.colorTextLabel,width:"100%",height:"100%"}})})]}))},_e=function(ve){var he=ve.items,K=ve.optionItems,we=ve.style,Be=ve.childClassName,pe=ve.childStyle,be=ve.className,Ie=ae()(ve,on),B=Ge(),Le=B.token;return(0,Oe.jsxs)("div",Ae()(Ae()({className:"".concat(de.box," ").concat(be," "),style:Ae()({borderColor:Le.colorBorderSecondary},we)},Ie),{},{children:[(0,Oe.jsx)("div",{className:"".concat(de.pinbox," "),style:{borderColor:Le.colorBorderSecondary},children:he==null?void 0:he.map(function(se){return(se==null?void 0:se.label)&&(0,Oe.jsx)($,{item:se,style:Ae()(Ae()({},pe),se.style),className:"".concat(se.className," ").concat(Be)},se==null?void 0:se.key)})}),(0,Oe.jsx)("div",{style:{marginLeft:"20px",display:"flex",flexWrap:"wrap"},children:K==null?void 0:K.map(function(se){return(0,Oe.jsx)($,{item:se,style:Ae()(Ae()({},pe),se.style),className:"".concat(se.className," ").concat(Be)},se==null?void 0:se.key)})})]}))},H=_e},6701:function(Bn,Qe,r){r.d(Qe,{$:function(){return ln},p:function(){return Ae}});var ln={text:[{key:"include",name:"\u5305\u542B(\u53EF\u591A\u9009)"},{key:"exclude",name:"\u4E0D\u5305\u542B(\u53EF\u591A\u9009)"},{key:"eq",name:"\u662F(\u5355\u9009)"},{key:"neq",name:"\u4E0D\u662F(\u5355\u9009)"},{key:"beginWith",name:"\u5F00\u5934\u662F(\u53EF\u591A\u9009)"},{key:"beginNotWith",name:"\u5F00\u5934\u4E0D\u662F(\u53EF\u591A\u9009)"},{key:"endWith",name:"\u7ED3\u5C3E\u662F(\u53EF\u591A\u9009)"},{key:"endNotWith",name:"\u7ED3\u5C3E\u4E0D\u662F(\u53EF\u591A\u9009)"},{key:"regexp",name:"\u6B63\u5219\u8868\u8FBE\u5F0F(\u9AD8\u7EA7\u8BED\u6CD5)"},{key:"notNull",name:"\u4E0D\u4E3A\u7A7A"},{key:"null",name:"\u4E3A\u7A7A"}],textarea:[{key:"include",name:"\u5305\u542B(\u53EF\u591A\u9009)"},{key:"exclude",name:"\u4E0D\u5305\u542B(\u53EF\u591A\u9009)"},{key:"eq",name:"\u662F(\u5355\u9009)"},{key:"neq",name:"\u4E0D\u662F(\u5355\u9009)"},{key:"beginWith",name:"\u5F00\u5934\u662F(\u53EF\u591A\u9009)"},{key:"beginNotWith",name:"\u5F00\u5934\u4E0D\u662F(\u53EF\u591A\u9009)"},{key:"endWith",name:"\u7ED3\u5C3E\u662F(\u53EF\u591A\u9009)"},{key:"endNotWith",name:"\u7ED3\u5C3E\u4E0D\u662F(\u53EF\u591A\u9009)"},{key:"regexp",name:"\u6B63\u5219\u8868\u8FBE\u5F0F(\u9AD8\u7EA7\u8BED\u6CD5)"},{key:"notNull",name:"\u4E0D\u4E3A\u7A7A"},{key:"null",name:"\u4E3A\u7A7A"}],digit:[{key:"eq",name:"\u7B49\u4E8E"},{key:"neq",name:"\u4E0D\u7B49\u4E8E"},{key:"gte",name:"\u5927\u4E8E\u7B49\u4E8E"},{key:"lte",name:"\u5C0F\u4E8E\u7B49\u4E8E"},{key:"gt",name:"\u5927\u4E8E"},{key:"lt",name:"\u5C0F\u4E8E"},{key:"notNull",name:"\u4E0D\u4E3A\u7A7A"},{key:"null",name:"\u4E3A\u7A7A"}],money:[{key:"eq",name:"\u7B49\u4E8E"},{key:"neq",name:"\u4E0D\u7B49\u4E8E"},{key:"gte",name:"\u5927\u4E8E\u7B49\u4E8E"},{key:"lte",name:"\u5C0F\u4E8E\u7B49\u4E8E"},{key:"gt",name:"\u5927\u4E8E"},{key:"lt",name:"\u5C0F\u4E8E"},{key:"notNull",name:"\u4E0D\u4E3A\u7A7A"},{key:"null",name:"\u4E3A\u7A7A"}],percent:[{key:"eq",name:"\u7B49\u4E8E"},{key:"neq",name:"\u4E0D\u7B49\u4E8E"},{key:"gte",name:"\u5927\u4E8E\u7B49\u4E8E"},{key:"lte",name:"\u5C0F\u4E8E\u7B49\u4E8E"},{key:"gt",name:"\u5927\u4E8E"},{key:"lt",name:"\u5C0F\u4E8E"},{key:"notNull",name:"\u4E0D\u4E3A\u7A7A"},{key:"null",name:"\u4E3A\u7A7A"}],select:[{key:"include",name:"\u4EFB\u610F\u5305\u542B"},{key:"exclude",name:"\u4E0D\u5305\u542B"},{key:"all",name:"\u540C\u65F6\u5305\u542B"},{key:"eq",name:"\u7B49\u4E8E"},{key:"notNull",name:"\u4E0D\u4E3A\u7A7A"},{key:"null",name:"\u4E3A\u7A7A"}],date:[{key:"lt",name:"\u65E9\u4E8E (\u54EA\u4E00\u5929)"},{key:"gt",name:"\u665A\u4E8E (\u54EA\u4E00\u5929)"},{key:"before",name:"\u5728 (N\u5929\u524D)"},{key:"after",name:"\u5728 (N\u5929\u5185)"},{key:"eq",name:"\u662F (\u54EA\u4E00\u5929)"},{key:"neq",name:"\u4E0D\u662F (\u54EA\u4E00\u5929)"},{key:"notNull",name:"\u4E0D\u4E3A\u7A7A"},{key:"null",name:"\u4E3A\u7A7A"}],dateTime:[{key:"lt",name:"\u65E9\u4E8E (\u54EA\u4E00\u5929)"},{key:"gt",name:"\u665A\u4E8E (\u54EA\u4E00\u5929)"},{key:"before",name:"\u5728 (N\u5929\u524D)"},{key:"after",name:"\u5728 (N\u5929\u5185)"},{key:"eq",name:"\u662F (\u54EA\u4E00\u5929)"},{key:"neq",name:"\u4E0D\u662F (\u54EA\u4E00\u5929)"},{key:"notNull",name:"\u4E0D\u4E3A\u7A7A"},{key:"null",name:"\u4E3A\u7A7A"}]},Ae=["all","include","exclude","beginWith","beginNotWith","endWith","endNotWith","regexp"]},94407:function(Bn,Qe,r){r.r(Qe),r.d(Qe,{default:function(){return Qr}});var ln=r(94434),Ae=r.n(ln),xn=r(46686),ae=r.n(xn),yn=r(35290),x=r.n(yn),sn=r(411),Y=r.n(sn),de=r(85170),Oe=r(88208),ye=r(58110),on=r(11484),Ge=r(60785),$=r(6771),_e=r(33285),H=r(2800),Ye=r(42147),ve=r(1166),he=r(74600),K=r(83655),we=r(16843),Be=r(45850),pe=r(24862),be=r(78730),Ie=r(42845),B=r(22196),Le=r(94853),se=r(12209),ce=r(10248),tn={"view-item":"view-item___tPCX7"},e=r(43010),je=Le.Z.useToken,Me=function(c){var p=c.onSelectAction,Z=c.showCreate,j=c.children,S=je(),n=S.token,l=(0,ve.Z)({visible:!1,key:""}),A=ae()(l,2),f=A[0],b=A[1],E=(0,B.useRequest)(ce.Xf,{manual:!0}),C=E.data,O=E.run,I=function(v){b({visible:v})},G=function(){b({visible:!1}),Z()},T=function(v,t){p({viewId:v,name:t}),b({visible:!1})},ne=function(v){if(!C||!v)return null;var t=C[v];if(!t)return null;var a=f.key;return t.map(function(s){var o=s.name,D=s.viewId;return a&&o.indexOf(a)<0?null:(0,e.jsx)("div",{onClick:function(){return T(D,o)},children:(0,e.jsx)("div",{className:tn["view-item"],style:{color:n.colorText},children:o})},D)})};(0,de.useEffect)(function(){f.visible&&O()},[f.visible]);var V=function(){return(0,e.jsxs)("div",{style:{width:300},children:[(0,e.jsx)(H.Z.Search,{placeholder:"\u641C\u7D22\u89C6\u56FE",allowClear:!0,onChange:function(t){return b({key:t.target.value})},style:{width:"100%",paddingBottom:10},value:f.key}),(0,e.jsxs)("div",{style:{overflow:"auto",height:240},children:[(0,e.jsx)("div",{style:{fontSize:12,color:"#999999"},children:"\u7CFB\u7EDF\u9ED8\u8BA4"}),ne("systemViews"),(0,e.jsx)("div",{style:{fontSize:12,color:"#999999"},children:"\u6211\u521B\u5EFA\u7684"}),ne("mineViews"),C!=null&&C.isOrg?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{style:{fontSize:12,color:"#999999"},children:"\u5176\u4ED6\u4EBA\u521B\u5EFA"}),ne("othersViews")]}):null]}),(0,e.jsx)(Ye.Z,{style:{marginTop:12,marginBottom:12}}),(0,e.jsx)("div",{style:{fontSize:16},children:(0,e.jsx)("a",{onClick:G,children:"\u521B\u5EFA\u65B0\u89C6\u56FE"})})]})};return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(se.Z,{content:V(),title:!1,trigger:"click",open:f.visible,onOpenChange:I,children:j})})},De=Me,Ne=r(30279),y=r.n(Ne),q=r(31810),te=r(41318),Rn=r(80661),ee=r(77707),ie=r(16798),Et=function(c){var p,Z=c.visible,j=c.onCancel,S=c.actionReload,n=c.filters,l=c.name,A=q.Z.useForm(),f=ae()(A,1),b=f[0],E=Le.Z.useToken(),C=E.token,O=(0,B.useRequest)(ce.F1,{manual:!0,onSuccess:function(o){te.ZP.success("\u521B\u5EFA\u65B0\u89C6\u56FE\u6210\u529F"),j(),S(o)}}),I=O.run,G=O.loading,T=(0,B.useModel)("@@initialState"),ne=T.initialState;if((0,de.useEffect)(function(){Z&&b.setFieldsValue({name:l})},[Z]),!ne)return(0,e.jsx)(Rn.Z,{size:"large",children:"\u672A\u767B\u5F55"});var V=(p=ne.currentUser)!==null&&p!==void 0?p:{},N=V.uid,v=V.userid,t=V.teamIds,a=function(){var s=Y()(x()().mark(function o(D){return x()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(n){re.next=5;break}return re.next=3,I(D);case 3:re.next=7;break;case 5:return re.next=7,I(y()(y()({},D),{},{filters:n}));case 7:case"end":return re.stop()}},o)}));return function(D){return s.apply(this,arguments)}}();return(0,e.jsx)(ye.Z,{destroyOnClose:!0,title:"\u521B\u5EFA\u65B0\u89C6\u56FE",open:Z,onCancel:function(){return j()},footer:null,maskClosable:!1,style:{color:C.colorText},children:(0,e.jsxs)(q.Z,{form:b,onFinish:function(o){return a(y()({},o))},layout:"vertical",size:"large",style:{paddingLeft:24,paddingRight:24},initialValues:{shared:"private"},children:[(0,e.jsx)(q.Z.Item,{label:"\u89C6\u56FE\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89C6\u56FE\u540D\u79F0"}],children:(0,e.jsx)(H.Z,{placeholder:"\u89C6\u56FE\u540D\u79F0"})}),(0,e.jsx)(q.Z.Item,{label:"\u5206\u4EAB\u7ED9",name:"shared",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5206\u4EAB\u5BF9\u8C61"}],children:(0,e.jsxs)(ee.ZP.Group,{children:[(0,e.jsx)(ee.ZP,{value:"private",style:{width:"100%"},children:"\u6211\u81EA\u5DF1"}),(0,e.jsx)(ee.ZP,{value:"team",style:{width:"100%"},disabled:!t||!t.length,children:"\u6211\u7684\u90E8\u95E8"}),(0,e.jsx)(ee.ZP,{value:"everyone",style:{width:"100%"},disabled:N===v||!v,children:"\u6240\u6709\u4EBA"})]})}),(0,e.jsx)(q.Z.Item,{children:(0,e.jsx)(ie.ZP,{type:"primary",htmlType:"submit",loading:G,children:"\u521B\u5EFA"})})]})})},dt=Et,Ft=function(c){var p=c.visible,Z=c.onCancel,j=c.viewId,S=c.viewName,n=c.actionReload,l=(0,ve.Z)({viewId:"",viewName:""}),A=ae()(l,2),f=A[0],b=A[1],E=(0,B.useRequest)(ce.hb,{manual:!0,onSuccess:function(){te.ZP.success("\u89C6\u56FE\u540D\u79F0\u4FEE\u6539\u6210\u529F"),Z(),n()}}),C=E.run,O=function(){var I=Y()(x()().mark(function G(){var T;return x()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:T=f.viewName,C({viewId:j,name:T});case 2:case"end":return V.stop()}},G)}));return function(){return I.apply(this,arguments)}}();return(0,de.useEffect)(function(){p&&b({viewName:S,viewId:j})},[p]),(0,e.jsx)(ye.Z,{destroyOnClose:!0,width:420,title:null,open:p,onCancel:function(){return Z()},footer:null,children:(0,e.jsxs)("div",{style:{textAlign:"center"},children:[(0,e.jsx)("div",{style:{fontSize:16,fontWeight:550},children:"\u91CD\u547D\u540D\u89C6\u56FE"}),(0,e.jsx)(H.Z,{style:{width:360,marginTop:24,marginBottom:36},size:"large",value:f.viewName,onChange:function(G){return b({viewName:G.target.value})}}),(0,e.jsx)(ie.ZP,{type:"primary",onClick:O,children:"\u4FDD\u5B58"})]})})},At=Ft,bt=r(44463),Dt=r.n(bt),hn=r(18799),mn=r(96498),Ue=r(46394),Pe=r(28931),kn=r(43267),kt=r(6416),Ve=r(43520),In=r(34833),Zt=r(37922),Bt=r(42784),wn=r(78511),Xn=r(95370),St=r(74375),Pn=r(18393),Fn=r(74857),On=r(23757),Sn=r(82964),Nn=r(40830),vt=r(93707),Tt=r(76319),Vt=r(31822),Rt=r(73477),It=r(7962),Pt=r(96111),jn=r(49871),Ot=r(74637),En=r.n(Ot),Nt=function(c){var p=c.dataIndex,Z=c.values,j=c.field,S=j.valueType,n=j.width,l=j.items,A=Z.tags,f=Z.email,b=Z.verify_status,E=Z.first_name,C=Z.last_name,O=Z.userid,I=Z[p],G=function(){var D;return b==="valid"?D=(0,e.jsxs)($.Z,{title:"\u6709\u6548\u90AE\u7BB1 (\u5B89\u5168\u8BC4\u7EA7\uFF1A\u9AD8\uFF0C\u5EFA\u8BAE\u53D1\u9001)",children:[(0,e.jsx)(Pn.Z,{twoToneColor:"#52c41a"})," \u6709\u6548"]}):b==="invalid"?D=(0,e.jsxs)($.Z,{title:"\u65E0\u6548\u90AE\u7BB1 (\u5B89\u5168\u8BC4\u7EA7\uFF1A\u4F4E\uFF0C\u4E0D\u5EFA\u8BAE\u53D1\u9001)",children:[(0,e.jsx)(On.Z,{twoToneColor:"#eb2f96"})," \u65E0\u6548"]}):b==="unkown"?D=(0,e.jsxs)($.Z,{title:"\u672A\u77E5\u90AE\u7BB1 (\u5B89\u5168\u8BC4\u7EA7\uFF1A\u4E2D\uFF0C\u5EFA\u8BAE\u53D1\u9001)",children:[(0,e.jsx)(Fn.Z,{})," \u672A\u77E5"]}):b==="full"?D=(0,e.jsxs)($.Z,{title:"\u5168\u57DF\u90AE\u7BB1 (\u5B89\u5168\u8BC4\u7EA7\uFF1A\u4E2D\uFF0C\u5EFA\u8BAE\u53D1\u9001)",children:[(0,e.jsx)(Fn.Z,{twoToneColor:"orange"})," \u5168\u57DF"]}):b===""?D=(0,e.jsxs)($.Z,{title:"\u90AE\u4EF6\u672A\u9A8C\u8BC1",children:[(0,e.jsx)(Nn.Z,{})," \u672A\u9A8C\u8BC1"]}):D=(0,e.jsxs)($.Z,{title:"\u9A8C\u8BC1\u4E2D (\u8BF7\u7B49\u5F85\u7ED3\u679C)",children:[(0,e.jsx)(Sn.Z,{})," \u9A8C\u8BC1\u4E2D"]}),(0,e.jsx)("div",{style:{width:n-24,overflow:"hidden",whiteSpace:"nowrap"},children:D})},T=function(){var D;b==="valid"?D=(0,e.jsx)($.Z,{title:"\u6709\u6548\u90AE\u7BB1 (\u5B89\u5168\u8BC4\u7EA7\uFF1A\u9AD8\uFF0C\u5EFA\u8BAE\u53D1\u9001)",children:(0,e.jsx)(Pn.Z,{twoToneColor:"#52c41a"})}):b==="invalid"?D=(0,e.jsx)($.Z,{title:"\u65E0\u6548\u90AE\u7BB1 (\u5B89\u5168\u8BC4\u7EA7\uFF1A\u4F4E\uFF0C\u4E0D\u5EFA\u8BAE\u53D1\u9001)",children:(0,e.jsx)(On.Z,{twoToneColor:"#eb2f96"})}):b==="unkown"?D=(0,e.jsx)($.Z,{title:"\u672A\u77E5\u90AE\u7BB1 (\u5B89\u5168\u8BC4\u7EA7\uFF1A\u4E2D\uFF0C\u5EFA\u8BAE\u53D1\u9001)",children:(0,e.jsx)(Fn.Z,{})}):b==="full"?D=(0,e.jsx)($.Z,{title:"\u5168\u57DF\u90AE\u7BB1 (\u5B89\u5168\u8BC4\u7EA7\uFF1A\u4E2D\uFF0C\u5EFA\u8BAE\u53D1\u9001)",children:(0,e.jsx)(Fn.Z,{twoToneColor:"orange"})}):b===""?D=(0,e.jsx)($.Z,{title:"\u90AE\u4EF6\u672A\u9A8C\u8BC1",children:(0,e.jsx)(Nn.Z,{})}):D=(0,e.jsx)($.Z,{title:"\u9A8C\u8BC1\u4E2D (\u8BF7\u7B49\u5F85\u7ED3\u679C)",children:(0,e.jsx)(Sn.Z,{})});var F=(0,e.jsx)($.Z,{title:f,children:(0,e.jsx)("a",{href:"mailto:".concat(f),onClick:function(z){return z.stopPropagation()},children:f})});return(0,e.jsxs)("div",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[D,"\xA0",F]})},ne=function(){if(!A)return null;var D=A.map(function(F){var re=l.findIndex(function(X){return X.id===F});if(re>=0){var z=l[re],ue=z.name,R=z.color;return(0,e.jsx)(jn.Z,{color:R,children:ue},F)}return null});return(0,e.jsx)($.Z,{title:D,children:(0,e.jsx)("div",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:D})})},V=function(){return E&&C?(0,e.jsx)("span",{children:"".concat(C," ").concat(E)}):E&&!C?(0,e.jsx)("span",{children:"".concat(E)}):!E&&C?(0,e.jsx)("span",{children:"".concat(C)}):(0,e.jsx)("span",{children:"-"})},N=function(){return(0,e.jsx)("div",{children:En()(I).format("YYYY-MM-DD")})},v=function(){return(0,e.jsx)("div",{children:En()(I).format("YYYY-MM-DD")})},t=function(){if(I){var D=I.includes("http")?I:"http://".concat(I);return(0,e.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:D,children:(0,e.jsx)(Pt.Z,{})})}return null},a=function(){if(!O)return null;var D=l.findIndex(function(re){return re.userid===O});if(D>=0){var F=l[D].nickname;return(0,e.jsx)("a",{children:F})}return(0,e.jsx)("a",{children:"\u672A\u77E5\u7528\u6237"})},s=function(){return typeof I=="undefined"?(0,e.jsx)("div",{children:"-"}):p==="email"?T():p==="tags"?ne():p==="name"?V():S==="date"?v():S==="dateTime"?N():p==="sourcePage"?t():p==="userid"?a():p==="verify_status"?G():(0,e.jsx)($.Z,{title:I,children:(0,e.jsx)("div",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:I})})};return s()},zt=Nt,zn=r(36765),Zn=r(43525),Jn=r(36541),_t=function(c){var p=c.item,Z=p.dataIndex,j=p.title,S=p.formItemProps,n=p.tip;return Z?Z==="email"?(0,e.jsx)(q.Z.Item,y()(y()({},S),{},{label:j,name:Z,tooltip:n,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u90AE\u7BB1\u5730\u5740!"},{type:"email",message:"\u90AE\u7BB1\u5730\u5740\u683C\u5F0F\u9519\u8BEF!"}],children:(0,e.jsx)(Jn.Z,{field:p})})):(0,e.jsx)(q.Z.Item,y()(y()({},S),{},{label:j,name:Z,tooltip:n,children:(0,e.jsx)(Jn.Z,{field:p})})):null},ft=_t,Lt=r(25003),Mt=r(21261),ht=r(16300),Wt={border:"1px dashed gray",padding:"0.5rem 1rem",marginBottom:".5rem",backgroundColor:"white",cursor:"move",height:40},Kt={border:"1px solid gray",padding:"0.5rem 1rem",marginBottom:".5rem",backgroundColor:"white",height:40},Qn={CARD:"card"},mt=function(c){var p=c.id,Z=c.index,j=c.text,S=c.moveCard,n=c.removeCard,l=c.belongTo,A=(0,de.useRef)(null),f=3;l==="company"&&(f=1);var b=(0,Lt.L)({accept:Qn.CARD,hover:function(N,v){var t;if(!!A.current){var a=N.index,s=Z;if(a!==s){var o=(t=A.current)===null||t===void 0?void 0:t.getBoundingClientRect(),D=(o.bottom-o.top)/2,F=v.getClientOffset(),re=F.y-o.top;a<s&&re<D||a>s&&re>D||(S(a,s),N.index=s)}}}}),E=ae()(b,2),C=E[1],O=(0,Mt.c)({item:{type:Qn.CARD,id:p,index:Z},type:Qn.CARD,collect:function(N){return{isDragging:N.isDragging()}}}),I=ae()(O,2),G=I[0].isDragging,T=I[1],ne=G?0:1;return T(C(A)),Z<f?(0,e.jsx)("div",{style:Kt,children:(0,e.jsx)(mn.Z,{children:(0,e.jsx)(Ue.Z,{span:22,children:(0,e.jsx)("span",{children:j})})})}):(0,e.jsx)("div",{ref:A,style:y()(y()({},Wt),{},{opacity:ne}),children:(0,e.jsxs)(mn.Z,{children:[(0,e.jsx)(Ue.Z,{span:23,children:(0,e.jsx)("div",{children:j})},"1"),(0,e.jsx)(Ue.Z,{span:1,children:(0,e.jsx)("a",{onClick:function(){return n(Z)},children:(0,e.jsx)(ht.Z,{})})},"2")]})})},Ut=r(23952),$t=r(4690),Gt=r(85899),Yt=r.n(Gt),pt={width:360,height:480},Ht=function(c){var p=c.visible,Z=c.onCancel,j=c.belongTo,S=c.saveType,n=c.actionReload,l=(0,ve.Z)({fields:[],saves:[],columns:[],key:""}),A=ae()(l,2),f=A[0],b=A[1],E=(0,B.useRequest)(wn.s6,{manual:!0,onSuccess:function(R){b({fields:R})}}),C=E.run,O=function(){var ue=Y()(x()().mark(function R(X,_){var P;return x()().wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:P=X.indexOf(_),P>=0&&X.splice(P,1),X.splice(0,0,_);case 3:case"end":return Xe.stop()}},R)}));return function(X,_){return ue.apply(this,arguments)}}(),I=(0,B.useRequest)(wn.Q0,{manual:!0,onSuccess:function(){var ue=Y()(x()().mark(function X(_){return x()().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:if(j!=="company"){Ee.next=5;break}return Ee.next=3,O(_,"name");case 3:Ee.next=11;break;case 5:return Ee.next=7,O(_,"tags");case 7:return Ee.next=9,O(_,"email");case 9:return Ee.next=11,O(_,"name");case 11:b({columns:_});case 12:case"end":return Ee.stop()}},X)}));function R(X){return ue.apply(this,arguments)}return R}()}),G=I.run,T=function(){var ue=Y()(x()().mark(function R(){return x()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(S!=="show"){_.next=5;break}return _.next=3,C({belongTo:j,saveType:"read"});case 3:return _.next=5,G({belongTo:j,saveType:"show"});case 5:if(S!=="create"){_.next=10;break}return _.next=8,C({belongTo:j,saveType:"modify"});case 8:return _.next=10,G({belongTo:j,saveType:"create"});case 10:case"end":return _.stop()}},R)}));return function(){return ue.apply(this,arguments)}}(),ne=function(){var R=f.columns;if(R.length>3){var X=R.length-3;R.splice(3,X),b({columns:R})}},V=function(R,X){var _=f.columns;if(R)_.push(X);else{var P=_.indexOf(X);_.splice(P,1)}b({columns:_})},N=function(R){var X=f.key,_=f.columns,P=R.dataIndex,Ee=R.title;if(X){var Xe=Ee.indexOf(X);if(Xe<0)return null}if(j==="company"&&S==="show"){if(P==="name")return(0,e.jsx)("div",{children:(0,e.jsx)(In.Z,{defaultChecked:!0,disabled:!0,children:Ee})},P)}else if(P==="email"||P==="name"||P==="tags")return(0,e.jsx)("div",{children:(0,e.jsx)(In.Z,{defaultChecked:!0,disabled:!0,children:Ee})},P);var an=!1;return _.indexOf(P)>=0&&(an=!0),(0,e.jsx)("div",{children:(0,e.jsx)(In.Z,{checked:an,onChange:function(ke){return V(ke.target.checked,P)},style:{width:"100%"},children:Ee})},P)},v=(0,de.useCallback)(function(ue,R){var X=f.columns,_=X[ue],P=Yt()(X,{$splice:[[ue,1],[R,0,_]]});b({columns:P})},[f]),t=(0,de.useCallback)(function(ue){var R=f.columns;R.splice(ue,1),b({columns:R})},[f]),a=(0,de.useCallback)(function(ue,R){var X=f.columns;X[ue]=R,b({columns:X})},[f]),s=function(R,X){var _=f.fields,P=_.findIndex(function(ke){return ke.dataIndex===R});if(P>=0){var Ee=_[P],Xe=Ee.dataIndex,an=Ee.title;return(0,e.jsx)(mt,{index:X,id:Xe,text:an,moveCard:v,removeCard:t,changeCard:a,belongTo:j},Xe)}var qe="".concat(R,"(\u5DF2\u5220\u9664)");return(0,e.jsx)(mt,{index:X,id:R,text:qe,moveCard:v,removeCard:t,changeCard:a,belongTo:j},R)},o=(0,B.useRequest)(wn.JA,{manual:!0,onSuccess:function(){te.ZP.success("\u4FDD\u5B58\u6210\u529F"),Z(),n()}}),D=o.run,F=o.loading,re=function(){var ue=Y()(x()().mark(function R(){var X;return x()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:X=f.columns,D({belongTo:j,saveType:S,columns:X});case 2:case"end":return P.stop()}},R)}));return function(){return ue.apply(this,arguments)}}(),z=function(){return j==="company"&&S==="show"?"\u516C\u53F8\u5217\u8868\u5B57\u6BB5\u663E\u793A\u8BBE\u7F6E":j==="company"&&S==="create"?"\u516C\u53F8\u521B\u5EFA\u5B57\u6BB5\u663E\u793A\u8BBE\u7F6E":j==="company"&&S==="update"?"\u516C\u53F8\u7F16\u8F91\u5B57\u6BB5\u663E\u793A\u8BBE\u7F6E":j==="contact"&&S==="show"?"\u8054\u7CFB\u4EBA\u5217\u8868\u5B57\u6BB5\u663E\u793A\u8BBE\u7F6E":j==="contact"&&S==="create"?"\u8054\u7CFB\u4EBA\u521B\u5EFA\u5B57\u6BB5\u663E\u793A\u8BBE\u7F6E":j==="contact"&&S==="update"?"\u8054\u7CFB\u4EBA\u7F16\u8F91\u5B57\u6BB5\u663E\u793A\u8BBE\u7F6E":""};return(0,de.useEffect)(function(){p&&T()},[p]),(0,e.jsx)(ye.Z,{title:z(),width:720,destroyOnClose:!0,open:p,onCancel:Z,okText:"\u4FDD\u5B58",bodyStyle:{padding:0},onOk:re,confirmLoading:F,children:(0,e.jsxs)(mn.Z,{children:[(0,e.jsx)(Ue.Z,{xs:24,lg:12,children:(0,e.jsxs)(_e.Z,{style:pt,children:[(0,e.jsx)(H.Z.Search,{placeholder:"\u641C\u7D22\u5B57\u6BB5",allowClear:!0,onChange:function(R){return b({key:R.target.value})},style:{width:"100%",paddingBottom:10},value:f.key}),(0,e.jsx)("div",{style:{fontSize:24,overflow:"auto",height:370},children:f.fields.map(function(ue){return N(ue)})}),(0,e.jsxs)("div",{style:{textAlign:"right",paddingTop:10,fontSize:16},children:["\u6CA1\u6709\u4F60\u9700\u8981\u7684\u5B57\u6BB5?",(0,e.jsx)(B.Link,{to:"/settings/fields",children:"\u65B0\u5EFA\u5B57\u6BB5"})]})]})}),(0,e.jsx)(Ue.Z,{xs:24,lg:12,children:(0,e.jsxs)(_e.Z,{title:!1,style:pt,children:[(0,e.jsxs)("div",{style:{fontSize:20,paddingBottom:10},children:["\u5DF2\u9009\u62E9\u7684\u5B57\u6BB5 ",(0,e.jsx)("a",{children:f.columns.length})]}),(0,e.jsx)("div",{style:{fontSize:16,overflow:"auto",height:370},children:(0,e.jsx)(Ut.W,{backend:$t.PD,children:(0,e.jsx)("div",{style:{width:"100%"},children:f.columns.map(function(ue,R){return s(ue,R)})})})}),(0,e.jsx)("div",{style:{textAlign:"right",paddingTop:10,fontSize:16},children:(0,e.jsx)("a",{onClick:ne,children:"\u6E05\u7A7A\u5B57\u6BB5"})})]})})]})})},qn=Ht,Xt={labelCol:{span:5},wrapperCol:{span:19}},Jt=function(c){var p=c.visible,Z=c.onCancel,j=c.actionReload,S=q.Z.useForm(),n=ae()(S,1),l=n[0],A=(0,ve.Z)({notice:"",createDisable:!1,fieldSettingVisible:!1}),f=ae()(A,2),b=f[0],E=f[1],C=(0,B.useRequest)(wn.p1,{manual:!0}),O=C.data,I=C.run,G=(0,B.useRequest)(ce.aj,{manual:!0,onSuccess:function(){te.ZP.success("\u65B0\u589E\u8054\u7CFB\u4EBA\u6210\u529F")}}),T=G.run,ne=G.loading,V=function(){var t=Y()(x()().mark(function a(s){var o;return x()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.prev=0,F.next=3,l.validateFields();case 3:return o=F.sent,F.next=6,T(o);case 6:s||Z(),j(),l.resetFields(),F.next=14;break;case 11:F.prev=11,F.t0=F.catch(0),console.log("Failed:",F.t0);case 14:case"end":return F.stop()}},a,null,[[0,11]])}));return function(s){return t.apply(this,arguments)}}();(0,de.useEffect)(function(){p&&(I(),l.resetFields())},[p]);var N=function(){return(0,e.jsxs)("div",{style:{textAlign:"center"},children:[(0,e.jsx)(ie.ZP,{style:{marginRight:16},onClick:function(){return Z()},children:"\u53D6\u6D88"}),(0,e.jsx)(ie.ZP,{type:"primary",style:{marginRight:16},onClick:function(){return V(!0)},disabled:b.createDisable,loading:ne,children:"\u521B\u5EFA\u5E76\u7EE7\u7EED\u4E0B\u4E00\u4E2A"}),(0,e.jsx)(ie.ZP,{type:"primary",onClick:function(){return V(!1)},disabled:b.createDisable,loading:ne,children:"\u521B\u5EFA"})]})},v=function(a,s){var o=s.email;console.log(o)};return(0,e.jsxs)(zn.Z,{destroyOnClose:!0,width:480,title:"\u65B0\u5EFA\u8054\u7CFB\u4EBA",placement:"right",open:p,onClose:function(){return Z()},footer:N(),children:[b.notice?(0,e.jsx)(Zn.Z,{message:b.notice,type:"warning",showIcon:!0,closable:!0,banner:!0}):null,(0,e.jsx)(q.Z,y()(y()({},Xt),{},{form:l,onValuesChange:v,children:O==null?void 0:O.map(function(t,a){return(0,e.jsx)(ft,{item:t},"key_".concat(a))})})),(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsx)("a",{style:{marginRight:16},onClick:function(){return E({fieldSettingVisible:!0})},children:"\u81EA\u5B9A\u4E49\u663E\u793A\u5B57\u6BB5"})}),(0,e.jsx)(qn,{visible:b.fieldSettingVisible,onCancel:function(){return E({fieldSettingVisible:!1})},belongTo:"contact",saveType:"create",actionReload:function(){return I()}})]})},Qt=Jt,qt={labelCol:{span:4},wrapperCol:{span:20}},er=function(c){var p=c.visible,Z=c.onCancel,j=c.actionReload,S=c.current,n=q.Z.useForm(),l=ae()(n,1),A=l[0],f=(0,ve.Z)({notice:"",createDisable:!1,fieldSettingVisible:!1,hasChange:!1}),b=ae()(f,2),E=b[0],C=b[1],O=(0,B.useRequest)(wn.p1,{manual:!0}),I=O.data,G=O.run,T=(0,B.useRequest)(ce.eC,{manual:!0,onSuccess:function(){te.ZP.success("\u66F4\u65B0\u8054\u7CFB\u4EBA\u6210\u529F"),j(),Z()}}),ne=T.run,V=T.loading,N=function(){var s=Y()(x()().mark(function o(){var D,F;return x()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.prev=0,z.next=3,A.validateFields();case 3:D=z.sent,F=S.cid,ne(y()(y()({},D),{},{cid:F})),z.next=11;break;case 8:z.prev=8,z.t0=z.catch(0),console.log("Failed:",z.t0);case 11:case"end":return z.stop()}},o,null,[[0,8]])}));return function(){return s.apply(this,arguments)}}(),v=function(){A.resetFields(),A.setFieldsValue(S)};(0,de.useEffect)(function(){p&&(G(),A.resetFields(),A.setFieldsValue(S))},[p]);var t=function(){return(0,e.jsxs)("div",{style:{textAlign:"center"},children:[(0,e.jsx)(ie.ZP,{style:{marginRight:16},onClick:function(){return Z()},children:"\u5173\u95ED"}),(0,e.jsx)(ie.ZP,{style:{marginRight:16},onClick:function(){return v()},disabled:!E.hasChange,children:"\u91CD\u7F6E"}),(0,e.jsx)(ie.ZP,{type:"primary",onClick:function(){return N()},loading:V,disabled:!E.hasChange,children:"\u4FDD\u5B58"})]})},a=function(){C({hasChange:!0})};return(0,e.jsxs)(zn.Z,{destroyOnClose:!0,width:480,title:"\u8054\u7CFB\u4EBA\u9884\u89C8",placement:"right",open:p,onClose:function(){return Z()},footer:t(),children:[E.notice?(0,e.jsx)(Zn.Z,{message:E.notice,type:"warning",showIcon:!0,closable:!0,banner:!0}):null,(0,e.jsx)(q.Z,y()(y()({},qt),{},{form:A,onValuesChange:a,children:I==null?void 0:I.map(function(s){var o=s.dataIndex;return o==="name"?null:(0,e.jsx)(ft,{item:s},o)})})),(0,e.jsx)("div",{style:{textAlign:"right"},children:(0,e.jsx)("a",{style:{marginRight:16},onClick:function(){return C({fieldSettingVisible:!0})},children:"\u81EA\u5B9A\u4E49\u663E\u793A\u5B57\u6BB5"})}),(0,e.jsx)(qn,{visible:E.fieldSettingVisible,onCancel:function(){return C({fieldSettingVisible:!1})},belongTo:"contact",saveType:"create",actionReload:function(){return G()}})]})},nr=er,tr=r(28480),gt=r(1406),_n=r(6701),Ct=r(9829),rr=Le.Z.useToken,rn={width:"100%",marginTop:12,marginBottom:4},cn="large",ir=function(c){var p=c.fieldConfig,Z=c.fieldValue,j=c.onApplyAction,S=p.dataIndex,n=p.title,l=p.valueType,A=p.items,f=(0,ve.Z)({property:"",operator:"",values:[],value:""}),b=ae()(f,2),E=b[0],C=b[1],O=rr(),I=O.token,G=function(N){var v=E.operator,t=E.value,a=E.values;if(N!==v||!v||!N||N==="null"||N==="notNull")return null;if(S==="verify_status")return(0,e.jsxs)(Ve.Z,{mode:"multiple",allowClear:!0,placeholder:"\u672A\u9009\u62E9",value:a,style:rn,size:cn,onChange:function(P){return C({values:P})},children:[(0,e.jsxs)(Ve.Z.Option,{value:"valid",children:[(0,e.jsx)(Pn.Z,{twoToneColor:"#52c41a"})," \u6709\u6548\u90AE\u7BB1"]}),(0,e.jsxs)(Ve.Z.Option,{value:"full",children:[(0,e.jsx)(Fn.Z,{twoToneColor:"orange"})," \u5168\u57DF\u90AE\u7BB1"]}),(0,e.jsxs)(Ve.Z.Option,{value:"unkown",children:[(0,e.jsx)(Fn.Z,{})," \u672A\u77E5\u90AE\u7BB1"]}),(0,e.jsxs)(Ve.Z.Option,{value:"invalid",children:[(0,e.jsx)(On.Z,{twoToneColor:"#eb2f96"})," \u65E0\u6548\u90AE\u7BB1"]}),(0,e.jsxs)(Ve.Z.Option,{value:"waiting",children:[(0,e.jsx)(Sn.Z,{})," \u9A8C\u8BC1\u4E2D"]}),(0,e.jsxs)(Ve.Z.Option,{value:"",children:[(0,e.jsx)(Nn.Z,{})," \u672A\u9A8C\u8BC1"]})]});if(S==="tags"){var s=(0,Ct.J)(A);return(0,e.jsx)(kn.Z,{treeDataSimpleMode:!0,treeData:s,allowClear:!0,showSearch:!0,placeholder:"\u8BF7\u9009\u62E9\u6807\u7B7E",value:a,style:rn,size:cn,showArrow:!0,treeCheckable:!0,onChange:function(P){return C({values:P})},treeNodeFilterProp:"name"})}if(S==="userid"){var o=A.map(function(_){var P=_.userid,Ee=_.nickname;return{id:P,value:P,title:Ee}});return(0,e.jsx)(kn.Z,{treeDataSimpleMode:!0,treeData:o,allowClear:!0,showSearch:!0,placeholder:"\u8BF7\u9009\u62E9\u5F52\u5C5E",value:a,style:rn,size:cn,showArrow:!0,treeCheckable:!0,onChange:function(P){return C({values:P})}})}if(l==="text"||l==="textarea")return N==="eq"||N==="neq"?(0,e.jsx)(H.Z,{style:rn,value:t,onChange:function(P){return C({value:P.target.value})}}):(0,e.jsx)(Ve.Z,{mode:"tags",allowClear:!0,optionFilterProp:"label",placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD,\u53EF\u591A\u4E2A,\u5E26\u9017\u53F7\u5206\u53F7\u81EA\u52A8\u5206\u8BCD",value:a,tokenSeparators:[";",","],style:rn,size:cn,onChange:function(P){return C({values:P})}});if(l==="select")return(0,e.jsx)(Ve.Z,{mode:"tags",showArrow:!0,allowClear:!0,showSearch:!0,optionFilterProp:"label",tokenSeparators:[";",","],placeholder:"\u8BF7\u9009\u62E9",value:a,style:rn,size:cn,onChange:function(P){return C({values:P})}});if(l==="digit"||l==="money"||l==="percent"){var D=t;return typeof t=="string"&&(D=""),(0,e.jsx)(hn.Z,{style:rn,value:D,onChange:function(P){return C({value:P})}})}if(l==="date"){if(N==="before"){var F=t;return typeof t=="string"&&(F=""),(0,e.jsxs)("span",{children:[(0,e.jsx)(hn.Z,{value:F,onChange:function(P){return C({value:P})},placeholder:"N",size:cn}),(0,e.jsx)("span",{children:"\u5929\u4E4B\u524D"})]})}if(N==="after"){var re=t;return typeof t=="string"&&(re=""),(0,e.jsxs)("span",{children:[(0,e.jsx)(hn.Z,{value:re,style:rn,size:cn,onChange:function(P){return C({value:P})},placeholder:"N"}),(0,e.jsx)("span",{children:"\u5929\u4E4B\u5185"})]})}var z=t;return typeof t=="number"&&(z=En()(t)),t||(z=En()()),(0,e.jsx)(gt.Z,{value:z,onChange:function(P){C(P?{value:En()(P).valueOf()}:{value:""})},style:rn,size:cn})}if(l==="dateTime"){if(N==="before"){var ue=t;return typeof t=="string"&&(ue=""),(0,e.jsxs)("span",{children:[(0,e.jsx)(hn.Z,{value:ue,onChange:function(P){return C({value:P})},placeholder:"N",style:rn,size:cn}),(0,e.jsx)("span",{children:"\u5929\u4E4B\u524D"})]})}if(N==="after"){var R=t;return typeof t=="string"&&(R=""),(0,e.jsxs)("span",{children:[(0,e.jsx)(hn.Z,{value:R,onChange:function(P){return C({value:P})},placeholder:"N",style:rn,size:cn}),(0,e.jsx)("span",{children:"\u5929\u4E4B\u5185"})]})}var X=t;return t?typeof t=="string"?X=En()(t):typeof t=="number"&&(X=En()()):X=En()(),(0,e.jsx)(gt.Z,{value:X,onChange:function(P){C(P?{value:En()(P).format("YYYY-MM-DD")}:{value:""})},style:rn,size:cn})}return null},T=function(){var N=_n.$[l];return N?(0,e.jsx)("div",{style:{marginBottom:12},children:(0,e.jsx)(ee.ZP.Group,{value:E.operator,onChange:function(t){return C({operator:t.target.value})},children:(0,e.jsx)(Pe.Z,{direction:"vertical",children:N.map(function(v){return(0,e.jsxs)("div",{style:{width:320},children:[(0,e.jsx)("div",{children:(0,e.jsx)(ee.ZP,{value:v.key,children:v.name},v.key)}),(0,e.jsx)("div",{children:G(v.key)})]},v.key)})})})}):(0,e.jsx)("div",{children:"\u5176\u4ED6\u7C7B\u578B\u5B57\u6BB5"})};(0,de.useEffect)(function(){var V=Z.operator,N=Z.values,v=Z.value;C({property:S,operator:V,values:N,value:v})},[Z]);var ne=function(){var N=E.property,v=E.operator,t=E.value,a=E.values;if(v!=="null"&&v!=="notNull"&&!t&&!(a!=null&&a.length)&&t!==0){te.ZP.error("\u6570\u636E\u4E0D\u80FD\u4E3A\u7A7A");return}j({property:N,operator:v,value:t,values:a})};return(0,e.jsxs)("div",{style:{margin:12},children:[(0,e.jsxs)("div",{style:{marginBottom:12,fontSize:16,color:I.colorTextBase},children:["\u9009\u4E2D\u5B57\u6BB5\uFF1A",n]}),T(),(0,e.jsx)("div",{style:{marginTop:12},children:(0,e.jsx)(ie.ZP,{size:"small",type:"primary",onClick:ne,children:"\u5E94\u7528"})})]})},ur=ir,un=r(77482),ar=Le.Z.useToken,lr=function(c){var p=c.filters,Z=c.logic,j=c.visible,S=c.onCancel,n=c.onApplyAction,l=c.onLogicChange,A=c.viewConfig,f=(0,ve.Z)({key:"",step:1,fieldConfig:{},fieldValue:{},fieldIdx:-1,saveVisible:!1}),b=ae()(f,2),E=b[0],C=b[1],O=(0,B.useModel)("@@initialState"),I=O.initialState,G=ar(),T=G.token,ne=A.viewId,V=A.viewOwner,N=(0,B.useRequest)(wn.L6,{manual:!0,onSuccess:function(){(!p||!p.length)&&C({step:2})}}),v=N.data,t=N.run,a=(0,B.useRequest)(ce.i9,{manual:!0,onSuccess:function(){te.ZP.success("\u4FDD\u5B58\u6210\u529F"),C({saveVisible:!1})}}),s=a.run,o=function(oe){C({step:3,fieldConfig:oe})},D=function(){return(0,e.jsxs)("div",{style:{width:"100%"},children:[(0,e.jsx)("div",{style:{marginBottom:12},children:(0,e.jsxs)("a",{onClick:function(){return C({step:1})},children:[(0,e.jsx)(Ie.Z,{})," \u8FD4\u56DE"]})}),(0,e.jsx)(H.Z.Search,{placeholder:"\u641C\u7D22\u5B57\u6BB5",allowClear:!0,onChange:function(le){return C({key:le.target.value})},style:{width:"100%",paddingBottom:10},value:E.key}),(0,e.jsxs)("div",{style:{overflow:"auto",color:T.colorText},children:[(0,e.jsx)("div",{style:{fontSize:12},children:"\u7CFB\u7EDF\u9ED8\u8BA4\u5B57\u6BB5"}),v.map(function(oe){var le=oe.dataIndex,Ce=oe.title,We=E.key;return Ce.toLocaleLowerCase().indexOf(We.toLocaleLowerCase())>=0?(0,e.jsx)("a",{onClick:function(){return o(oe)},children:(0,e.jsx)("div",{className:un.Z["view-item"],style:{color:T.colorText},children:Ce})},le):null})]})]})},F=function(){C({step:2,fieldIdx:-1})},re=function(oe,le){var Ce=oe.findIndex(function(pn){return pn.userid===le});if(Ce>=0){var We=oe[Ce],Fe=We.userid,dn=We.nickname;return(0,e.jsx)(jn.Z,{children:dn},Fe)}return(0,e.jsx)(jn.Z,{children:le},le)},z=function(oe,le,Ce,We,Fe,dn){if(oe==="null"||oe==="notNull")return(0,e.jsx)("div",{style:{width:296},children:(0,e.jsx)("span",{children:(0,e.jsx)("a",{children:le})})});var pn=dn.dataIndex,vn=dn.items,gn=dn.options;if(pn==="tags")return(0,e.jsx)("div",{style:{width:296},children:(0,e.jsxs)("span",{children:[le," ",Fe==null?void 0:Fe.map(function(Se){var Te=vn.findIndex(function(nn){return nn.id===Se});if(Te>=0){var en=vn[Te],Cn=en.name,bn=en.color;return(0,e.jsx)(jn.Z,{color:bn,children:Cn},Se)}return(0,e.jsx)(jn.Z,{children:Se},Se)})]})});if(pn==="userid"){if(oe==="include"||oe==="exclude")return(0,e.jsx)("div",{style:{width:296},children:(0,e.jsxs)("span",{children:[le," ",Fe==null?void 0:Fe.map(function(Se){return re(vn,Se)})]})});if(oe==="eq"||oe==="neq")return(0,e.jsx)("div",{style:{width:296},children:(0,e.jsxs)("span",{children:[le," ",re(vn,We)]})})}return _n.p.indexOf(oe)>=0?Ce==="select"?(0,e.jsx)("div",{style:{width:296},children:(0,e.jsxs)("span",{children:[le," ",Fe==null?void 0:Fe.map(function(Se){var Te=gn.findIndex(function(Cn){return Cn.value===Se});if(Te>=0){var en=gn[Te].label;return(0,e.jsx)(jn.Z,{children:en},Se)}return(0,e.jsx)(jn.Z,{children:Se},Se)})]})}):(0,e.jsx)("div",{style:{width:296},children:(0,e.jsxs)("span",{children:[le," ",Fe==null?void 0:Fe.map(function(Se){return(0,e.jsx)(jn.Z,{children:Se},Se)})]})}):(0,e.jsx)("div",{style:{width:296},children:(0,e.jsxs)("span",{children:[le," ",(0,e.jsx)("a",{children:We})]})})},ue=function(oe,le){var Ce,We;if(!(I!=null&&(Ce=I.currentUser)!==null&&Ce!==void 0&&Ce.isOrg))return!0;var Fe=oe.property;return ne==="mine"&&Fe==="userid"&&le===0||ne==="unassign"&&Fe==="userid"&&le===0?!1:I!=null&&(We=I.userPermissions["contacts.contacts.allShow"])!==null&&We!==void 0&&We.checked?!0:!(ne==="mine"||ne==="unassign"||Fe==="userid")},R=function(oe){l(oe),C({saveVisible:!0})},X=function(){var oe=p.map(function(le,Ce){var We=le.property,Fe=le.operator,dn=le.value,pn=le.values;if(!v)return null;var vn="_key_".concat(We,"_").concat(Ce),gn=v.findIndex(function(nn){return nn.dataIndex===We});if(gn<0)return(0,e.jsx)(Zn.Z,{message:"\u672A\u77E5\u5B57\u6BB5: ".concat(We),type:"warning",closable:!0,onClose:function(){return n(le,Ce,"delete")}},vn);var Se=v[gn],Te=Se.title,en=Se.valueType,Cn=_n.$[en].findIndex(function(nn){return nn.key===Fe});if(Cn<0)return null;var bn=_n.$[en][Cn].name;return(0,e.jsxs)("div",{children:[Ce>0?(0,e.jsx)("div",{className:un.Z["condition-and"],children:Z==="or"?(0,e.jsx)("span",{children:"\u6216\u8005"}):(0,e.jsx)("span",{children:"\u5E76\u4E14"})}):null,(0,e.jsx)(tr.Z,{style:{background:T.colorBgContainer,borderColor:T.colorBorderSecondary,color:T.colorText},checked:!1,title:(0,e.jsx)("div",{style:{color:T.colorText},children:Te}),description:(0,e.jsx)("div",{style:{color:T.colorText},children:z(Fe,bn,en,dn,pn,Se)}),onClick:function(){C({step:3,fieldConfig:v[gn],fieldValue:le,fieldIdx:Ce})},disabled:!ue(le,Ce),extra:(0,e.jsx)(ie.ZP,{type:"text",size:"small",onClick:function(Dn){Dn.stopPropagation(),C({saveVisible:!0}),n(le,Ce,"delete")},disabled:!ue(le,Ce),children:(0,e.jsx)(Be.Z,{})})})]},vn)});return(0,e.jsxs)("div",{children:[oe,(0,e.jsxs)("div",{style:{marginTop:24},children:[(0,e.jsxs)(ee.ZP.Group,{onChange:function(Ce){return R(Ce.target.value)},value:Z,children:[(0,e.jsx)(ee.ZP,{value:"and",children:"\u5E76\u4E14"}),(0,e.jsx)(ee.ZP,{value:"or",disabled:!0,children:"\u6216\u8005"})]}),(0,e.jsxs)(ie.ZP,{size:"small",type:"primary",onClick:F,style:{marginRight:24},children:[(0,e.jsx)(be.Z,{})," \u65B0\u589E\u6761\u4EF6"]})]})]})},_=function(oe){var le=E.fieldIdx;le<0?n(oe,le,"add"):n(oe,le,"update"),C({step:1,saveVisible:!0})},P=function(){var oe=E.fieldIdx;oe>=0?C({step:1}):C({step:2})},Ee=function(){var oe=E.fieldConfig,le=E.fieldValue,Ce=E.fieldIdx;return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{style:{marginBottom:12},children:(0,e.jsxs)("a",{onClick:P,children:[(0,e.jsx)(Ie.Z,{})," \u8FD4\u56DE"]})}),(0,e.jsx)(ur,{fieldConfig:oe,fieldValue:le,fieldIdx:Ce,onApplyAction:_})]})};(0,de.useEffect)(function(){j&&t()},[j]);var Xe=function(){s({viewId:ne,filters:p})},an=function(){var oe=E.saveVisible;return oe&&V?(0,e.jsx)(Zn.Z,{message:"\u7ACB\u5373\u4FDD\u5B58\u89C6\u56FE\uFF1F",type:"warning",action:(0,e.jsx)(ie.ZP,{type:"primary",onClick:function(){return Xe()},children:"\u4FDD\u5B58"}),showIcon:!0}):"\u8054\u7CFB\u4EBA\u7B5B\u9009"},qe=function(){return(0,e.jsx)(ie.ZP,{type:"text",onClick:S,children:(0,e.jsx)(ht.Z,{style:{fontSize:16}})})};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(zn.Z,{title:an(),open:j,onClose:S,closable:!1,extra:qe(),width:420,children:[j&&E.step===1?X():null,j&&E.step===2?D():null,j&&E.step===3?Ee():null]})})},sr=lr,or={labelCol:{span:7},wrapperCol:{span:13}},cr=function(c){var p=c.visible,Z=c.onCancel,j=c.multiUpdate,S=c.changeRows,n=c.loading,l=q.Z.useForm(),A=ae()(l,1),f=A[0],b=(0,ve.Z)({changeField:null,changeType:"renew",changeValue:null,fieldsOptions:[],filedItem:{}}),E=ae()(b,2),C=E[0],O=E[1],I=(0,B.useRequest)(wn.Mc,{manual:!0,onSuccess:function(v){if(!!v){var t=[];for(var a in v){var s=v[a],o=s.dataIndex,D=s.title;o!=="email"&&t.push({label:D,value:o})}O({fieldsOptions:t})}}}),G=I.data,T=I.run;(0,de.useEffect)(function(){p&&T()},[p]);var ne=function(){var N=Y()(x()().mark(function v(){var t;return x()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,f.validateFields();case 3:t=s.sent,j(t),s.next=10;break;case 7:s.prev=7,s.t0=s.catch(0),console.log("Failed:",s.t0);case 10:case"end":return s.stop()}},v,null,[[0,7]])}));return function(){return N.apply(this,arguments)}}(),V=function(v){var t=v.changeField;if(t){var a=G.findIndex(function(s){return s.dataIndex===t});a>=0?O({filedItem:G[a]}):O({filedItem:{}})}O(y()({},v))};return(0,e.jsx)(ye.Z,{title:(0,e.jsxs)("span",{children:["\u6279\u91CF\u4FEE\u6539\u7EAA\u5F55\u6570 ",(0,e.jsx)("a",{children:S})]}),width:480,bodyStyle:{padding:"28px 0 0"},destroyOnClose:!0,open:p,onCancel:Z,okText:"\u63D0\u4EA4",onOk:ne,confirmLoading:n,children:(0,e.jsx)("div",{children:(0,e.jsxs)(q.Z,y()(y()({},or),{},{form:f,onValuesChange:V,children:[(0,e.jsx)(q.Z.Item,{label:"\u4FEE\u6539\u5B57\u6BB5",name:"changeField",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5B57\u6BB5"}],children:(0,e.jsx)(Ve.Z,{showArrow:!0,allowClear:!0,showSearch:!0,style:{width:"100%"},optionFilterProp:"label",placeholder:"\u8BF7\u9009\u62E9\u5B57\u6BB5",options:C.fieldsOptions})}),(0,e.jsx)(q.Z.Item,{label:"\u4FEE\u6539\u4E3A",name:"changeType",rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}],children:(0,e.jsxs)(ee.ZP.Group,{children:[(0,e.jsx)(ee.ZP,{value:"renew",children:"\u65B0\u503C"},"renew"),(0,e.jsx)(ee.ZP,{value:"renull",children:"\u7A7A\u503C"},"renull")]})}),C.changeType==="renew"?(0,e.jsx)(q.Z.Item,{label:"\u65B0\u503C",name:"changeValue",children:(0,e.jsx)(Jn.Z,{field:C.filedItem})}):null]}))})})},dr=cr,vr=function(c){var p=c.visible,Z=c.onCancel,j=c.multiDelete,S=c.rowCount,n=c.loading,l=q.Z.useForm(),A=ae()(l,1),f=A[0],b=function(){var E=Y()(x()().mark(function C(){var O,I;return x()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.prev=0,T.next=3,f.validateFields();case 3:if(O=T.sent,I=O.deleteRows,S===I){T.next=8;break}return te.ZP.error("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u5220\u9664\u7EAA\u5F55\u6570\u91CF"),T.abrupt("return");case 8:j(),T.next=14;break;case 11:T.prev=11,T.t0=T.catch(0),console.log("Failed:",T.t0);case 14:case"end":return T.stop()}},C,null,[[0,11]])}));return function(){return E.apply(this,arguments)}}();return(0,e.jsx)(ye.Z,{title:(0,e.jsxs)("span",{children:["\u5220\u9664\u7EAA\u5F55\u6570 ",(0,e.jsx)("a",{children:S})]}),width:450,bodyStyle:{padding:"28px 28px"},destroyOnClose:!0,open:p,onCancel:Z,okText:"\u5220\u9664",onOk:b,confirmLoading:n,children:(0,e.jsxs)("div",{children:[(0,e.jsx)(Zn.Z,{message:(0,e.jsxs)("span",{children:["\u4F60\u6B63\u5728\u5220\u9664 ",(0,e.jsx)("a",{children:"".concat(S)})," \u6761\u7EAA\u5F55\uFF0C\u5220\u966490\u5929\u540E\u65E0\u6CD5\u6062\u590D\u3002"]}),type:"error"}),(0,e.jsx)("div",{style:{paddingTop:12},children:"\u8F93\u5165\u4F60\u9700\u8981\u5220\u9664\u7684\u7EAA\u5F55\u6570"}),(0,e.jsx)(q.Z,{form:f,children:(0,e.jsx)(q.Z.Item,{name:"deleteRows",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5220\u9664\u7EAA\u5F55\u6570"}],children:(0,e.jsx)(hn.Z,{placeholder:"".concat(S),style:{width:"100%"},size:"large"})})})]})})},fr=vr,hr=r(52546),mr=r(45139),pr=function(c){var p=c.visible,Z=c.onCancel,j=c.onAction,S=c.rowCount,n=c.totalCount,l=c.loading,A=(0,ve.Z)({rangeType:"all",fieldType:"all",saveType:"CSV",vip:0}),f=ae()(A,2),b=f[0],E=f[1],C=(0,B.useRequest)(ce.Rs,{manual:!0}),O=C.data,I=C.run;(0,de.useEffect)(function(){p&&I()},[p]);var G=function(){var v=Y()(x()().mark(function t(){var a,s,o;return x()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(a=O.count,!(!a||a<=0)){F.next=4;break}return te.ZP.error("\u4ECA\u65E5\u5BFC\u51FA\u989D\u5EA6\u5DF2\u4F7F\u7528\u5B8C"),F.abrupt("return");case 4:if(s=b.rangeType,o=b.fieldType,!(s==="part"&&a<S)){F.next=8;break}return te.ZP.error("\u989D\u5EA6\u4E0D\u8DB3"),F.abrupt("return");case 8:if(!(s==="all"&&a<n)){F.next=11;break}return te.ZP.error("\u989D\u5EA6\u4E0D\u8DB3"),F.abrupt("return");case 11:j({rangeType:s,fieldType:o});case 12:case"end":return F.stop()}},t)}));return function(){return v.apply(this,arguments)}}(),T=function(){var v=Y()(x()().mark(function t(a){return x()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:E({rangeType:a.target.value});case 1:case"end":return o.stop()}},t)}));return function(a){return v.apply(this,arguments)}}(),ne=function(){var v=Y()(x()().mark(function t(a){return x()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:E({fieldType:a.target.value});case 1:case"end":return o.stop()}},t)}));return function(a){return v.apply(this,arguments)}}(),V={okText:"\u5BFC\u51FA",onOk:G,onCancel:Z},N=function(){return(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{children:"\u8054\u7CFB\u4EBA\u5BFC\u51FA"}),(0,e.jsx)("a",{style:{marginLeft:250},onClick:function(){return B.history.push("/contacts/export-history")},children:"\u5BFC\u51FA\u7EAA\u5F55"})]})};return(0,e.jsx)(ye.Z,y()(y()({title:N(),width:480,bodyStyle:{padding:"28px 24px 24px"},destroyOnClose:!0,open:p,confirmLoading:l},V),{},{children:(0,e.jsxs)("div",{children:[(0,e.jsx)(Zn.Z,{message:(0,e.jsxs)("div",{children:["\u5355\u65E5\u9650\u989D ",(0,e.jsx)("a",{children:O==null?void 0:O.quota})," \u5DF2\u4F7F\u7528 ",(0,e.jsx)("a",{children:O==null?void 0:O.today})," \u5269\u4F59"," ",(0,e.jsx)("a",{children:O==null?void 0:O.count})]}),action:(0,e.jsxs)("a",{href:"/expenses/purchase?type=svip",target:"_blank",style:{marginRight:13},children:[(0,e.jsx)(mr.Z,{}),"\u5347\u7EA7SVIP"]}),type:"info",showIcon:!0,style:{marginBottom:12}}),(0,e.jsx)("div",{style:{color:"#9f9f9f",paddingBottom:12},children:"\u4FDD\u5B58\u6587\u4EF6\u683C\u5F0F"}),(0,e.jsxs)(ee.ZP.Group,{style:{marginLeft:12},value:b.saveType,onChange:T,children:[(0,e.jsx)(ee.ZP,{value:"CSV",children:"CSV"}),(0,e.jsx)(ee.ZP,{value:"XLSX",disabled:!0,children:"XLSX"})]}),(0,e.jsx)("div",{style:{color:"#9f9f9f",paddingBottom:12,paddingTop:12},children:"\u5BFC\u51FA\u54EA\u4E9B\u6570\u636E"}),(0,e.jsx)(ee.ZP.Group,{style:{marginLeft:12},value:b.rangeType,onChange:T,children:(0,e.jsxs)(Pe.Z,{direction:"vertical",children:[(0,e.jsxs)(ee.ZP,{value:"part",children:["\u53EA\u5BFC\u51FA\u9875\u9762 ",(0,e.jsx)("a",{children:S})," \u6761\u6570\u636E"]}),(0,e.jsxs)(ee.ZP,{value:"all",children:["\u5BFC\u51FA\u5168\u90E8 ",(0,e.jsx)("a",{children:n})," \u6761\u6570\u636E"]})]})}),(0,e.jsx)("div",{style:{color:"#9f9f9f",paddingBottom:12,paddingTop:12},children:"\u5BFC\u51FA\u54EA\u4E9B\u5B57\u6BB5"}),(0,e.jsx)(ee.ZP.Group,{style:{marginLeft:12},value:b.fieldType,onChange:ne,children:(0,e.jsxs)(Pe.Z,{direction:"vertical",children:[(0,e.jsx)(ee.ZP,{value:"part",children:"\u5F53\u524D\u663E\u793A\u7684\u90E8\u5206\u5B57\u6BB5"}),(0,e.jsx)(ee.ZP,{value:"all",children:"\u5168\u90E8\u5B57\u6BB5"})]})})]})}))},gr=pr,Cr=r(93275),xr=r.n(Cr),An=r(73575),yr=r(87662),wr=r(65191),Ln=r(13949),jr=r(90460),Er=r(64377),et=r(85495),xt=r(61620),Fr=r(87424),Ar=r(42109),yt=r(88665),Mn=r(74729),br=r(70683),Dr=r(33349),kr=r(70176),Zr=r(12653),Br=r(61825),Sr=r(43522),Tr=function(c){var p=c.visible,Z=c.onCancel,j=c.initValues,S=j.selectAll,n=j.selectKeys,l=j.filters,A=j.logic,f=j.keyword,b=j.selectOption,E=j.selectSort,C=j.selectTotal,O=(0,B.useModel)("@@initialState"),I=O.initialState,G=0;I!=null&&I.currentUser&&(G=I.currentUser.vip);var T=q.Z.useForm(),ne=ae()(T,1),V=ne[0],N=(0,ve.Z)({mode:"filter",settingType:"send",channel:2,sendAtOnce:!0,timeStart:0,memberOptions:[],senderOptions:[],senderVisible:!1,accountOptions:[],accountVisible:!1,subjectTreeData:[],contentTreeData:[],includeTreeData:[],excludeTreeData:[],attachmentOptions:[],replyOptions:[],replyVisible:!1,subjectVisible:!1,contentVisible:!1,timeVisible:!1,previewVisible:!1,attachmentVisible:!1,preview:!1,change:!1,status:"unkown",saveLoading:!1,costStatus:0,payBalanceVisible:!1,payPackageVisible:!1,qrcodeVisible:!1,id:"",app:"",codeUrl:"",otherEditStatus:!1,track:{status:!0},timeSleep:{status:!0,value:60},replyTo:{status:!1,value:""},fromName:{status:!1,value:""},attNormal:{status:!1},proxy:{status:!1},cids:[],subjectsIds:[],contentsIds:[],step:0,customers:[],choiceNum:0,sendCount:0,limitSetting:!1,skipNum:0,limitNum:10}),v=ae()(N,2),t=v[0],a=v[1],s=(0,B.useRequest)(ce.pm),o=s.data,D=(0,B.useRequest)(ce.Iy),F=D.data,re=function(){var h=t.channel,k=t.track,M=t.timeSleep,g=t.replyTo,me=t.fromName,$e=t.proxy,Ke=t.attNormal,xe={track:!1};return k.status&&(xe.track=!0),me.status&&(xe.fromName=me.value),h===1&&(xe.timeSleep=M.value),g.status&&g.value&&(xe.replyTo=g.value),$e.status&&(xe.proxy=!0),Ke.status&&(xe.attNormal=!0),xe},z=(0,B.useRequest)(Mn.jz,{manual:!0,onSuccess:function(h){var k=h.map(function(M){return M.mail_name?{label:"".concat(M.mail_addr,"(").concat(M.mail_name,")"),value:M.maid}:{label:"".concat(M.mail_addr),value:M.maid}});a({accountOptions:k})}}),ue=z.run,R=(0,B.useRequest)(Mn.DG,{manual:!0,onSuccess:function(h){if(h){var k=h.map(function(M){return{label:"".concat(M.name,"(").concat(M.fromName,")"),value:M._id}});a({senderOptions:k}),h.length&&V.setFieldsValue({senders:[h[0]._id]})}}}),X=R.run,_=(0,B.useRequest)(Mn.wA,{manual:!0,onSuccess:function(h){a({contentTreeData:h})}}),P=_.run,Ee=_.refresh,Xe=(0,B.useRequest)(Mn.Wp,{manual:!0,onSuccess:function(h){a({attachmentOptions:h})}}),an=Xe.run,qe=Xe.refresh,ke=(0,B.useRequest)(Ln.DI,{manual:!0,onSuccess:function(h){var k=h.count,M=h.customers,g=h.sendCount;a({choiceNum:k,customers:M,skipNum:0,limitNum:k,sendCount:g})}}),oe=ke.run,le=ke.loading,Ce=(0,B.useRequest)(Ln.Eg,{manual:!0,onSuccess:function(){a({step:3}),te.ZP.success("\u4EFB\u52A1\u521B\u5EFA\u6210\u529F!")}}),We=Ce.run,Fe=Ce.loading,dn=function(){var W=Y()(x()().mark(function h(k){var M,g,me,$e,Ke,xe,Ze,J,d;return x()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(M=t.choiceNum,g=t.sendAtOnce,me=t.timeStart,$e=t.mode,Ke=t.skipNum,xe=t.limitNum,Ze=t.replyTo,M){u.next=4;break}return te.ZP.warning("\u8BF7\u9009\u62E9\u6536\u4EF6\u4EBA!"),u.abrupt("return");case 4:if(!Ze.status){u.next=9;break}if(J=/\w[-\w.+]*@([-A-Za-z0-9]+\.)+[A-Za-z]{1,14}/,J.test(Ze.value)){u.next=9;break}return te.ZP.error("\u56DE\u4FE1\u90AE\u7BB1\u683C\u5F0F\u4E0D\u6B63\u786E!"),u.abrupt("return");case 9:if(!(Ze.status&&!Ze.value)){u.next=12;break}return te.ZP.error("\u8BF7\u8F93\u5165\u56DE\u4FE1\u90AE\u7BB1!"),u.abrupt("return");case 12:d=re(),We(y()(y()(y()({},k),d),{},{mode:$e,sendAtOnce:g,timeStart:me,filters:l,logic:A,keyword:f,selectAll:S,selectKeys:n,selectOption:b,selectSort:E,selectTotal:C,skipNum:Ke,limitNum:xe}));case 14:case"end":return u.stop()}},h)}));return function(k){return W.apply(this,arguments)}}(),pn=function(){var W=Y()(x()().mark(function h(){var k;return x()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.prev=0,g.next=3,V.validateFields();case 3:g.next=9;break;case 5:return g.prev=5,g.t0=g.catch(0),console.log("Failed:",g.t0),g.abrupt("return");case 9:if(k=t.choiceNum,k){g.next=13;break}return te.ZP.warning("\u8BF7\u9009\u62E9\u6536\u4EF6\u4EBA!"),g.abrupt("return");case 13:a({timeVisible:!0});case 14:case"end":return g.stop()}},h,null,[[0,5]])}));return function(){return W.apply(this,arguments)}}(),vn=(0,B.useRequest)(Ln.r8,{manual:!0,onSuccess:function(){te.ZP.success("\u4FDD\u5B58\u6210\u529F."),a({otherEditStatus:!1})}}),gn=vn.run,Se=function(){var W=Y()(x()().mark(function h(){var k,M,g,me,$e,Ke,xe;return x()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(k=t.track,M=t.timeSleep,g=t.replyTo,me=t.fromName,$e=t.proxy,Ke=t.attNormal,!(me.status&&!me.value)){J.next=4;break}return te.ZP.error("\u8BF7\u8F93\u5165\u53D1\u4FE1\u5462\u79F0!"),J.abrupt("return");case 4:if(!(me.status&&me.value.length>32)){J.next=7;break}return te.ZP.error("\u53D1\u4FE1\u5462\u79F0\u957F\u5EA6\u8D85\u8FC7\u9650\u5236"),J.abrupt("return");case 7:if(!g.status){J.next=12;break}if(xe=/\w[-\w.+]*@([-A-Za-z0-9]+\.)+[A-Za-z]{1,14}/,xe.test(g.value)){J.next=12;break}return te.ZP.error("\u56DE\u4FE1\u90AE\u7BB1\u683C\u5F0F\u4E0D\u6B63\u786E!"),J.abrupt("return");case 12:if(!(g.status&&!g.value)){J.next=15;break}return te.ZP.error("\u8BF7\u8F93\u5165\u56DE\u4FE1\u90AE\u7BB1!"),J.abrupt("return");case 15:gn({track:k,timeSleep:M,replyTo:g,fromName:me,proxy:$e,attNormal:Ke});case 16:case"end":return J.stop()}},h)}));return function(){return W.apply(this,arguments)}}(),Te=function(h,k){a(xr()({},h,k)),a({otherEditStatus:!0})},en=function(h){var k=t.replyTo;h||a({proxy:{status:h}}),a({replyTo:y()(y()({},k),{},{status:h})}),a({otherEditStatus:!0})},Cn=function(h){var k=t.replyTo;h&&a({replyTo:y()(y()({},k),{},{status:h})}),a({proxy:{status:h}}),a({otherEditStatus:!0})},bn=function(h){var k=t.attachmentOptions,M=0;if(!h)return 0;var g=function(Ke){var xe=h[Ke],Ze=k.findIndex(function(d){return d.value===xe}),J=k[Ze].size;M+=J};for(var me in h)g(me);return M},nn=function(){var h=t.mode,k=V.getFieldsValue(),M=k.exclude;oe({mode:h,exclude:M,keyword:f,filters:l,selectAll:S,selectKeys:n,selectOption:b,selectSort:E,selectTotal:C})},Dn=function(){var W=Y()(x()().mark(function h(){var k,M,g;return x()().wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:k=t.mode,M=V.getFieldsValue(),g=M.exclude,oe({mode:k,exclude:g,keyword:f,filters:l,selectAll:S,selectKeys:n,selectOption:b,selectSort:E,selectTotal:C});case 4:case"end":return $e.stop()}},h)}));return function(){return W.apply(this,arguments)}}(),nt=function(){var W=Y()(x()().mark(function h(k){var M,g,me;return x()().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:M=k.channel,g=k.attIds,M&&(a({channel:M}),V.setFieldsValue({senders:[]})),g&&(g&&g.length>5?(V.setFieldsValue({attIds:g.slice(0,5)}),te.ZP.error("\u9644\u4EF6\u6700\u591A\u4E3A5\u4E2A")):t.attNormal.status&&(me=bn(g),me>204800&&(V.setFieldsValue({attIds:g.slice(0,g.length-1)}),te.ZP.error("\u666E\u901A\u9644\u4EF6\u603B\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7200KB"))));case 3:case"end":return Ke.stop()}},h)}));return function(k){return W.apply(this,arguments)}}(),fn=function(h){var k=t.step;return k!==h},tt=(0,B.useRequest)(Ln.Oo,{manual:!0,onSuccess:function(h){h&&a(y()({},h))}}),Kn=tt.run,rt=function(){var h="\u7FA4\u53D1\u4EFB\u52A1.".concat((0,yt.vQ)());V.setFieldsValue({name:h,channel:2})};(0,de.useEffect)(function(){p&&(a({step:0}),V.resetFields(),rt(),nn(),Kn(),ue(),X(),P(),an())},[p]);var it=function(){var h=t.channel,k=t.track,M=t.timeSleep,g=t.replyTo,me=t.fromName,$e=t.proxy,Ke=t.attNormal,xe={xs:24,sm:24,md:24,lg:24,xl:24,style:{marginBottom:12,marginTop:12,paddingLeft:12}};return h===1?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(mn.Z,{children:[(0,e.jsxs)(Ue.Z,y()(y()({},xe),{},{children:[(0,e.jsxs)(Pe.Z,{children:[(0,e.jsx)(An.Z,{checked:k.status,onChange:function(J){return Te("track",{track:{status:J}})}}),(0,e.jsx)("label",{style:{fontWeight:500},children:"\u90AE\u4EF6\u8FFD\u8E2A(\u9605\u8BFB\u3001\u94FE\u63A5\u3001\u9644\u4EF6)"})]}),(0,e.jsx)("div",{style:{fontSize:12,color:"#999999",marginTop:6},children:"\u8FFD\u8E2A\u9605\u8BFB\u90AE\u4EF6\u3001\u70B9\u51FB\u90AE\u4EF6\u6B63\u6587\u94FE\u63A5\u3001\u4EE5\u53CA\u4E0B\u8F7D\u9644\u4EF6\u7684\u5BA2\u6237"})]})),(0,e.jsxs)(Ue.Z,y()(y()({},xe),{},{children:[(0,e.jsxs)(Pe.Z,{children:[(0,e.jsx)(An.Z,{checked:!0,disabled:!0}),(0,e.jsx)("label",{style:{fontWeight:500},children:"\u53D1\u4FE1\u901F\u5EA6\uFF1A"}),(0,e.jsx)(hn.Z,{min:G?6:60,max:9999,value:M.value,onChange:function(J){return Te("timeSleep",y()(y()({},M),{},{value:J}))}})]}),(0,e.jsx)("div",{style:{fontSize:12,color:"#999999",marginTop:6},children:"\u8BE5\u4EFB\u52A1\u5C06\u4EE5\u4F60\u8BBE\u7F6E\u7684\u901F\u5EA6\u8FDB\u884C\u53D1\u9001\uFF0C\u5355\u4F4D\uFF1A\u79D2/\u5C01"})]}))]}),(0,e.jsxs)(mn.Z,{style:{marginTop:12},children:[(0,e.jsxs)(Ue.Z,y()(y()({},xe),{},{children:[(0,e.jsxs)(Pe.Z,{children:[(0,e.jsx)(An.Z,{checked:g.status,onChange:function(J){return en(J)}}),(0,e.jsx)("label",{style:{fontWeight:500},children:"\u56DE\u4FE1\u90AE\u7BB1\uFF1A"}),(0,e.jsx)(H.Z,{value:g.value,onChange:function(J){return Te("replyTo",y()(y()({},g),{},{value:J.target.value,status:!0}))},hidden:!g.status})]}),(0,e.jsx)("div",{style:{fontSize:12,color:"#999999",marginTop:6},children:"\u5BA2\u6237\u90AE\u4EF6\u5C06\u56DE\u590D\u5230\u8FD9\u4E2A\u90AE\u7BB1\uFF0C\u8BF7\u52A1\u5FC5\u786E\u4FDD\u6B63\u786E."})]})),(0,e.jsxs)(Ue.Z,y()(y()({},xe),{},{children:[(0,e.jsxs)(Pe.Z,{children:[(0,e.jsx)(An.Z,{checked:me.status,onChange:function(J){return Te("fromName",y()(y()({},me),{},{status:J}))}}),(0,e.jsx)("label",{style:{fontWeight:500},children:"\u53D1\u4FE1\u5462\u79F0\uFF1A"}),(0,e.jsx)(H.Z,{value:me.value,onChange:function(J){return Te("fromName",y()(y()({},me),{},{value:J.target.value,status:!0}))},hidden:!me.status})]}),(0,e.jsx)("div",{style:{fontSize:12,color:"#999999",marginTop:6},children:"\u5BA2\u6237\u6536\u5230\u90AE\u4EF6\u540E\uFF0C\u5728\u53D1\u4FE1\u4EBA\u5904\u770B\u5230\u7684\u5462\u79F0"})]}))]}),(0,e.jsx)(mn.Z,{style:{marginTop:12},children:(0,e.jsxs)(Ue.Z,y()(y()({},xe),{},{children:[(0,e.jsxs)(Pe.Z,{children:[(0,e.jsx)("label",{style:{fontWeight:500},children:"\u9644\u4EF6\u7C7B\u578B"}),(0,e.jsxs)(ee.ZP.Group,{onChange:function(J){return Te("attNormal",{status:J.target.value})},value:Ke.status,children:[(0,e.jsx)(ee.ZP,{value:!1,children:"\u6B63\u6587\u9644\u4EF6"}),(0,e.jsx)(ee.ZP,{value:!0,children:"\u666E\u901A\u9644\u4EF6"})]})]}),(0,e.jsx)("div",{style:{fontSize:12,color:"#999999",marginTop:6},children:"\u6B63\u6587\u9644\u4EF6\u5E26\u5728\u90AE\u4EF6\u6B63\u6587\u672B\u5C3E\uFF0C\u53EF\u7EDF\u8BA1\u9644\u4EF6\u4E0B\u8F7D\u6570\u636E\uFF0C\u666E\u901A\u9644\u4EF6\u4E0D\u53EF\u7EDF\u8BA1"})]}))}),(0,e.jsx)($.Z,{title:"\u4FDD\u5B58\u540E\u4E0B\u6B21\u4F1A\u81EA\u52A8\u52A0\u8F7D\u8BBE\u7F6E",children:(0,e.jsx)(ie.ZP,{type:"primary",size:"small",onClick:function(){return Se()},disabled:!t.otherEditStatus,style:{marginTop:24,marginLeft:12},children:"\u8BBE\u4E3A\u9ED8\u8BA4"})})]}):h===2?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(mn.Z,{children:[(0,e.jsxs)(Ue.Z,y()(y()({},xe),{},{children:[(0,e.jsxs)(Pe.Z,{children:[(0,e.jsx)(An.Z,{checked:k.status,onChange:function(J){return Te("track",{status:J})}}),(0,e.jsx)("label",{style:{fontWeight:500},children:"\u90AE\u4EF6\u8FFD\u8E2A(\u9605\u8BFB\u3001\u94FE\u63A5\u3001\u9644\u4EF6)"})]}),(0,e.jsx)("div",{style:{fontSize:12,color:"#999999",marginTop:6},children:"\u8FFD\u8E2A\u9605\u8BFB\u90AE\u4EF6\u3001\u70B9\u51FB\u90AE\u4EF6\u6B63\u6587\u94FE\u63A5\u3001\u4EE5\u53CA\u4E0B\u8F7D\u9644\u4EF6\u7684\u5BA2\u6237"})]})),(0,e.jsxs)(Ue.Z,y()(y()({},xe),{},{children:[(0,e.jsxs)(Pe.Z,{children:[(0,e.jsx)(An.Z,{checked:me.status,onChange:function(J){return Te("fromName",y()(y()({},me),{},{status:J}))}}),(0,e.jsx)("label",{style:{fontWeight:500},children:"\u53D1\u4FE1\u5462\u79F0\uFF1A"}),(0,e.jsx)(H.Z,{value:me.value,onChange:function(J){return Te("fromName",y()(y()({},me),{},{value:J.target.value,status:!0}))},hidden:!me.status})]}),(0,e.jsx)("div",{style:{fontSize:12,color:"#999999",marginTop:6},children:"\u5BA2\u6237\u6536\u5230\u90AE\u4EF6\u540E\uFF0C\u5728\u53D1\u4FE1\u4EBA\u5904\u770B\u5230\u7684\u5462\u79F0"})]}))]}),(0,e.jsxs)(mn.Z,{style:{marginTop:12},children:[(0,e.jsxs)(Ue.Z,y()(y()({},xe),{},{children:[(0,e.jsxs)(Pe.Z,{children:[(0,e.jsx)(An.Z,{checked:g.status,onChange:function(J){return en(J)}}),(0,e.jsx)("label",{style:{fontWeight:500},children:"\u56DE\u4FE1\u90AE\u7BB1\uFF1A"}),(0,e.jsx)(H.Z,{value:g.value,onChange:function(J){return Te("replyTo",y()(y()({},g),{},{value:J.target.value,status:!0}))},hidden:!g.status})]}),(0,e.jsx)("div",{style:{fontSize:12,color:"#999999",marginTop:6},children:"\u5BA2\u6237\u90AE\u4EF6\u5C06\u56DE\u590D\u5230\u8FD9\u4E2A\u90AE\u7BB1\uFF0C\u8BF7\u52A1\u5FC5\u786E\u4FDD\u6B63\u786E."})]})),(0,e.jsxs)(Ue.Z,y()(y()({},xe),{},{children:[(0,e.jsxs)(Pe.Z,{children:[(0,e.jsx)(An.Z,{checked:$e.status,onChange:function(J){return Cn(J)}}),(0,e.jsx)("label",{style:{fontWeight:500},children:"\u4EE3\u53D1\u6A21\u5F0F"})]}),(0,e.jsx)("div",{style:{fontSize:12,color:"#999999",marginTop:6},children:"\u53D1\u4EF6\u4EBA\u663E\u793A\u56DE\u4FE1\u90AE\u7BB1\u5730\u5740"})]}))]}),(0,e.jsx)(mn.Z,{style:{marginTop:12},children:(0,e.jsxs)(Ue.Z,y()(y()({},xe),{},{children:[(0,e.jsxs)(Pe.Z,{children:[(0,e.jsx)("label",{style:{fontWeight:500},children:"\u9644\u4EF6\u7C7B\u578B"}),(0,e.jsxs)(ee.ZP.Group,{onChange:function(J){return Te("attNormal",{status:J.target.value})},value:Ke.status,children:[(0,e.jsx)(ee.ZP,{value:!1,children:"\u6B63\u6587\u9644\u4EF6"}),(0,e.jsx)(ee.ZP,{value:!0,children:"\u666E\u901A\u9644\u4EF6"})]})]}),(0,e.jsx)("div",{style:{fontSize:12,color:"#999999",marginTop:6},children:"\u6B63\u6587\u9644\u4EF6\u5E26\u5728\u90AE\u4EF6\u6B63\u6587\u672B\u5C3E\uFF0C\u53EF\u7EDF\u8BA1\u9644\u4EF6\u4E0B\u8F7D\u6570\u636E\uFF0C\u666E\u901A\u9644\u4EF6\u4E0D\u53EF\u7EDF\u8BA1"})]}))}),(0,e.jsx)($.Z,{title:"\u4FDD\u5B58\u540E\u4E0B\u6B21\u4F1A\u81EA\u52A8\u52A0\u8F7D\u8BBE\u7F6E",children:(0,e.jsx)(ie.ZP,{type:"primary",size:"small",onClick:function(){return Se()},disabled:!t.otherEditStatus,style:{marginTop:24,marginLeft:12},children:"\u8BBE\u4E3A\u9ED8\u8BA4"})})]}):(0,e.jsx)(e.Fragment,{})},ut=function(){return(0,e.jsxs)(q.Z,{layout:"vertical",size:"large",form:V,onValuesChange:nt,onFinish:dn,children:[(0,e.jsxs)(q.Z.Item,{hidden:fn(0),label:(0,e.jsxs)("span",{children:["\u5DF2\u9009\u4E2D\u8054\u7CFB\u4EBA\u6570\u91CF: ",le?(0,e.jsx)(Sn.Z,{}):(0,e.jsx)("a",{children:t.choiceNum})," ",t.limitSetting?null:(0,e.jsx)("a",{onClick:function(){return a({limitSetting:!0})},style:{marginLeft:24,fontSize:16},children:"\u6570\u91CF\u81EA\u5B9A\u4E49"})]}),children:[t.customers.map(function(h){return(0,e.jsx)(jn.Z,{children:h.email},h.cid)}),t.choiceNum>10?(0,e.jsx)("span",{children:"......"}):null,t.limitSetting?(0,e.jsx)("div",{style:{marginTop:24},children:(0,e.jsxs)(Pe.Z,{size:"small",children:[(0,e.jsxs)("span",{children:[(0,e.jsx)("label",{style:{fontWeight:500,fontSize:16},children:"\u8DF3\u8FC7\u6570\u91CF\uFF1A"}),(0,e.jsx)(hn.Z,{min:0,max:t.choiceNum,value:t.skipNum,onChange:function(k){return a({skipNum:k})},style:{width:120}})]}),(0,e.jsxs)("span",{style:{marginLeft:24},children:[(0,e.jsx)("label",{style:{fontWeight:500,fontSize:16},children:"\u6700\u5927\u53D1\u9001\u6570\u91CF\uFF1A"}),(0,e.jsx)(hn.Z,{min:1,max:t.choiceNum,value:t.limitNum,onChange:function(k){return a({limitNum:k})},style:{width:120}})]})]})}):null]}),(0,e.jsx)(q.Z.Item,{name:"name",label:"\u4EFB\u52A1\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8BBE\u7F6E\u4EFB\u52A1\u540D\u79F0"}],hidden:fn(0),children:(0,e.jsx)(H.Z,{placeholder:"\u5982\uFF1A\u4EFB\u52A11.0"})}),(0,e.jsx)(q.Z.Item,{name:"channel",label:"\u53D1\u4FE1\u6E20\u9053",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u53D1\u9001\u6E20\u9053"}],hidden:fn(1),tooltip:"\u9009\u62E9\u90AE\u4EF6\u53D1\u9001\u7684\u65B9\u5F0F\uFF0C\u4F18\u8D28\u53D1\u9001\u901A\u9053\u4E3A\u6765\u53D1\u4FE1\u5E73\u53F0\u4EE3\u53D1\u65B9\u5F0F\uFF0C\u6211\u7684\u90AE\u7BB1\u5219\u7528\u6237\u9700\u8981\u6DFB\u52A0\u81EA\u5DF1\u7684\u90AE\u7BB1",children:(0,e.jsxs)(ee.ZP.Group,{children:[(0,e.jsx)(ee.ZP,{value:2,children:"\u4F18\u8D28\u53D1\u9001\u901A\u9053"}),(0,e.jsx)(ee.ZP,{value:1,children:"\u6211\u7684\u90AE\u7BB1"})]})}),t.channel===1?(0,e.jsx)(q.Z.Item,{name:"senders",label:"\u53D1\u4EF6\u90AE\u7BB1(\u53EF\u591A\u9009)",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u53D1\u4EF6\u90AE\u7BB1"}],hidden:fn(1),tooltip:"\u591A\u9009\u65F6\u53D1\u9001\u90AE\u4EF6\u90FD\u4F1A\u968F\u673A\u9009\u62E9",children:(0,e.jsx)(Ve.Z,{mode:"multiple",placeholder:"\u8BF7\u9009\u62E9\u53D1\u4EF6\u90AE\u7BB1\uFF0C\u9009\u4E2D\u591A\u4E2A\u5219\u6BCF\u6B21\u53D1\u9001\u90AE\u4EF6\u90FD\u4F1A\u968F\u673A\u9009\u62E9",disabled:t.preview,optionFilterProp:"label",options:t.accountOptions,showArrow:!0,dropdownRender:function(k){return(0,e.jsxs)("div",{children:[k,(0,e.jsx)(Ye.Z,{style:{margin:"4px 0"}}),(0,e.jsx)("div",{style:{display:"flex",flexWrap:"nowrap",padding:0},children:(0,e.jsxs)("a",{style:{flex:"none",padding:"8px",display:"block",cursor:"pointer"},onClick:function(){return a({accountVisible:!0})},children:[(0,e.jsx)(be.Z,{})," \u6DFB\u52A0\u6211\u7684\u90AE\u7BB1"]})})]})}})}):(0,e.jsx)(q.Z.Item,{name:"senders",label:"\u53D1\u4EF6\u8D26\u53F7(\u53EF\u591A\u9009)",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u53D1\u4EF6\u8D26\u53F7"}],hidden:fn(1),tooltip:"\u591A\u9009\u65F6\u53D1\u9001\u90AE\u4EF6\u90FD\u4F1A\u968F\u673A\u9009\u62E9",children:(0,e.jsx)(Ve.Z,{mode:"multiple",placeholder:"\u8BF7\u9009\u62E9\u53D1\u4EF6\u8D26\u53F7\uFF0C\u9009\u4E2D\u591A\u4E2A\u5219\u6BCF\u6B21\u53D1\u9001\u90AE\u4EF6\u90FD\u4F1A\u968F\u673A\u9009\u62E9",optionFilterProp:"label",options:t.senderOptions,showArrow:!0,dropdownRender:function(k){return(0,e.jsxs)("div",{children:[k,(0,e.jsx)(Ye.Z,{style:{margin:"4px 0"}}),(0,e.jsx)("div",{style:{display:"flex",flexWrap:"nowrap",padding:0},children:(0,e.jsxs)("a",{style:{flex:"none",padding:"8px",display:"block",cursor:"pointer"},onClick:function(){return a({senderVisible:!0})},children:[(0,e.jsx)(be.Z,{})," \u6DFB\u52A0\u7CFB\u7EDF\u8D26\u53F7"]})})]})}})}),(0,e.jsx)(q.Z.Item,{name:"exclude",label:"\u6392\u9664\u5BF9\u8C61",hidden:fn(0),tooltip:"\u6392\u9664\u7684\u5BF9\u8C61\u5C06\u4E0D\u518D\u53D1\u9001",children:(0,e.jsx)(kn.Z,{treeCheckable:!0,showSearch:!0,placeholder:"\u9009\u4E2D\u7684\u5BF9\u8C61\u4E0D\u53D1\u9001",onBlur:Dn,onClear:Dn,onDeselect:Dn,treeNodeFilterProp:"title",treeDefaultExpandAll:!0,filterTreeNode:function(k,M){var g;return(g=M.title)===null||g===void 0?void 0:g.toLowerCase().includes(k==null?void 0:k.toLowerCase())},treeData:[{value:"view",key:"view",title:"\u8054\u7CFB\u4EBA\u89C6\u56FE",disabled:!0,children:o},{value:"tags",key:"tags",title:"\u8054\u7CFB\u4EBA\u6807\u7B7E",disabled:!0,children:F}]})}),(0,e.jsx)(q.Z.Item,{name:"contentsIds",label:"\u90AE\u4EF6\u6A21\u677F(\u53EF\u591A\u9009)",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u90AE\u4EF6\u6A21\u677F"}],tooltip:"\u591A\u9009\u65F6\u6BCF\u4E2A\u8054\u7CFB\u4EBA\u968F\u673A\u9009\u62E9\u6A21\u677F",hidden:fn(0),children:(0,e.jsx)(kn.Z,{treeData:t.contentTreeData,placeholder:"\u8BF7\u9009\u62E9\u90AE\u4EF6\u6A21\u677F\uFF0C\u9009\u4E2D\u591A\u4E2A\u6A21\u677F\u5219\u6BCF\u6B21\u53D1\u9001\u90AE\u4EF6\u968F\u673A\u9009\u53D6",treeCheckable:!0,showCheckedStrategy:kn.Z.SHOW_CHILD,treeDefaultExpandedKeys:["mine","team"],treeNodeFilterProp:"title",showArrow:!0,allowClear:!0,dropdownRender:function(k){return(0,e.jsxs)("div",{children:[k,(0,e.jsx)(Ye.Z,{style:{margin:"4px 0"}}),(0,e.jsxs)("div",{style:{display:"flex",flexWrap:"nowrap",padding:0},children:[(0,e.jsxs)("a",{style:{flex:"none",padding:"8px",display:"block",cursor:"pointer",marginRight:192},onClick:function(){return a({contentVisible:!0})},children:[(0,e.jsx)(be.Z,{})," \u6DFB\u52A0\u90AE\u4EF6\u6A21\u677F"]}),(0,e.jsxs)("a",{style:{flex:"none",padding:"8px",display:"block",cursor:"pointer",textAlign:"right"},onClick:function(){return B.history.push("/settings/templets")},children:[(0,e.jsx)(jr.Z,{})," \u7BA1\u7406\u90AE\u4EF6\u6A21\u677F"]})]})]})}})}),(0,e.jsx)(q.Z.Item,{name:"attIds",label:"\u9644\u4EF6",hidden:fn(0),children:(0,e.jsx)(Ve.Z,{mode:"multiple",placeholder:"\u8BF7\u9009\u62E9\u9644\u4EF6(\u53EF\u9009)",optionFilterProp:"label",options:t.attachmentOptions,showArrow:!0,allowClear:!0,dropdownRender:function(k){return(0,e.jsxs)("div",{children:[k,(0,e.jsx)(Ye.Z,{style:{margin:"4px 0"}}),(0,e.jsx)("div",{style:{display:"flex",flexWrap:"nowrap",padding:"8px"},children:(0,e.jsxs)("a",{style:{flex:"none",display:"block",cursor:"pointer"},onClick:function(){return a({attachmentVisible:!0})},children:[(0,e.jsx)(be.Z,{})," \u6DFB\u52A0\u9644\u4EF6"]})})]})}})}),(0,e.jsx)(q.Z.Item,{hidden:fn(2),children:it()})]})},Un=function(){var W=Y()(x()().mark(function h(){return x()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:a({sendAtOnce:!0}),V.submit();case 2:case"end":return M.stop()}},h)}));return function(){return W.apply(this,arguments)}}(),at=function(h){a({timeStart:h,sendAtOnce:!1,timeVisible:!1}),V.submit()},$n=function(){var W=Y()(x()().mark(function h(k){return x()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(V){g.next=2;break}return g.abrupt("return");case 2:return V.submit(),g.prev=3,g.next=6,V.validateFields();case 6:a({step:k+1}),g.next=12;break;case 9:g.prev=9,g.t0=g.catch(3),console.log("Failed:",g.t0);case 12:case"end":return g.stop()}},h,null,[[3,9]])}));return function(k){return W.apply(this,arguments)}}(),Gn=function(){var W=Y()(x()().mark(function h(k){return x()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(k!==0){g.next=2;break}return g.abrupt("return");case 2:if(V){g.next=4;break}return g.abrupt("return");case 4:return V.submit(),g.prev=5,g.next=8,V.validateFields();case 8:a({step:k-1}),g.next=14;break;case 11:g.prev=11,g.t0=g.catch(5),console.log("Failed:",g.t0);case 14:case"end":return g.stop()}},h,null,[[5,11]])}));return function(k){return W.apply(this,arguments)}}(),lt=function(){var h=t.customers,k=h.map(function(g){return g.cid});if(!k.length){te.ZP.warning("\u8BF7\u9009\u62E9\u53D1\u9001\u5BF9\u8C61!!!");return}var M=V.getFieldValue("contentsIds");if(!M||!M.length){te.ZP.warning("\u8BF7\u9009\u62E9\u53D1\u9001\u6A21\u677F!!!");return}a({previewVisible:!0,cids:k,contentsIds:M})},Yn=function(){return(0,e.jsxs)(ie.ZP,{size:"large",onClick:lt,children:[(0,e.jsx)(Er.Z,{}),"\u90AE\u4EF6\u9884\u89C8"]})},st=function(){var h=t.step;return h===0?(0,e.jsx)("div",{style:{textAlign:"center"},children:(0,e.jsxs)(Pe.Z,{size:"large",children:[(0,e.jsxs)(ie.ZP,{size:"large",disabled:!0,children:[(0,e.jsx)(et.Z,{})," \u4E0A\u4E00\u6B65"]}),Yn(),(0,e.jsxs)(ie.ZP,{type:"primary",size:"large",onClick:function(){return $n(0)},children:["\u4E0B\u4E00\u6B65 ",(0,e.jsx)(xt.Z,{})]})]})}):h===1?(0,e.jsx)("div",{style:{textAlign:"center"},children:(0,e.jsxs)(Pe.Z,{size:"large",children:[(0,e.jsxs)(ie.ZP,{size:"large",onClick:function(){return Gn(1)},children:[(0,e.jsx)(et.Z,{})," \u4E0A\u4E00\u6B65"]}),Yn(),(0,e.jsxs)(ie.ZP,{type:"primary",size:"large",onClick:function(){return $n(1)},children:["\u4E0B\u4E00\u6B65 ",(0,e.jsx)(xt.Z,{})]})]})}):h===2?(0,e.jsx)("div",{style:{textAlign:"center"},children:(0,e.jsxs)(Pe.Z,{size:"large",children:[(0,e.jsxs)(ie.ZP,{size:"large",onClick:function(){return Gn(2)},children:[(0,e.jsx)(et.Z,{})," \u4E0A\u4E00\u6B65"]}),(0,e.jsxs)(ie.ZP,{type:"primary",size:"large",onClick:Un,loading:Fe,children:[(0,e.jsx)(Fr.Z,{rotate:-45}),"\u53D1\u9001"]}),(0,e.jsxs)(ie.ZP,{size:"large",onClick:pn,loading:Fe,children:[(0,e.jsx)(Ar.Z,{}),"\u5B9A\u65F6"]})]})}):null},ot=function(h){var k=t.step;h>=k||a({step:h})};return(0,e.jsxs)(zn.Z,{destroyOnClose:!0,width:720,title:"\u6279\u91CF\u53D1\u9001\u90AE\u4EF6",placement:"right",open:p,onClose:function(){return Z()},footer:st(),maskClosable:!1,children:[(0,e.jsx)(yr.Z,{current:t.step,onChange:ot,items:[{title:"\u53D1\u9001\u8BBE\u7F6E"},{title:"\u8D26\u53F7\u9009\u62E9"},{title:"\u5176\u4ED6\u8BBE\u7F6E"},{title:"\u5B8C\u6210"}]}),(0,e.jsx)(Ye.Z,{}),t.step<3?ut():(0,e.jsx)(wr.ZP,{status:"success",title:"\u53D1\u9001\u90AE\u4EF6\u4EFB\u52A1\u63D0\u4EA4\u6210\u529F",subTitle:"\u4EFB\u52A1\u5BA1\u6838\u6210\u529F\u540E\u5C06\u5728\u540E\u53F0\u81EA\u52A8\u53D1\u9001\u3002",extra:[(0,e.jsx)(ie.ZP,{type:"primary",onClick:function(){return a({step:0})},children:"\u7EE7\u7EED\u53D1\u9001"},"send"),(0,e.jsx)(ie.ZP,{onClick:function(){return B.history.push("/marketing/tasks")},children:"\u67E5\u770B\u4EFB\u52A1"},"showTask")]}),t.sendCount<t.choiceNum?(0,e.jsx)(Zn.Z,{message:"\u7FA4\u53D1\u989D\u5EA6\u4E0D\u8DB3",showIcon:!0,description:"\u7FA4\u53D1\u989D\u5EA6\u4E0D\u8DB3\uFF0C\u8BF7\u8D2D\u4E70\u540E\u518D\u64CD\u4F5C",type:"error",action:(0,e.jsx)("a",{onClick:function(){return B.history.push("/expenses/purchase?type=sendCount")},children:"\u8D2D\u4E70"})}):null,(0,e.jsx)(br.Z,{visible:t.accountVisible,actionReload:ue,onCancel:function(){return a({accountVisible:!1})}}),(0,e.jsx)(Dr.Z,{visible:t.senderVisible,actionReload:X,onCancel:function(){return a({senderVisible:!1})},current:!1}),(0,e.jsx)(kr.Z,{visible:t.timeVisible,onCancel:function(){return a({timeVisible:!1})},sendAction:function(h){return at(h)}}),(0,e.jsx)(Zr.Z,{visible:t.contentVisible,actionReload:function(){return Ee()},onCancel:function(){return a({contentVisible:!1})},current:!1,folderItems:null,action:"add"}),(0,e.jsx)(Br.Z,{visible:t.attachmentVisible,onCancel:function(){return a({attachmentVisible:!1})},current:!1,actionReload:function(){return qe()}}),(0,e.jsx)(Sr.Z,{visible:t.previewVisible,onCancel:function(){return a({previewVisible:!1})},taskValues:{cids:t.cids,contentsIds:t.contentsIds}})]})},Vr=Tr,wt=r(66694),Rr=function(c){var p=c.visible,Z=c.onCancel,j=c.multiUpdate,S=c.rowCount,n=c.loading,l=q.Z.useForm(),A=ae()(l,1),f=A[0],b=(0,B.useRequest)(wt.JN,{manual:!0}),E=b.data,C=b.run,O=function(){var G=Y()(x()().mark(function T(){var ne,V;return x()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.prev=0,v.next=3,f.validateFields();case 3:ne=v.sent,V=ne.userid,V==="null"&&(V=null),j({changeField:"userid",changeType:"renew",changeValue:V}),Z(),v.next=13;break;case 10:v.prev=10,v.t0=v.catch(0),console.log("Failed:",v.t0);case 13:case"end":return v.stop()}},T,null,[[0,10]])}));return function(){return G.apply(this,arguments)}}(),I=function(){return(0,e.jsxs)("div",{children:["\u5206\u914D\u5F52\u5C5E (\u5DF2\u9009\u62E9",(0,e.jsx)("a",{children:S}),"\u4E2A\u8054\u7CFB\u4EBA)"]})};return(0,de.useEffect)(function(){p&&C()},[p]),(0,e.jsx)(ye.Z,{title:I(),width:450,bodyStyle:{padding:"28px 28px"},destroyOnClose:!0,open:p,onCancel:Z,okText:"\u63D0\u4EA4",onOk:O,confirmLoading:n,children:(0,e.jsx)("div",{children:(0,e.jsx)(q.Z,{layout:"vertical",form:f,size:"large",initialValues:{userid:"null"},children:(0,e.jsx)(q.Z.Item,{label:"\u8054\u7CFB\u4EBA\u5F52\u5C5E",name:"userid",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u8054\u7CFB\u4EBA\u5F52\u5C5E"}],children:(0,e.jsxs)(Ve.Z,{style:{width:"100%"},optionLabelProp:"label",showSearch:!0,optionFilterProp:"label",children:[(0,e.jsx)(Ve.Z.Option,{value:"null",label:"\u4E0D\u8BBE\u7F6E\u5F52\u5C5E",children:(0,e.jsx)("div",{children:"\u4E0D\u8BBE\u7F6E\u5F52\u5C5E"})},"null"),E==null?void 0:E.map(function(G){var T=G.nickname,ne=G.userid,V=G.email;return(0,e.jsx)(Ve.Z.Option,{value:ne,label:"".concat(T," (").concat(V,")"),children:(0,e.jsxs)("div",{children:[T," (",V,")"]})},ne)})]})})})})})},Ir=Rr,Pr=r(65699),Or=r(84875),Nr=r.n(Or),zr=r(33131),jt=r(10584),_r=["onResize","width"],Lr=Le.Z.useToken,Mr=function(c){var p=c.onResize,Z=c.width,j=Dt()(c,_r),S=(0,de.useState)(0),n=ae()(S,2),l=n[0],A=n[1];return Z?(0,e.jsx)(Pr.Resizable,{width:Z+l,height:0,handle:(0,e.jsx)("span",{className:Nr()(["react-resizable-handle",l&&"active"]),style:{transform:"translateX(".concat(l,"px)")},onClick:function(b){b.stopPropagation(),b.preventDefault()}}),onResize:function(b,E){var C=E.size;C.width>=600?A(600-Z):A(C.width-Z)},onResizeStop:function(){A(0),p.apply(void 0,arguments)},draggableOpts:{enableUserSelectHack:!1},children:(0,e.jsx)("th",y()({},j))}):(0,e.jsx)("th",y()({},j))},Wr=function(c){var p=c.viewId,Z=c.createReload,j=(0,ve.Z)({viewOwner:"",current:1,pageSize:10,total:10,contactsData:[],tagsTreeData:[],tagsItem:{},logic:"and",filters:[],keyword:"",ownerValue:[],tagsValue:[],statusValue:[],filterVisible:!1,contactCreateVisible:!1,contactPreviewVisible:!1,currentRecord:{},tblSelectKeys:[],selectAll:!1,selectLimit:200,selectOption:"",selectTotal:0,multiChangeVisible:!1,multiDeleteVisible:!1,multiTagsVisible:!1,multiTagsAction:"push",exportVisible:!1,columnsData:[],fieldSettingVisible:!1,sendMailsVisible:!1,sort:{create_time:-1},massVisible:!1,assignVisible:!1,viewConfig:{},scrollY:600,searchVisible:!1,viewSaveVisible:!1,tagName:"",verifingCount:0,unVerifyCount:0}),S=ae()(j,2),n=S[0],l=S[1],A=Lr(),f=A.token,b=(0,B.useRequest)(wt.JN,{onSuccess:function(i){if(!!i){l({owners:i});var u=[];for(var m in i){var w=i[m],L=w.nickname,Q=w.userid;u.push({title:L,value:Q,key:Q})}l({userTreeData:u})}}}),E=b.data,C=(0,de.useState)([]),O=ae()(C,2),I=O[0],G=O[1],T={header:{cell:Mr}},ne=(0,B.useRequest)(wn.UL,{manual:!0,debounceInterval:500}),V=ne.run,N=function(){var d=Y()(x()().mark(function i(u,m){var w,L;return x()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:w=u.belongTo,L=u.dataIndex,V({belongTo:w,saveType:"show",dataIndex:L,config:{width:m}});case 2:case"end":return U.stop()}},i)}));return function(u,m){return d.apply(this,arguments)}}(),v=function(i){return function(u,m){var w=m.size;G(function(L){var Q=Ae()(L);return Q[i]=y()(y()({},Q[i]),{},{width:w.width}),N(Q[i],w.width),Q})}},t=(0,B.useRequest)(wn.zN,{manual:!0,onSuccess:function(i){if(!!i){var u=32,m=function(U){var ge=i[U],Re=ge.width,fe=ge.dataIndex;u+=Re,i[U].onHeaderCell=function(Je){return{width:Je.width,onResize:v(U)}},i[U].sorter=function(Je,He){return Je[fe]-He[fe]}};for(var w in i)m(w);var L=window.innerWidth-64;L>u&&i.push({width:L-u}),G(i)}}}),a=t.data,s=t.run,o=(0,B.useRequest)(ce.i9,{manual:!0,onSuccess:function(){te.ZP.success("\u4FDD\u5B58\u6210\u529F")}}),D=o.run,F=o.loading,re=(0,B.useRequest)(ce.vs,{manual:!0,onSuccess:function(i){if(!!i){var u=(0,Ct.J)(i);l({tagsTreeData:u})}}}),z=re.run,ue=function(i){var u=[],m=function(Q){var U=i[Q],ge={cid:U.cid};for(var Re in a){var fe=a[Re].dataIndex;if(fe==="tags"&&l({tagsItem:a[Re]}),fe==="name"){var Je=(0,yt.vs)(U);ge[fe]=(0,e.jsxs)("div",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[(0,e.jsx)(ie.ZP,{size:"small",className:"preview-profile-button",onClick:function(){return l({contactPreviewVisible:!0,currentRecord:U})},children:"\u9884\u89C8"}),(0,e.jsx)("span",{children:Je})]})}else ge[fe]=(0,e.jsx)(zt,{dataIndex:fe,values:U,field:a[Re]})}u.push(ge)};for(var w in i)m(w);return u},R=(0,B.useRequest)(ce.T$,{manual:!0,onSuccess:function(i){if(!!i){var u=i.list,m=i.current,w=i.total,L=i.pageSize,Q=i.unVerifyCount,U=i.verifingCount,ge=ue(u);l({contactsData:ge,current:m,total:w,pageSize:L,unVerifyCount:Q,verifingCount:U})}}}),X=R.run,_=R.loading,P=R.refresh,Ee=function(i){var u=i.findIndex(function(L){return L.property==="tags"&&L.operator==="include"});u>=0?l({tagsValue:i[u].values}):l({tagsValue:[]});var m=i.findIndex(function(L){return L.property==="verify_status"&&L.operator==="include"});m>=0?l({statusValue:i[m].values}):l({statusValue:[]});var w=i.findIndex(function(L){return L.property==="userid"&&L.operator==="include"});w>=0?l({ownerValue:i[w].values}):l({ownerValue:[]})},Xe=(0,B.useRequest)(ce.Wy,{manual:!0,onSuccess:function(i){if(!!i){var u=i.filters,m=i.viewOwner,w=i.logic;l({filters:u,logic:w,current:1,pageSize:10,viewOwner:m,viewConfig:i,viewSaveVisible:!1}),X({viewId:p,current:1,pageSize:10,filters:u,logic:w}),Ee(u)}}}),an=Xe.run,qe=function(){var d=Y()(x()().mark(function i(){var u,m,w,L,Q,U,ge;return x()().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return u=n.current,m=n.pageSize,w=n.filters,L=n.keyword,Q=n.sort,U=n.logic,u!==1&&l({current:1}),ge=L?L.trim():"",fe.next=5,X({viewId:p,current:1,pageSize:m,filters:w,keyword:ge,sort:Q,logic:U});case 5:case"end":return fe.stop()}},i)}));return function(){return d.apply(this,arguments)}}(),ke=function(){var d=Y()(x()().mark(function i(){var u,m,w,L,Q,U,ge;return x()().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return u=n.current,m=n.pageSize,w=n.filters,L=n.keyword,Q=n.sort,U=n.logic,ge=L?L.trim():"",fe.next=4,X({viewId:p,current:u,pageSize:m,filters:w,keyword:ge,sort:Q,logic:U});case 4:case"end":return fe.stop()}},i)}));return function(){return d.apply(this,arguments)}}();function oe(){return le.apply(this,arguments)}function le(){return le=Y()(x()().mark(function d(){return x()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,s();case 2:return u.next=4,an({viewId:p});case 4:case"end":return u.stop()}},d)})),le.apply(this,arguments)}(0,de.useEffect)(function(){z(),oe()},[p]);var Ce=function(){var d=Y()(x()().mark(function i(u){var m,w;return x()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:l({tagsValue:u}),m=n.filters,w=m.findIndex(function(U){return U.property==="tags"&&U.operator==="include"}),!u||!u.length?m.splice(w,1):w>=0?m[w]={property:"tags",operator:"include",values:u}:m.push({property:"tags",operator:"include",values:u}),l({filters:m,tblSelectKeys:[],selectAll:!1,viewSaveVisible:!0}),qe();case 6:case"end":return Q.stop()}},i)}));return function(u){return d.apply(this,arguments)}}(),We=function(){var d=Y()(x()().mark(function i(u){var m,w;return x()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:l({ownerValue:u}),m=n.filters,w=m.findIndex(function(U){return U.property==="userid"&&U.operator==="include"}),!u||!u.length?m.splice(w,1):w>=0?m[w]={property:"userid",operator:"include",values:u}:m.push({property:"userid",operator:"include",values:u}),l({filters:m,tblSelectKeys:[],selectAll:!1,viewSaveVisible:!0}),qe();case 6:case"end":return Q.stop()}},i)}));return function(u){return d.apply(this,arguments)}}(),Fe=function(i,u,m){var w=n.filters;m==="add"?w.push(i):m==="update"?u>=0?w[u]=i:w.push(i):w.splice(u,1),l({filters:w,viewSaveVisible:!0}),Ee(w),qe()},dn=function(i){l({logic:i});var u=n.pageSize,m=n.filters,w=n.keyword,L=n.sort,Q=w?w.trim():"";X({viewId:p,current:1,pageSize:u,filters:m,keyword:Q,sort:L,logic:i})},pn=function(){var i=n.filters,u=n.logic;D({viewId:p,filters:i,logic:u}),l({viewSaveVisible:!1})},vn=function(){var i=!1;return n.viewOwner&&(i=!0),i?(0,e.jsxs)("div",{style:{width:300},children:[(0,e.jsx)("h3",{children:"\u53EF\u7F16\u8F91\u89C6\u56FE"}),(0,e.jsx)("div",{children:"\u6B64\u89C6\u56FE\u7531\u60A8\u521B\u5EFA\u3002\u60A8\u53EF\u4EE5\u5C06\u7B5B\u9009\u6761\u4EF6\u4FDD\u5B58\u5230\u6B64\u89C6\u56FE\u3002"}),(0,e.jsxs)("div",{style:{marginTop:12,marginBottom:12},children:[(0,e.jsx)(ie.ZP,{onClick:pn,loading:F,style:{backgroundColor:"lightgrey"},children:"\u4FDD\u5B58"}),(0,e.jsx)(ie.ZP,{style:{marginLeft:24},onClick:function(){return an({viewId:p})},children:"\u91CD\u7F6E"})]}),(0,e.jsx)("a",{style:{textDecoration:"underline",marginBottom:12},onClick:function(){return l({viewCreateVisible:!0})},children:"\u53E6\u5B58\u4E3A\u65B0\u89C6\u56FE"})]}):(0,e.jsxs)("div",{style:{width:300},children:[(0,e.jsx)("h3",{children:"\u53EA\u8BFB\u89C6\u56FE"}),(0,e.jsx)("div",{children:"\u8FD9\u662F\u4E00\u4E2A\u7CFB\u7EDF\u6807\u51C6\u89C6\u56FE\u6216\u7531\u5176\u4ED6\u521B\u5EFA\u3002\u53E6\u5B58\u4E3A\u65B0\u89C6\u56FE\u4EE5\u4FDD\u7559\u60A8\u7684\u66F4\u6539\u3002"}),(0,e.jsxs)("div",{style:{marginTop:12,marginBottom:12},children:[(0,e.jsx)(ie.ZP,{disabled:!0,children:"\u4FDD\u5B58"}),(0,e.jsx)(ie.ZP,{style:{marginLeft:24},onClick:function(){return an({viewId:p})},children:"\u91CD\u7F6E"})]}),(0,e.jsx)("a",{style:{textDecoration:"underline",marginBottom:12},onClick:function(){return l({viewCreateVisible:!0})},children:"\u53E6\u5B58\u4E3A\u65B0\u89C6\u56FE"})]})},gn=function(i){var u=n.contactsData,m=i.length,w="";m===u.length&&(w="current"),l({tblSelectKeys:i,selectAll:!1,selectTotal:m,selectOption:w})},Se=function(){var i=n.contactsData,u=[];for(var m in i){var w=i[m].cid;u.push(w)}l({tblSelectKeys:u})},Te=function(i){i?(Se(),l({selectAll:!1,selectOption:"current"})):l({tblSelectKeys:[],selectAll:!1,selectOption:"",selectTotal:0})},en=(0,B.useRequest)(ce.NR,{manual:!0,onSuccess:function(i){if(!!i){ke(),l({multiChangeVisible:!1}),Te(!1);var u=i.modifiedCount,m=i.matchedCount;te.ZP.success("\u6279\u91CF\u66F4\u65B0\u6570\u636E\u6210\u529F \u7B26\u5408\u7EAA\u5F55\u6570\uFF1A".concat(m," \u4FEE\u6539\u7EAA\u5F55\u6570\uFF1A").concat(u))}}}),Cn=en.run,bn=en.loading,nn=function(){var d=Y()(x()().mark(function i(u){var m,w,L,Q,U,ge,Re,fe,Je,He,Tn,ct;return x()().wrap(function(Vn){for(;;)switch(Vn.prev=Vn.next){case 0:if(m=u.changeField,w=u.changeType,L=u.changeValue,m!=="tags"){Vn.next=4;break}return Vn.next=4,s();case 4:Q=n.selectAll,U=n.total,ge=n.tblSelectKeys,Re=n.filters,fe=n.keyword,Je=n.selectOption,He=n.selectTotal,Tn=n.sort,ct=Q?U:ge.length,Cn({selectAll:Q,filters:Re,rowCount:ct,selectKeys:ge,changeField:m,changeType:w,changeValue:L,keyword:fe,selectOption:Je,selectTotal:He,selectSort:Tn});case 7:case"end":return Vn.stop()}},i)}));return function(u){return d.apply(this,arguments)}}(),Dn=(0,B.useRequest)(ce.YI,{manual:!0,onSuccess:function(){ke(),l({multiDeleteVisible:!1}),Te(!1),te.ZP.success("\u5220\u9664\u7EAA\u5F55\u6210\u529F")}}),nt=Dn.run,fn=Dn.loading,tt=function(){var d=Y()(x()().mark(function i(){var u,m,w,L,Q,U,ge,Re,fe;return x()().wrap(function(He){for(;;)switch(He.prev=He.next){case 0:u=n.selectAll,m=n.total,w=n.tblSelectKeys,L=n.filters,Q=n.keyword,U=n.selectOption,ge=n.selectTotal,Re=n.sort,fe=u?m:w.length,nt({selectAll:u,selectKeys:w,rowCount:fe,keyword:Q,filters:L,selectOption:U,selectTotal:ge,selectSort:Re});case 3:case"end":return He.stop()}},i)}));return function(){return d.apply(this,arguments)}}(),Kn=(0,B.useRequest)(ce.gY,{manual:!0,onSuccess:function(){ke(),l({multiTagsVisible:!1}),Te(!1),te.ZP.success("\u64CD\u4F5C\u6210\u529F")}}),rt=Kn.run,it=Kn.loading,ut=function(){var d=Y()(x()().mark(function i(u){var m,w,L,Q,U,ge,Re,fe,Je,He,Tn;return x()().wrap(function(Hn){for(;;)switch(Hn.prev=Hn.next){case 0:m=u.tagValues,w=n.selectAll,L=n.total,Q=n.tblSelectKeys,U=n.filters,ge=n.keyword,Re=n.multiTagsAction,fe=n.selectOption,Je=n.selectTotal,He=n.sort,Tn=w?L:Q.length,rt({selectAll:w,selectKeys:Q,selectOption:fe,selectTotal:Je,selectSort:He,filters:U,keyword:ge,rowCount:Tn,tagAction:Re,tagValues:m});case 4:case"end":return Hn.stop()}},i)}));return function(u){return d.apply(this,arguments)}}(),Un=(0,B.useRequest)(ce.aC,{manual:!0,onSuccess:function(){te.ZP.success("\u5BFC\u51FA\u6570\u636E\u6210\u529F\uFF0C\u8BF7\u5230\u5BFC\u51FA\u5386\u53F2\u4E2D\u67E5\u770B\u8FDB\u5EA6"),l({exportVisible:!1})}}),at=Un.run,$n=Un.loading,Gn=function(){var d=Y()(x()().mark(function i(u){var m,w,L,Q,U,ge,Re,fe;return x()().wrap(function(He){for(;;)switch(He.prev=He.next){case 0:if(m=u.rangeType,w=u.fieldType,L=n.keyword,Q=n.filters,U=n.contactsData,ge=[],m==="part")for(Re in U)fe=U[Re].cid,ge.push(fe);at({keyword:L,filters:Q,rangeType:m,fieldType:w,exKeys:ge});case 5:case"end":return He.stop()}},i)}));return function(u){return d.apply(this,arguments)}}(),lt=function(i){var u=i.key;u==="outport"?l({exportVisible:!0}):u==="field"?l({fieldSettingVisible:!0}):u==="mail"&&l({massVisible:!0})},Yn={onClick:lt,items:[{key:"outport",label:"\u5BFC\u51FA\u6570\u636E"},{key:"field",label:"\u7F16\u8F91\u5B57\u6BB5"}]},st=function(i){var u=i.key,m=n.contactsData,w=n.total,L=n.selectLimit,Q=n.tblSelectKeys,U=0;u==="current"?U=m.length:u==="all"?U=w:u==="front"?U=L:U=Q.length,l({selectTotal:U,selectOption:u}),Se()},ot={onClick:st,style:{width:200},items:[{key:"current",icon:n.selectOption==="current"?(0,e.jsx)(Xn.Z,{style:{color:"#52c41a"}}):(0,e.jsx)("span",{style:{marginRight:6},children:" "}),label:"\u9009\u62E9\u5F53\u524D\u9875\u9762 "+n.contactsData.length},{key:"front",icon:n.selectOption==="front"?(0,e.jsx)(Xn.Z,{style:{color:"#52c41a"}}):(0,e.jsx)("span",{style:{marginRight:6},children:" "}),label:(0,e.jsxs)(e.Fragment,{children:["\u9009\u62E9\u524D"," ",(0,e.jsx)(hn.Z,{value:n.selectLimit,step:100,min:100,max:n.total>=1e4?1e4:n.total,size:"small",onClick:function(i){i.stopPropagation(),l({selectOption:"front",selectTotal:n.selectLimit})},controls:!1,onChange:function(i){return l({selectLimit:i,selectTotal:i})}})]})},{key:"all",icon:n.selectOption==="all"?(0,e.jsx)(Xn.Z,{style:{color:"#52c41a"}}):(0,e.jsx)("span",{style:{marginRight:6},children:" "}),label:" \u9009\u62E9\u5168\u90E8"+n.total}]},W=function(){var d=Y()(x()().mark(function i(){return x()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,s();case 2:P();case 3:case"end":return m.stop()}},i)}));return function(){return d.apply(this,arguments)}}(),h=function(i,u,m){var w={},L=m.field,Q=m.order,U=1;Q==="descend"&&(U=-1),L==="name"?(w.first_name=U,w.last_name=U):L?w[L]=U:w.create_time=-1;var ge=n.filters,Re=n.current,fe=n.pageSize,Je=n.keyword;l({sort:w,current:Re,pageSize:fe,tblSelectKeys:[],selectAll:!1}),X({viewId:p,current:Re,pageSize:fe,filters:ge,keyword:Je,sort:w})},k=function(i,u){var m=n.filters,w=n.sort,L=n.keyword;X({viewId:p,current:i,pageSize:u,filters:m,sort:w,keyword:L}),l({sort:w,keyword:L,current:i,pageSize:u,tblSelectKeys:[],selectAll:!1})},M=function(i){return(0,e.jsxs)("div",{style:{fontWeight:"bold",textAlign:"center"},children:["\u8054\u7CFB\u4EBA\u6570\u91CF ",(0,e.jsx)("a",{children:i})]})},g=function(i){var u=n.tagsValue,m=i.value;return u.length&&u[0]===m?(0,e.jsxs)("div",{className:un.Z.stardardFilterSelected,children:["\u6807\u7B7E (",u.length,")"]}):(0,e.jsx)("span",{})},me=function(i){l({statusValue:i});var u=n.filters,m=u.findIndex(function(w){return w.property==="verify_status"&&w.operator==="include"});!i||!i.length?u.splice(m,1):m>=0?u[m]={property:"verify_status",operator:"include",values:i}:u.push({property:"verify_status",operator:"include",values:i}),l({filters:u,tblSelectKeys:[],selectAll:!1,viewSaveVisible:!0}),qe()},$e=function(i){var u=n.statusValue,m=i.value;return u.length&&u[0]===m?(0,e.jsxs)("div",{style:{color:f.colorPrimary},className:un.Z.stardardFilterSelected,children:["\u9A8C\u8BC1\u7ED3\u679C (",u.length,")"]}):(0,e.jsx)("span",{})},Ke=function(i){var u=n.ownerValue,m=i.value;return u&&u.length&&u[0]===m?(0,e.jsxs)("div",{className:un.Z.stardardFilterSelected,children:["\u5F52\u5C5E (",u.length,")"]}):(0,e.jsx)("span",{})},xe=(0,B.useRequest)(ce.eN,{manual:!0,onSuccess:function(){te.ZP.success("\u521B\u5EFA\u6807\u7B7E\u6210\u529F"),l({tagName:""}),z()}}),Ze=xe.run,J=function(){var i=n.tagName;if(!i){te.ZP.error("\u6807\u7B7E\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A");return}if(!i.trim()){te.ZP.error("\u975E\u6CD5\u5B57\u7B26");return}Ze({name:i.trim()})};return(0,e.jsxs)("div",{children:[(0,e.jsx)(_e.Z,{hidden:n.tblSelectKeys.length,children:(0,e.jsxs)(mn.Z,{children:[(0,e.jsx)(Ue.Z,{xs:24,sm:24,md:24,lg:12,xl:12,children:(0,e.jsxs)(Pe.Z,{children:[p==="all"&&E!==null&&E!==void 0&&E.length?(0,e.jsx)(kn.Z,{treeCheckable:!0,treeData:n.userTreeData,dropdownStyle:{maxHeight:400,minWidth:200},placeholder:(0,e.jsxs)("div",{style:{color:"#383838",textAlign:"center"},children:["\u5F52\u5C5E ",(0,e.jsx)(pe.Z,{})]}),tagRender:Ke,showArrow:!1,allowClear:!0,className:un.Z.stardardFilter,bordered:!1,onChange:We,value:n.ownerValue}):null,(0,e.jsx)(kn.Z,{treeDataSimpleMode:!0,dropdownStyle:{maxHeight:400,minWidth:256},placeholder:(0,e.jsxs)("div",{style:{color:"#383838",textAlign:"center"},children:["\u6807\u7B7E ",(0,e.jsx)(pe.Z,{})]}),treeData:n.tagsTreeData,bordered:!1,showArrow:!1,treeCheckable:!0,allowClear:!0,tagRender:g,value:n.tagsValue,onChange:Ce,treeNodeFilterProp:"name",className:un.Z.stardardFilter,dropdownRender:function(i){return(0,e.jsxs)(e.Fragment,{children:[i,(0,e.jsx)(Ye.Z,{style:{margin:"8px 0"}}),(0,e.jsxs)(Pe.Z,{align:"center",style:{padding:"0 8px 4px"},children:[(0,e.jsx)(H.Z,{placeholder:"\u589E\u52A0\u6807\u7B7E",value:n.tagName,onChange:function(m){return l({tagName:m.target.value})}}),(0,e.jsxs)(kt.Z.Link,{style:{whiteSpace:"nowrap"},onClick:J,children:[(0,e.jsx)(be.Z,{})," \u65B0\u589E\u6807\u7B7E"]}),(0,e.jsx)($.Z,{title:"\u6807\u7B7E\u7BA1\u7406",children:(0,e.jsx)("a",{onClick:function(){return B.history.push("/settings/tags")},children:(0,e.jsx)(St.Z,{})})})]})]})}}),(0,e.jsxs)(Ve.Z,{mode:"multiple",allowClear:!0,bordered:!1,placeholder:(0,e.jsxs)("div",{style:{color:f.colorPrimaryText,textAlign:"center"},children:["\u9A8C\u8BC1\u7ED3\u679C ",(0,e.jsx)(pe.Z,{})]}),value:n.statusValue,onChange:me,className:un.Z.stardardFilter,tagRender:$e,dropdownStyle:{minWidth:128},children:[(0,e.jsxs)(Ve.Z.Option,{value:"valid",children:[(0,e.jsx)(Pn.Z,{twoToneColor:"#52c41a"})," \u6709\u6548\u90AE\u7BB1"]}),(0,e.jsxs)(Ve.Z.Option,{value:"full",children:[(0,e.jsx)(Fn.Z,{twoToneColor:"orange"})," \u5168\u57DF\u90AE\u7BB1"]}),(0,e.jsxs)(Ve.Z.Option,{value:"unkown",children:[(0,e.jsx)(Fn.Z,{})," \u672A\u77E5\u90AE\u7BB1"]}),(0,e.jsxs)(Ve.Z.Option,{value:"invalid",children:[(0,e.jsx)(On.Z,{twoToneColor:"#eb2f96"})," \u65E0\u6548\u90AE\u7BB1"]}),(0,e.jsxs)(Ve.Z.Option,{value:"waiting",children:[(0,e.jsx)(Sn.Z,{})," \u9A8C\u8BC1\u4E2D ",n.verifingCount]}),(0,e.jsxs)(Ve.Z.Option,{value:"",children:[(0,e.jsx)(Nn.Z,{})," \u672A\u9A8C\u8BC1 ",n.unVerifyCount]})]}),n.filters.length?(0,e.jsx)("div",{style:{height:32,backgroundColor:f.colorPrimaryHover},children:(0,e.jsx)(ie.ZP,{type:"text",onClick:function(){return l({filterVisible:!0})},children:(0,e.jsxs)("span",{className:un.Z["filter-item"],style:{fontWeight:"bold",color:f.colorWhite},children:[(0,e.jsx)(vt.Z,{})," \u7B5B\u9009 (",n.filters.length,")"]})})}):(0,e.jsx)("div",{style:{borderBottom:"1px solid grey"},children:(0,e.jsx)(ie.ZP,{type:"text",onClick:function(){return l({filterVisible:!0,color:f.colorWhite})},children:(0,e.jsxs)("span",{className:un.Z["filter-item"],children:[(0,e.jsx)(vt.Z,{})," \u7B5B\u9009 (0)"]})})}),n.viewSaveVisible?(0,e.jsx)(se.Z,{content:vn,title:!1,trigger:"click",placement:"bottomRight",children:(0,e.jsx)(ie.ZP,{type:"link",children:"\u4FDD\u5B58"})}):null]})}),(0,e.jsx)(Ue.Z,{xs:24,sm:24,md:24,lg:12,xl:12,style:{textAlign:"right",paddingRight:24},children:(0,e.jsxs)(Pe.Z,{size:"large",children:[(0,e.jsx)(H.Z.Search,{placeholder:"\u641C\u7D22\u540D\u79F0\u3001\u6635\u79F0\u3001\u90AE\u7BB1",enterButton:!0,style:{maxWidth:300,verticalAlign:"middle"},value:n.keyword,onChange:function(i){return l({keyword:i.target.value})},onSearch:function(){return qe()}},"searchKey"),(0,e.jsx)($.Z,{title:"\u7FA4\u53D1\u90AE\u4EF6",children:(0,e.jsx)("a",{onClick:function(){return l({massVisible:!0})},style:{fontSize:16},children:(0,e.jsx)(Tt.Z,{})})}),(0,e.jsx)($.Z,{title:"\u4E00\u952E\u5BFC\u5165",children:(0,e.jsx)("a",{onClick:function(){return B.history.push("/contacts/contacts-import")},style:{fontSize:16},children:(0,e.jsx)(Vt.Z,{})})}),(0,e.jsx)($.Z,{title:"\u65B0\u589E\u8054\u7CFB\u4EBA",children:(0,e.jsx)("a",{onClick:function(){return l({contactCreateVisible:!0})},style:{fontSize:16},children:(0,e.jsx)(be.Z,{})})}),(0,e.jsx)($.Z,{title:"\u5237\u65B0\u6570\u636E",children:(0,e.jsx)("a",{onClick:function(){return oe()},style:{fontSize:16},children:_?(0,e.jsx)(Sn.Z,{}):(0,e.jsx)(Rt.Z,{})})}),(0,e.jsx)(on.Z,{menu:Yn,trigger:["click"],children:(0,e.jsx)("a",{style:{fontSize:16},children:(0,e.jsx)(It.Z,{})})})]})})]})}),(0,e.jsx)("div",{className:un.Z["tbl-operator"],hidden:!n.tblSelectKeys.length,children:(0,e.jsxs)(Pe.Z,{size:24,children:[(0,e.jsx)(In.Z,{indeterminate:n.tblSelectKeys.length!==n.contactsData.length,checked:n.tblSelectKeys.length,onChange:function(i){return Te(i.target.checked)}}),(0,e.jsxs)("span",{children:["\u5DF2\u9009 ",(0,e.jsx)("a",{children:n.selectTotal}),"/",n.total," \u9879\u6570\u636E",(0,e.jsx)("span",{style:{marginLeft:12},children:(0,e.jsx)(on.Z,{menu:ot,trigger:["click"],children:(0,e.jsxs)("span",{style:{borderBottom:"1px solid grey"},children:[(0,e.jsx)("a",{children:"\u9AD8\u7EA7\u9009\u62E9"}),(0,e.jsx)(pe.Z,{})]})})},"selectOptions")]}),(0,e.jsx)(ie.ZP,{onClick:function(){return l({sendMailsVisible:!0})},size:"small",type:"primary",children:"\u90AE\u4EF6"},"sendEmail"),(0,e.jsx)(ie.ZP,{onClick:function(){return l({multiChangeVisible:!0})},size:"small",type:"primary",children:"\u4FEE\u6539"},"111"),(0,e.jsx)(ie.ZP,{size:"small",danger:!0,onClick:function(){return l({multiDeleteVisible:!0})},children:"\u5220\u9664"},"deleteKey"),(0,e.jsx)(ie.ZP,{onClick:function(){return l({multiTagsVisible:!0,multiTagsAction:"push"})},size:"small",type:"primary",children:"\u8D34\u6807\u7B7E"},"222"),(0,e.jsx)(ie.ZP,{onClick:function(){return l({multiTagsVisible:!0,multiTagsAction:"pull"})},size:"small",danger:!0,children:"\u6495\u6807\u7B7E"},"333"),(0,e.jsx)(ie.ZP,{onClick:function(){return l({assignVisible:!0})},size:"small",type:"primary",children:"\u5F52\u5C5E"},"assign"),(0,e.jsx)(ie.ZP,{onClick:function(){return l({exportVisible:!0})},size:"small",children:"\u5BFC\u51FA"},"export")]})}),(0,e.jsxs)("div",{children:[(0,e.jsx)(jt.Z,{onResize:function(){var i=window,u=i.innerHeight,m=i.innerWidth;if(m>=992&&u>=500){var w=u-360;l({scrollY:w})}if(m<992&&u>=600){var L=u-440;l({scrollY:L})}},children:(0,e.jsx)(Zt.Z,{rowKey:"cid",loading:_,dataSource:n.contactsData,columns:I.map(function(d){return y()(y()({},d),{},{className:"both-left"})}),scroll:{x:n.contactsData.length>0?"100%":void 0,y:n.contactsData.length>0?n.scrollY:void 0},pagination:!1,rowSelection:{selectedRowKeys:n.tblSelectKeys,onChange:gn,columnWidth:32},components:T,onChange:h,rowClassName:function(){return"editable-row"},showSorterTooltip:!1,size:"middle"})},"resize-observer"),(0,e.jsx)("div",{style:{width:"100%",height:48,paddingTop:12,textAlign:"center"},children:(0,e.jsx)(Bt.Z,{total:n.total,pageSize:n.pageSize,current:n.current,showSizeChanger:!0,onChange:k,showTotal:function(i){return M(i)},showQuickJumper:!0})})]}),(0,e.jsx)(sr,{visible:n.filterVisible,onCancel:function(){return l({filterVisible:!1})},onApplyAction:Fe,onLogicChange:dn,filters:n.filters,logic:n.logic,viewConfig:n.viewConfig}),(0,e.jsx)(Qt,{visible:n.contactCreateVisible,onCancel:function(){return l({contactCreateVisible:!1})},actionReload:qe}),(0,e.jsx)(nr,{visible:n.contactPreviewVisible,onCancel:function(){return l({contactPreviewVisible:!1})},actionReload:qe,current:n.currentRecord}),(0,e.jsx)(dr,{visible:n.multiChangeVisible,onCancel:function(){return l({multiChangeVisible:!1})},multiUpdate:function(i){return nn(i)},changeRows:n.selectTotal,loading:bn}),(0,e.jsx)(fr,{visible:n.multiDeleteVisible,onCancel:function(){return l({multiDeleteVisible:!1})},rowCount:n.selectTotal,multiDelete:function(){return tt()},loading:fn}),(0,e.jsx)(hr.Z,{visible:n.multiTagsVisible,onCancel:function(){return l({multiTagsVisible:!1})},rowCount:n.selectTotal,multiTags:function(i){return ut(i)},loading:it,action:n.multiTagsAction,tagsItem:n.tagsItem}),(0,e.jsx)(Ir,{visible:n.assignVisible,onCancel:function(){return l({assignVisible:!1})},multiUpdate:function(i){return nn(i)},rowCount:n.selectTotal,loading:bn}),(0,e.jsx)(gr,{visible:n.exportVisible,onCancel:function(){return l({exportVisible:!1})},rowCount:n.pageSize,totalCount:n.total,onAction:function(i){return Gn(i)},loading:$n}),(0,e.jsx)(qn,{visible:n.fieldSettingVisible,onCancel:function(){return l({fieldSettingVisible:!1})},belongTo:"contact",saveType:"show",actionReload:function(){return W()}}),(0,e.jsx)(Vr,{visible:n.sendMailsVisible,onCancel:function(){return l({sendMailsVisible:!1})},initValues:{rowCount:n.selectTotal,selectAll:n.selectAll,selectKeys:n.tblSelectKeys,selectSort:n.sort,selectTotal:n.selectTotal,selectOption:n.selectOption,filters:n.filters,keyword:n.keyword}}),(0,e.jsx)(dt,{visible:n.viewCreateVisible,onCancel:function(){return l({viewCreateVisible:!1})},actionReload:function(i){Z(i),l({viewSaveVisible:!1})},filters:n.filters,name:""}),(0,e.jsx)(zr.Z,{visible:n.massVisible,onCancel:function(){return l({massVisible:!1})},actionReload:function(){},taskId:"",action:"create"})]})},Kr=Wr,Wn=r(84207),Ur=function(c){var p=(0,B.useModel)("@@initialState"),Z=p.initialState,j=c.visible,S=c.onCancel,n=c.viewId,l=c.viewShared,A=c.actionReload,f=(0,ve.Z)({viewId:"",viewName:"",shared:""}),b=ae()(f,2),E=b[0],C=b[1],O=(0,B.useRequest)(ce.fl,{manual:!0,onSuccess:function(){te.ZP.success("\u4FEE\u6539\u6210\u529F"),S(),A()}}),I=O.run,G=function(){var v=Y()(x()().mark(function t(){var a;return x()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:a=E.shared,I({viewId:n,shared:a});case 2:case"end":return o.stop()}},t)}));return function(){return v.apply(this,arguments)}}();if((0,de.useEffect)(function(){j&&C({shared:l,viewId:n})},[j]),!Z)return(0,e.jsx)(Rn.Z,{size:"large",children:"\u672A\u767B\u5F55"});var T=Z.currentUser,ne=T.uid,V=T.userid,N=T.teamIds;return(0,e.jsx)(ye.Z,{destroyOnClose:!0,width:420,title:null,open:j,onCancel:function(){return S()},footer:null,children:(0,e.jsxs)("div",{style:{textAlign:"center"},children:[(0,e.jsx)("div",{style:{fontSize:16,fontWeight:550},children:"\u89C6\u56FE\u5206\u4EAB\u8BBE\u7F6E"}),(0,e.jsxs)(ee.ZP.Group,{value:E.shared,onChange:function(t){return C({shared:t.target.value})},style:{width:360,marginLeft:24,marginTop:24,marginBottom:36},size:"large",children:[(0,e.jsx)(ee.ZP,{value:"private",style:{width:"100%"},children:"\u6211\u81EA\u5DF1"}),(0,e.jsx)(ee.ZP,{value:"team",style:{width:"100%"},disabled:!N||!N.length,children:"\u6211\u7684\u90E8\u95E8"}),(0,e.jsx)(ee.ZP,{value:"everyone",style:{width:"100%"},disabled:ne===V||!V,children:"\u6240\u6709\u4EBA"})]}),(0,e.jsx)(ie.ZP,{type:"primary",onClick:G,children:"\u4FDD\u5B58"})]})})},$r=Ur,Gr=r(81589),Yr=r(61851),Hr=r(5307),Xr=function(c){var p=c.responsive,Z=c.setResponsive,j=c.state,S=c.setState,n=(0,B.useRequest)(ce.Wy,{manual:!0}),l=n.run,A=(0,B.useRequest)(ce.Xf,{manual:!0,onSuccess:function(t){if(!!t){var a=t.mineViews,s=t.othersViews,o=t.systemViews;S({mineViews:a,othersViews:s,systemViews:o})}}}),f=A.run,b=(0,B.useRequest)(ce.o,{manual:!0,onSuccess:function(){f()}}),E=b.run,C=function(){var v=Y()(x()().mark(function t(a){var s,o,D,F;return x()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return s=a.viewId,o=a.name,z.next=3,l({viewId:s});case 3:D=z.sent,F=D.filters,S({filters:F,viewName:"".concat(o,"(\u526F\u672C)"),viewCreateVisible:!0});case 6:case"end":return z.stop()}},t)}));return function(a){return v.apply(this,arguments)}}(),O=function(t){var a=t.viewId,s=t.name;S({viewId:a,viewName:s,renameVisible:!0})},I=function(t){var a=t.viewId,s=t.shared;S({viewId:a,viewShared:s,shareVisible:!0})},G=function(t){var a=t.viewId,s=t.name;ye.Z.confirm({title:"\u5220\u9664\u89C6\u56FE\uFF1A".concat(s),content:"\u786E\u5B9A\u5220\u9664\u89C6\u56FE\uFF1F",onOk:function(){return E({viewId:a})}})},T=function(t,a){var s=!1,o=!1,D=!1;return(a==="system"||a==="other")&&(s=!0,o=!0,D=!0),(0,e.jsx)(on.Z,{menu:{items:[{key:"info",icon:(0,e.jsx)(he.Z,{}),label:"\u590D\u5236",onClick:function(){return C(t)}},{key:"save",icon:(0,e.jsx)(K.Z,{}),label:"\u91CD\u547D\u540D",disabled:s,onClick:function(){return O(t)}},{key:"share",icon:(0,e.jsx)(we.Z,{}),label:"\u5206\u4EAB\u8BBE\u7F6E",disabled:D,onClick:function(){return I(t)}},{key:"delete",icon:(0,e.jsx)(Be.Z,{}),label:"\u5220\u9664",disabled:o,onClick:function(){return G(t)}}]},children:(0,e.jsxs)("a",{children:["\u64CD\u4F5C ",(0,e.jsx)(pe.Z,{})]})},"more-actions")},ne=function(){return(0,e.jsx)(Ge.ZP,{size:"large",dataSource:j.systemViews,rowKey:"viewId",renderItem:function(a){return(0,e.jsx)(Ge.ZP.Item,{actions:[T(a,"system")],children:(0,e.jsxs)("div",{style:{},children:[" ",a.name]})},a.viewId)}})},V=function(){return(0,e.jsx)(Ge.ZP,{size:"large",dataSource:j.mineViews,rowKey:"viewId",renderItem:function(a){var s=a.name,o=a.shared,D=a.viewId,F=j.keyword;return F&&s.toLowerCase().indexOf(F.toLowerCase())<0?null:(0,e.jsx)(Ge.ZP.Item,{actions:[T(a,"mine")],children:(0,e.jsxs)("div",{children:[s," ",o==="everyone"?(0,e.jsx)($.Z,{title:"\u5DF2\u5206\u4EAB",children:(0,e.jsx)(we.Z,{})}):null]})},D)}})},N=function(){return(0,e.jsx)(Ge.ZP,{size:"large",dataSource:j.othersViews,rowKey:"viewId",renderItem:function(a){var s=a.name,o=a.shared,D=a.viewId,F=j.keyword;return F&&s.toLowerCase().indexOf(F.toLowerCase())<0?null:(0,e.jsx)(Ge.ZP.Item,{actions:[T(a,"other")],children:(0,e.jsxs)("div",{children:[s," ",o==="everyone"?(0,e.jsx)($.Z,{title:"\u5DF2\u5206\u4EAB",children:(0,e.jsx)(we.Z,{})}):null]})},D)}})};return(0,e.jsx)(_e.Z,{className:"".concat(un.Z.viewTabs," both-left"),style:{marginTop:"38px"},children:(0,e.jsx)(jt.Z,{onResize:function(t){Z(t.width<800)},children:(0,e.jsxs)(Wn.Z,{title:(0,e.jsx)("div",{children:(0,e.jsx)("span",{children:"\u6240\u6709\u89C6\u56FE\u5217\u8868"})}),extra:(0,e.jsx)(H.Z.Search,{placeholder:"\u67E5\u627E",allowClear:!0,style:{width:200},size:"large",value:j.keyword,onChange:function(t){return S({keyword:t.target.value})}}),split:p?"horizontal":"vertical",bordered:!0,headerBordered:!0,children:[(0,e.jsx)(Wn.Z,{title:"\u7CFB\u7EDF\u9ED8\u8BA4",colSpan:p?"100%":"33%",children:(0,e.jsx)("div",{style:{minHeight:540},children:ne()},"sysViewsContent")},"systemViews"),(0,e.jsx)(Wn.Z,{title:"\u6211\u521B\u5EFA\u7684",children:(0,e.jsx)("div",{style:{minHeight:540},children:V()},"mineViewsContent")},"mineViews"),(0,e.jsx)(Wn.Z,{title:"\u5176\u4ED6\u4EBA\u521B\u5EFA\u7684",children:(0,e.jsx)("div",{style:{minHeight:540},children:N()},"otherViewsContent")},"otherViews")]})},"resize-observer")})},Jr=function(){var c,p=(0,de.useState)(!1),Z=ae()(p,2),j=Z[0],S=Z[1],n=(0,ve.Z)({viewSelectVisible:!1,viewCreateVisible:!1,renameVisible:!1,viewId:"",viewName:"",viewShared:"private",shareVisible:!1,unpinViewData:{},viewActiveKey:"",viewIds:[],viewItems:[],unpinViewActionVisible:!1,pinViewActionVisible:!1,showAllViews:!1,mineViews:[],othersViews:[],systemViews:[],filters:[],keyword:""}),l=ae()(n,2),A=l[0],f=l[1],b=(0,B.useRequest)(ce.Xf,{manual:!0,onSuccess:function(o){if(!!o){var D=o.mineViews,F=o.othersViews,re=o.systemViews;f({mineViews:D,othersViews:F,systemViews:re})}}}),E=b.run,C=(0,B.useRequest)(ce.JC,{manual:!0,onSuccess:function(o){if(!!o){var D=A.viewActiveKey;if(o!=null&&o.length){var F=[];for(var re in o){var z=o[re].viewId;"".concat(re)==="0"&&!D&&f({viewActiveKey:z}),F.push(z)}f({viewIds:F,viewItems:o})}}}}),O=C.run,I=C.refresh,G=(0,B.useRequest)(ce.gk,{manual:!0}),T=G.run,ne=function(){var s=Y()(x()().mark(function o(D){var F,re,z;return x()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(F=D.viewId,re=D.name,z=A.viewIds,f({viewActiveKey:F}),!(z.indexOf(F)>=0)){R.next=5;break}return R.abrupt("return");case 5:if(!(z&&z.length>5)){R.next=9;break}f({unpinViewData:{viewId:F,name:re}}),R.next=12;break;case 9:return R.next=11,T({viewIds:[].concat(Ae()(z),[F])});case 11:I();case 12:case"end":return R.stop()}},o)}));return function(D){return s.apply(this,arguments)}}(),V=function(){var s=Y()(x()().mark(function o(D){var F,re,z;return x()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(F=D.viewId,re=D.name,z=A.viewIds,!(z&&z.length>5)){R.next=7;break}f({viewActiveKey:F}),f({unpinViewData:{viewId:F,name:re}}),R.next=10;break;case 7:return R.next=9,T({viewIds:[].concat(Ae()(z),[F])});case 9:I();case 10:E();case 11:case"end":return R.stop()}},o)}));return function(D){return s.apply(this,arguments)}}(),N=function(){O(),E()},v=function(){E()},t=function(o,D){if(!!o&&D!=="add"){var F=A.unpinViewData,re=A.viewActiveKey,z=A.viewIds,ue=F.viewId;if(ue===o){f({unpinViewData:{}}),re===o&&f({viewActiveKey:z[0]});return}var R=z.indexOf(o);R>=0&&(z.splice(R,1),f({viewIds:z}),T({viewIds:z}),re===o&&f({viewActiveKey:z[0]}))}},a=function(o){f({viewActiveKey:o})};return(0,de.useEffect)(function(){O(),E()},[]),(0,e.jsxs)(Oe.Z,{pageTitle:!1,pageGroup:"contacts",pageActive:"contacts",children:[(0,e.jsxs)("div",{style:{width:"100%",height:"5vh"},children:[(0,e.jsx)(Gr.Z,{className:"both-down",items:[].concat(Ae()((c=A.viewIds)===null||c===void 0?void 0:c.map(function(s,o){return{key:s,onEdit:function(){return t(s,"add")},label:(0,e.jsx)(Hr.e,{viewId:s,index:o,state:A,setState:f,savePinView:T}),onClick:function(){return a(s)},style:{width:"140px",justifyContent:"space-around"}}})),[(0,Yr.b)({state:A,setState:f,onViewEdit:t,onViewChange:a,savePinView:T}),{key:"inset",label:(0,e.jsx)(De,{onSelectAction:function(o){return ne(o)},showCreate:function(){return f({viewCreateVisible:!0})},children:(0,e.jsx)("div",{style:{width:"100%",cursor:"pointer"},children:(0,e.jsx)(be.Z,{})})})}]),optionItems:[{key:"additem",label:"\u521B\u5EFA\u89C6\u56FE",style:{cursor:"pointer"},onClick:function(){return f({viewCreateVisible:!0})}},A.showAllViews?{key:"all",style:{cursor:"pointer"},label:(0,e.jsxs)("p",{children:[(0,e.jsx)(Ie.Z,{}),"\u8FD4\u56DE"]}),onClick:function(){return f({showAllViews:!1})}}:{key:"all",label:"\u6240\u6709\u89C6\u56FE",style:{cursor:"pointer"},onClick:function(){return f({showAllViews:!0})}}]}),(0,e.jsx)(Ye.Z,{style:{margin:0}}),!A.showAllViews&&(0,e.jsx)("div",{className:"both-up",style:{marginTop:"16px"},children:(0,e.jsx)(Kr,{viewId:A.viewActiveKey,createReload:function(o){return V(o)}})})]}),A.showAllViews&&(0,e.jsx)(Xr,{setState:f,state:A,responsive:j,setResponsive:S}),(0,e.jsx)(dt,{visible:A.viewCreateVisible,onCancel:function(){return f({viewCreateVisible:!1})},actionReload:function(o){return V(o)},filters:A.filters,name:A.viewName}),(0,e.jsx)(At,{visible:A.renameVisible,onCancel:function(){return f({renameVisible:!1})},viewId:A.viewId,viewName:A.viewName,actionReload:function(){return N()}}),(0,e.jsx)($r,{visible:A.shareVisible,onCancel:function(){return f({shareVisible:!1})},viewId:A.viewId,viewShared:A.viewShared,actionReload:function(){return v()}})]})},Qr=Jr},52546:function(Bn,Qe,r){var ln=r(35290),Ae=r.n(ln),xn=r(411),ae=r.n(xn),yn=r(46686),x=r.n(yn),sn=r(85170),Y=r(31810),de=r(58110),Oe=r(36541),ye=r(43010),on=function($){var _e=$.visible,H=$.onCancel,Ye=$.multiTags,ve=$.rowCount,he=$.loading,K=$.action,we=$.tagsItem,Be=Y.Z.useForm(),pe=x()(Be,1),be=pe[0],Ie=function(){var se=ae()(Ae()().mark(function ce(){var tn;return Ae()().wrap(function(je){for(;;)switch(je.prev=je.next){case 0:return je.prev=0,je.next=3,be.validateFields();case 3:tn=je.sent,Ye(tn),je.next=10;break;case 7:je.prev=7,je.t0=je.catch(0),console.log("Failed:",je.t0);case 10:case"end":return je.stop()}},ce,null,[[0,7]])}));return function(){return se.apply(this,arguments)}}(),B=function(){return K==="push"?(0,ye.jsxs)("div",{children:["\u8D34\u6807\u7B7E (\u5DF2\u9009\u62E9",(0,ye.jsx)("a",{children:ve}),"\u4E2A\u8054\u7CFB\u4EBA)"]}):(0,ye.jsxs)("div",{children:["\u6495\u6807\u7B7E (\u5DF2\u9009\u62E9",(0,ye.jsx)("a",{children:ve}),"\u4E2A\u8054\u7CFB\u4EBA)"]})},Le=function(){return K==="push"?(0,ye.jsx)("div",{style:{fontSize:16},children:"\u6DFB\u52A0\u4EE5\u4E0B\u6807\u7B7E (\u53EF\u9009\u62E9\u591A\u4E2A)"}):(0,ye.jsx)("div",{style:{fontSize:16},children:"\u5220\u9664\u4EE5\u4E0B\u6807\u7B7E (\u53EF\u9009\u62E9\u591A\u4E2A)"})};return(0,ye.jsx)(de.Z,{title:B(),width:450,bodyStyle:{padding:"28px 28px"},destroyOnClose:!0,open:_e,onCancel:H,okText:"\u63D0\u4EA4",onOk:Ie,confirmLoading:he,children:(0,ye.jsx)("div",{children:(0,ye.jsx)(Y.Z,{layout:"vertical",form:be,children:(0,ye.jsx)(Y.Z.Item,{label:Le(),name:"tagValues",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6807\u7B7E"}],children:(0,ye.jsx)(Oe.Z,{field:we,size:"large"})})})})})};Qe.Z=on},5307:function(Bn,Qe,r){r.d(Qe,{e:function(){return ve}});var ln=r(94434),Ae=r.n(ln),xn=r(35290),ae=r.n(xn),yn=r(411),x=r.n(yn),sn=r(73173),Y=r(76476),de=r(83006),Oe=r(61877),ye=r(92895),on=r(6771),Ge=r(94853),$=r(12209),_e=r(77482),H=r(43010),Ye=function(K){var we=K.viewId,Be=K.viewName,pe=K.index,be=K.setState,Ie=K.viewType,B=K.state,Le=K.savePinView,se=function(){var e=x()(ae()().mark(function je(Me,De){return ae()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:be({viewId:Me,viewName:De,renameVisible:!0,unpinViewActionVisible:!1,pinViewActionVisible:!1});case 1:case"end":return y.stop()}},je)}));return function(Me,De){return e.apply(this,arguments)}}(),ce=function(){var e=x()(ae()().mark(function je(Me){var De,Ne,y,q,te;return ae()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(De=B.viewIds,Ne=B.viewItems,y=De[Me],De.splice(Me,1),q=Ne.findIndex(function(ie){return ie.viewId===y}),!(q<0)){ee.next=6;break}return ee.abrupt("return");case 6:return te=Ne[q],be({viewIds:De,unpinViewData:te,pinViewActionVisible:!1}),ee.next=10,Le({viewIds:De,viewType:Ie});case 10:case"end":return ee.stop()}},je)}));return function(Me){return e.apply(this,arguments)}}(),tn=function(){var e=x()(ae()().mark(function je(Me){var De,Ne;return ae()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return De=B.viewIds,Ne=De[Me],De.splice(Me,1),be({viewIds:[Ne].concat(Ae()(De)),pinViewActionVisible:!1}),q.next=6,Le({viewIds:[Ne].concat(Ae()(De)),viewType:Ie});case 6:case"end":return q.stop()}},je)}));return function(Me){return e.apply(this,arguments)}}();return pe===0?(0,H.jsxs)("div",{children:[(0,H.jsx)(on.Z,{title:"\u9ED8\u8BA4\u89C6\u56FE\u4E0D\u80FD\u53D6\u6D88\u56FA\u5B9A\u3002\u5148\u8BBE\u7F6E\u5176\u4ED6\u89C6\u56FE\u9ED8\u8BA4\u540E\u518D\u53D6\u6D88\u56FA\u5B9A\u3002",children:(0,H.jsx)("div",{className:_e.Z["default-view-item"],children:"\u53D6\u6D88\u56FA\u5B9A"})}),we&&we.length>=8?(0,H.jsx)("a",{onClick:function(){return se(we,Be)},children:(0,H.jsxs)("div",{className:_e.Z["view-item"],children:[(0,H.jsx)(sn.Z,{})," \u91CD\u547D\u540D"]})}):(0,H.jsxs)("div",{className:_e.Z["default-view-item"],children:[(0,H.jsx)(sn.Z,{})," \u91CD\u547D\u540D"]})]}):(0,H.jsxs)("div",{children:[(0,H.jsx)("a",{onClick:function(){return tn(pe)},children:(0,H.jsxs)("div",{className:_e.Z["view-item"],children:[(0,H.jsx)(Y.Z,{})," \u8BBE\u7F6E\u9ED8\u8BA4"]})}),(0,H.jsx)("a",{onClick:function(){return ce(pe)},children:(0,H.jsxs)("div",{className:_e.Z["view-item"],children:[(0,H.jsx)(de.Z,{})," \u53D6\u6D88\u56FA\u5B9A"]})}),we&&we.length>=8?(0,H.jsx)("a",{onClick:function(){return se(we,Be)},children:(0,H.jsxs)("div",{className:_e.Z["view-item"],children:[(0,H.jsx)(sn.Z,{})," \u91CD\u547D\u540D"]})}):(0,H.jsxs)("div",{className:_e.Z["default-view-item"],children:[(0,H.jsx)(sn.Z,{})," \u91CD\u547D\u540D"]})]})},ve=function(K){var we=K.viewId,Be=K.index,pe=K.state,be=K.setState,Ie=K.viewType,B=K.savePinView,Le=Ge.Z.useToken(),se=Le.token,ce=pe.viewItems,tn=pe.viewName,e=ce.findIndex(function(Ne){return Ne.viewId===we}),je=ce[e].name,Me=pe.viewActiveKey,De={color:se.colorText};return e<0?null:we===Me?(0,H.jsxs)("div",{className:_e.Z.tabName,style:{color:se.colorPrimaryText,cursor:"pointer"},children:[(0,H.jsx)(Oe.Z,{style:{marginRight:5}}),je,(0,H.jsx)($.Z,{placement:"bottom",style:De,title:!1,content:Ye({viewId:we,viewName:tn,index:Be,setState:be,viewType:Ie,state:pe,savePinView:B}),trigger:"click",open:pe.pinViewActionVisible,onOpenChange:function(y){return be({pinViewActionVisible:y})},children:(0,H.jsx)(ye.Z,{style:{marginLeft:8}})})]}):(0,H.jsxs)("span",{style:{cursor:"pointer"},children:[(0,H.jsx)(Oe.Z,{style:{marginRight:5}}),je]})}},61851:function(Bn,Qe,r){r.d(Qe,{b:function(){return Ye}});var ln=r(30279),Ae=r.n(ln),xn=r(35290),ae=r.n(xn),yn=r(94434),x=r.n(yn),sn=r(411),Y=r.n(sn),de=r(73173),Oe=r(74559),ye=r(94853),on=r(12209),Ge=r(77482),$=r(43010),_e=function(he,K,we,Be){return(0,$.jsxs)("div",{children:[(0,$.jsx)("a",{onClick:function(){return we(he)},children:(0,$.jsx)("div",{className:Ge.Z["view-item"],children:"\u56FA\u5B9A\u89C6\u56FE"})}),he&&he.length>=8?(0,$.jsx)("a",{onClick:function(){return Be(he,K)},children:(0,$.jsxs)("div",{className:Ge.Z["view-item"],children:[(0,$.jsx)(de.Z,{})," \u91CD\u547D\u540D"]})}):(0,$.jsxs)("div",{className:Ge.Z["default-view-item"],children:[(0,$.jsx)(de.Z,{})," \u91CD\u547D\u540D"]})]})},H=function(he){var K=he.viewId,we=he.name,Be=he.state,pe=he.setState,be=he.viewType,Ie=he.savePinView,B=Be.viewActiveKey,Le=ye.Z.useToken(),se=Le.token,ce=K===B,tn={color:se.colorText},e=function(){var Me=Y()(ae()().mark(function De(Ne){var y,q,te;return ae()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return y=Be.viewIds,q=Be.viewItems,te=Be.unpinViewData,ee.next=3,Ie({viewIds:[].concat(x()(y),[Ne]),viewType:be});case 3:pe({viewIds:[].concat(x()(y),[Ne]),viewItems:[].concat(x()(q),[te]),unpinViewData:{},unpinViewActionVisible:!1,pinViewActionVisible:!1});case 4:case"end":return ee.stop()}},De)}));return function(Ne){return Me.apply(this,arguments)}}(),je=function(){var Me=Y()(ae()().mark(function De(Ne,y){return ae()().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:pe({viewId:Ne,viewName:y,renameVisible:!0,unpinViewActionVisible:!1,pinViewActionVisible:!1});case 1:case"end":return te.stop()}},De)}));return function(Ne,y){return Me.apply(this,arguments)}}();return(0,$.jsxs)("div",{style:ce?{color:se.colorPrimaryText}:{},children:[(0,$.jsx)(on.Z,{placement:"bottom",title:!1,content:_e(K,we,e,je),trigger:"click",open:Be.unpinViewActionVisible,onOpenChange:function(De){return pe({unpinViewActionVisible:De})},children:(0,$.jsx)(Oe.Z,{style:Ae()(Ae()({},tn),{},{marginRight:5,color:ce?se.colorPrimaryText:""})})}),we]})},Ye=function(he){var K=he.state,we=he.setState,Be=he.viewType,pe=he.onViewEdit,be=he.onViewChange,Ie=he.savePinView,B=K.unpinViewData,Le=K.viewIds,se=B.viewId,ce=B.name;return!se||Le.indexOf(se)>=0?null:{key:se,label:(0,$.jsx)(H,{viewId:se,name:ce,state:K,setState:we,viewType:Be,savePinView:Ie}),onDelete:function(){return pe(se,"remove")},onClick:function(){return be(se)}}}},77482:function(Bn,Qe){Qe.Z={"view-item":"view-item___DbErT","default-view-item":"default-view-item___W0RXI","filter-item":"filter-item___yKEA8","condition-and":"condition-and___LBjxr",stepForm:"stepForm___v7sWI",titleContainer:"titleContainer___O8BEV",formLine:"formLine___c37KV",desc:"desc___zOGZ1","tbl-operator":"tbl-operator___yTiJZ","card-main":"card-main___ratdD",stardardFilter:"stardardFilter___weRty",stardardFilterSelected:"stardardFilterSelected___C2C_q",saveViewButton:"saveViewButton___kNxKS",mycontainer:"mycontainer___UFWbz",viewTabs:"viewTabs___OiX3H",tabName:"tabName___ZgUWO",tabOption:"tabOption___xdjhe"}}}]);
