"use strict";(self.webpackChunklaifaxin_web=self.webpackChunklaifaxin_web||[]).push([[2092],{50085:function(q,h,e){e.d(h,{Z:function(){return E}});var j=e(75782),a=e(85170),R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"},u=R,i=e(70325),r=function(s,f){return a.createElement(i.Z,(0,j.Z)((0,j.Z)({},s),{},{ref:f,icon:u}))};r.displayName="UserOutlined";var E=a.forwardRef(r)},88208:function(q,h,e){var j=e(30279),a=e.n(j),R=e(85170),u=e(91522),i=e(43010);h.Z=function(r){var E=r.children,c=r.pageTitle;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(u._z,a()(a()({header:{title:c,breadcrumb:{}}},r),{},{children:E}))})}},56314:function(q,h,e){var j=e(85170),a=e(80661),R=e(22196),u=e(43010);h.Z=function(i){var r=i.children,E=i.accessKey,c=(0,R.useModel)("@@initialState"),s=c.initialState;if(!s)return(0,u.jsx)(a.Z,{size:"large",children:"\u672A\u767B\u5F55"});var f=s.userPermissions,Z=s.currentUser,B=function(){var o,I=Z!=null?Z:{},b=I.uid,C=I.orgId;return!!(!C||b===C||!E||f!=null&&(o=f[E])!==null&&o!==void 0&&o.checked)};return(0,u.jsx)(R.Access,{accessible:B(),children:r})}},45182:function(q,h,e){e.r(h),e.d(h,{default:function(){return Pe}});var j=e(30279),a=e.n(j),R=e(35290),u=e.n(R),i=e(411),r=e.n(i),E=e(46686),c=e.n(E),s=e(85170),f=e(41318),Z=e(74954),B=e(96498),L=e(46394),o=e(28931),I=e(6771),b=e(16798),C=e(10364),x=e(22196),ee=e(88208),T=e(66694),te=e(48865),ue=e(50085),K=e(75782),H={icon:function(n,l){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M761.1 288.3L687.8 215 325.1 577.6l-15.6 89 88.9-15.7z",fill:l}},{tag:"path",attrs:{d:"M880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32zm-622.3-84c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89z",fill:n}}]}},name:"edit",theme:"twotone"},oe=H,w=e(70325),ne=function(n,l){return s.createElement(w.Z,(0,K.Z)((0,K.Z)({},n),{},{ref:l,icon:oe}))};ne.displayName="EditTwoTone";var ie=s.forwardRef(ne),ae={icon:function(n,l){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M292.7 840h438.6l24.2-512h-487z",fill:l}},{tag:"path",attrs:{d:"M864 256H736v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zm-504-72h304v72H360v-72zm371.3 656H292.7l-24.2-512h487l-24.2 512z",fill:n}}]}},name:"delete",theme:"twotone"},de=ae,re=function(n,l){return s.createElement(w.Z,(0,K.Z)((0,K.Z)({},n),{},{ref:l,icon:de}))};re.displayName="DeleteTwoTone";var se=s.forwardRef(re),ce=e(78730),me=e(1166),p=e(20423),m=e(31810),ve=e(58110),fe=e(2800),he=e(43267),t=e(43010),_e=function(n){var l=n.visible,y=n.onCancel,S=n.actionReload,N=m.Z.useForm(),G=c()(N,1),z=G[0],A=(0,x.useRequest)(T.do,{manual:!0,onSuccess:function(){f.ZP.success("\u521B\u5EFA\u6210\u529F"),y(),S()}}),V=A.run,J=A.loading,F=(0,x.useRequest)(T.Vl,{manual:!0}),O=F.run,_=F.data;return(0,s.useEffect)(function(){l&&O()},[l]),(0,t.jsx)(ve.Z,{destroyOnClose:!0,title:"\u521B\u5EFA\u90E8\u95E8",open:l,onCancel:function(){return y()},footer:null,children:(0,t.jsxs)(m.Z,{form:z,onFinish:function(Q){return V(a()(a()({},Q),{},{action:"add"}))},layout:"vertical",size:"large",style:{paddingLeft:24,paddingRight:24},initialValues:{father:"0"},children:[(0,t.jsx)(m.Z.Item,{label:"\u90E8\u95E8\u540D\u79F0",name:"team_name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0"}],children:(0,t.jsx)(fe.Z,{placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0"})}),(0,t.jsx)(m.Z.Item,{label:"\u4E0A\u7EA7\u90E8\u95E8",name:"father",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8"}],children:(0,t.jsx)(he.Z,{style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treeDefaultExpandAll:!0,treeData:_})}),(0,t.jsx)(m.Z.Item,{children:(0,t.jsx)(b.ZP,{type:"primary",htmlType:"submit",loading:J,children:"\u65B0\u589E"})})]})})},ge=_e,De=function(n){var l=n.visible,y=n.onCancel,S=n.actionReload,N=n.teamId,G=m.Z.useForm(),z=c()(G,1),A=z[0],V=(0,x.useRequest)(T.do,{manual:!0,onSuccess:function(){f.ZP.success("\u521B\u5EFA\u6210\u529F"),y(),S()}}),J=V.run,F=V.loading,O=(0,x.useRequest)(T.Vl,{manual:!0}),_=O.run,M=O.data,Q=function(){var $=r()(u()().mark(function P(){var X,Y,le;return u()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,(0,T.oE)({teamId:N});case 2:X=U.sent,Y=X.success,le=X.data,Y&&A.setFieldsValue(a()({},le));case 6:case"end":return U.stop()}},P)}));return function(){return $.apply(this,arguments)}}();return(0,s.useEffect)(function(){l&&(_(),Q())},[l]),(0,t.jsx)(ve.Z,{destroyOnClose:!0,title:"\u4FEE\u6539\u90E8\u95E8\u8D44\u6599",open:l,onCancel:function(){return y()},footer:null,children:(0,t.jsxs)(m.Z,{form:A,onFinish:function(P){return J(a()(a()({},P),{},{action:"add"}))},layout:"vertical",size:"large",style:{paddingLeft:24,paddingRight:24},children:[(0,t.jsx)(m.Z.Item,{label:"\u90E8\u95E8\u540D\u79F0",name:"team_name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0"}],children:(0,t.jsx)(fe.Z,{placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0"})}),(0,t.jsx)(m.Z.Item,{label:"\u4E0A\u7EA7\u90E8\u95E8",name:"father",children:(0,t.jsx)(he.Z,{style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treeDefaultExpandAll:!0,treeData:M})}),(0,t.jsx)(m.Z.Item,{children:(0,t.jsx)(b.ZP,{type:"primary",htmlType:"submit",loading:F,children:"\u65B0\u589E"})})]})})},je=De,Re=e(61991),Ee=e(56314),pe=e(4451),Ce=function(){var n=(0,s.useRef)(),l=(0,s.useState)(""),y=c()(l,2),S=y[0],N=y[1],G=(0,s.useState)({}),z=c()(G,2),A=z[0],V=z[1],J=(0,me.Z)({createVisible:!1,updateVisible:!1,changeVisible:!1}),F=c()(J,2),O=F[0],_=F[1],M=(0,x.useRequest)(T.Vl),Q=M.data,$=M.loading,P=M.refresh,X=(0,x.useRequest)(T.do,{manual:!0,onSuccess:function(){f.ZP.success("\u5220\u9664\u6210\u529F"),P()}}),Y=X.run,le=function(){var d;(d=n.current)===null||d===void 0||d.reload(),P()},xe=[{title:"\u540D\u79F0",dataIndex:"nickname",hideInSearch:!0},{title:"\u89D2\u8272",dataIndex:"role_name"},{title:"\u90E8\u95E8",dataIndex:"teamsName",valueType:"select"},{title:"\u72B6\u6001",dataIndex:"status",valueEnum:{ok:{text:"\u6B63\u5E38",status:"Processing"},disabled:{text:"\u5DF2\u7981\u7528",status:"Error"},pending:{text:"\u5F85\u6FC0\u6D3B",status:"Default"}}},{title:"\u52A0\u5165\u65F6\u95F4",dataIndex:"create_time",valueType:"dateTime"},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(d,v){return[(0,t.jsx)("a",{onClick:function(){_({changeVisible:!0}),V(v)},children:"\u66F4\u6362\u90E8\u95E8"},"update"),(0,t.jsx)(Z.Z,{title:"\u786E\u8BA4\u5220\u9664?",onConfirm:function(){return Y({key:v.key})},children:(0,t.jsx)("a",{style:{color:"red"},children:"\u5220\u9664"})},"delete")]}}],U=function(d){var v=d.title,D=d.key,Te=d.users;return(0,t.jsxs)(B.Z,{style:{height:32,fontSize:16,width:"100%"},children:[(0,t.jsxs)(L.Z,{span:20,children:[v," ",(0,t.jsx)(ue.Z,{})," ",Te]}),D==="0"?null:(0,t.jsx)(Ee.Z,{accessKey:"enterprise.teams.manage",children:(0,t.jsx)(L.Z,{span:3,className:"enterpriseTeamAction",children:(0,t.jsxs)(o.Z,{children:[(0,t.jsx)(I.Z,{title:"\u7F16\u8F91",children:(0,t.jsx)("a",{onClick:function(){return _({updateVisible:!0})},children:(0,t.jsx)(ie,{})})}),(0,t.jsx)("a",{children:(0,t.jsx)(I.Z,{title:"\u5220\u9664",children:(0,t.jsx)(Z.Z,{title:"\u786E\u8BA4\u5220\u9664 ".concat(v,"?"),okText:"\u5220\u9664",cancelText:"\u53D6\u6D88",onConfirm:function(){return Y({action:"delete",team_id:D})},children:(0,t.jsx)(se,{})})})})]})})})]})},Ze=function(){var g=r()(u()().mark(function d(v){var D;return u()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:v&&v.length&&(N(v[0]),(D=n.current)===null||D===void 0||D.reload());case 1:case"end":return k.stop()}},d)}));return function(v){return g.apply(this,arguments)}}();return(0,t.jsxs)(ee.Z,{pageTitle:!1,pageGroup:"enterprise",pageActive:"teams",children:[(0,t.jsxs)(p.ZP,{split:"vertical",style:{minHeight:"80vh"},children:[(0,t.jsx)(p.ZP,{loading:$,title:(0,t.jsx)("span",{style:{paddingLeft:24},children:"\u90E8\u95E8\u5217\u8868"}),colSpan:"408px",ghost:!0,headerBordered:!0,extra:(0,t.jsx)(Ee.Z,{accessKey:"enterprise.teams.manage",children:(0,t.jsxs)(b.ZP,{type:"primary",onClick:function(){return _({createVisible:!0})},style:{marginRight:24},children:[(0,t.jsx)(ce.Z,{})," \u65B0\u5EFA\u90E8\u95E8"]},"primary")}),children:(0,t.jsx)(C.Z,{blockNode:!0,treeData:Q,titleRender:U,defaultExpandAll:!0,showLine:{showLeafIcon:!1},style:{paddingTop:12},onSelect:Ze,selectedKeys:[S]})}),(0,t.jsx)(p.ZP,{title:!1,children:(0,t.jsx)(te.ZP,{headerTitle:"\u90E8\u95E8\u4EBA\u5458\u5217\u8868",actionRef:n,rowKey:"uid",search:!1,request:function(d,v,D){return(0,T.xK)(a()(a()({},d),{},{sorter:v,filter:D,teamId:S}))},columns:xe,rowSelection:!1})})]}),(0,t.jsx)(ge,{visible:O.createVisible,actionReload:P,onCancel:function(){return _({createVisible:!1})}}),(0,t.jsx)(je,{visible:O.updateVisible,actionReload:P,onCancel:function(){return _({updateVisible:!1})},teamId:S}),(0,t.jsx)(Re.Z,{visible:O.changeVisible,actionReload:le,onCancel:function(){return _({changeVisible:!1})},values:A})]})},Pe=Ce},61991:function(q,h,e){var j=e(30279),a=e.n(j),R=e(46686),u=e.n(R),i=e(85170),r=e(31810),E=e(41318),c=e(58110),s=e(2800),f=e(43267),Z=e(16798),B=e(66694),L=e(22196),o=e(43010),I=function(C){var x=C.visible,ee=C.onCancel,T=C.actionReload,te=C.values,ue=r.Z.useForm(),K=u()(ue,1),H=K[0],oe=(0,i.useState)(""),w=u()(oe,2),ne=w[0],ie=w[1],ae=(0,L.useRequest)(B.yp,{manual:!0,onSuccess:function(){E.ZP.success("\u64CD\u4F5C\u6210\u529F"),ee(),T()}}),de=ae.run,re=ae.loading,se=(0,L.useRequest)(B.Vl,{manual:!0}),ce=se.run,me=se.data;return(0,i.useEffect)(function(){if(x){var p=te.userid;ie(p),H.resetFields(),H.setFieldsValue(a()({},te)),ce()}},[x]),(0,o.jsx)(c.Z,{destroyOnClose:!0,title:"\u66F4\u6362\u90E8\u95E8",open:x,onCancel:function(){return ee()},footer:null,children:(0,o.jsxs)(r.Z,{form:H,onFinish:function(m){return de(a()(a()({},m),{},{userid:ne}))},layout:"vertical",size:"large",style:{paddingLeft:24,paddingRight:24},children:[(0,o.jsx)(r.Z.Item,{label:"\u6210\u5458\u540D\u79F0",name:"nickname",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6210\u5458\u540D\u79F0"}],children:(0,o.jsx)(s.Z,{placeholder:"\u8BF7\u8F93\u5165\u6210\u5458\u540D\u79F0",disabled:!0})}),(0,o.jsx)(r.Z.Item,{label:"\u6240\u5C5E\u90E8\u95E8",name:"teams",children:(0,o.jsx)(f.Z,{style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treeDefaultExpandAll:!0,treeData:me,multiple:!0})}),(0,o.jsx)(r.Z.Item,{children:(0,o.jsx)(Z.ZP,{type:"primary",htmlType:"submit",loading:re,children:"\u4FDD\u5B58"})})]})})};h.Z=I},4451:function(){}}]);
