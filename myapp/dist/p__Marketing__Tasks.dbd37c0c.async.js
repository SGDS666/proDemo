"use strict";(self.webpackChunklaifaxin_web=self.webpackChunklaifaxin_web||[]).push([[2714],{25536:function(ke,Y,t){t.d(Y,{Z:function(){return M}});var X=t(75782),v=t(85170),he={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},p=he,me=t(70325),k=function(K,ne){return v.createElement(me.Z,(0,X.Z)((0,X.Z)({},K),{},{ref:ne,icon:p}))};k.displayName="CheckCircleOutlined";var M=v.forwardRef(k)},74907:function(ke,Y,t){t.d(Y,{Z:function(){return M}});var X=t(75782),v=t(85170),he={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4 66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z"}},{tag:"path",attrs:{d:"M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"close-circle",theme:"outlined"},p=he,me=t(70325),k=function(K,ne){return v.createElement(me.Z,(0,X.Z)((0,X.Z)({},K),{},{ref:ne,icon:p}))};k.displayName="CloseCircleOutlined";var M=v.forwardRef(k)},55578:function(ke,Y,t){t.d(Y,{Z:function(){return M}});var X=t(75782),v=t(85170),he={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"},p=he,me=t(70325),k=function(K,ne){return v.createElement(me.Z,(0,X.Z)((0,X.Z)({},K),{},{ref:ne,icon:p}))};k.displayName="MinusCircleOutlined";var M=v.forwardRef(k)},29633:function(ke,Y,t){t.d(Y,{X:function(){return v}});var X=t(85170),v=(0,X.createContext)({})},10439:function(ke,Y,t){var X=t(30279),v=t.n(X),he=t(46686),p=t.n(he),me=t(85170),k=t(43520),M=t(6771),te=t(42147),K=t(28931),ne=t(34833),_=t(1406),P=t(45393),De=t.n(P),Be=t(30082),Ze=t(69602),G=t(24862),ce=t(74637),ze=t.n(ce),S=t(43010),Pe=k.Z.Option,we=[{label:"\u6628\u5929",desc:"\u6628\u5929\u4E00\u5929",value:"yestoday"},{label:"\u4ECA\u5929",desc:"\u4ECA\u5929\u4E00\u5929",value:"today"},{label:"\u524D24\u5C0F\u65F6",desc:"\u6B64\u524D24\u5C0F\u65F6\u4E4B\u5185",value:"last24Hours"},{label:"\u672C\u5468",desc:"\u672C\u5468\u661F\u671F\u4E00\u5230\u661F\u671F\u5929",value:"thisIsoWeek"},{label:"\u4E0A\u5468",desc:"\u4E0A\u5468\u661F\u671F\u4E00\u5230\u661F\u671F\u5929",value:"lastIsoWeek"},{label:"\u672C\u6708\u4EFD",desc:"\u672C\u67081\u53F7\u5F00\u59CB\u5230\u6708\u5E95",value:"thisMonth"},{label:"\u4E0A\u6708\u4EFD",desc:"\u4E0A\u67081\u53F7\u5F00\u59CB\u5230\u4E0A\u6708\u6708\u5E95",value:"lastMonth"},{label:"\u524D7\u5929",desc:"\u6628\u5929\u5F00\u59CB\u5F80\u524D7\u5929",value:"last7Days"},{label:"\u524D30\u5929",desc:"\u6628\u5929\u5F00\u59CB\u5F80\u524D30\u5929",value:"last30Days"},{label:"\u524D60\u5929",desc:"\u6628\u5929\u5F00\u59CB\u5F80\u524D60\u5929",value:"last60Days"},{label:"\u524D90\u5929",desc:"\u6628\u5929\u5F00\u59CB\u5F80\u524D90\u5929",value:"last90Days"},{label:"\u524D180\u5929",desc:"\u6628\u5929\u5F00\u59CB\u5F80\u524D180\u5929",value:"last180Days"},{label:"\u524D365\u5929",desc:"\u6628\u5929\u5F00\u59CB\u5F80\u524D365\u5929",value:"last365Days"}],xe=function(s){var b=s.name,D=s.onChange,h=s.value,E=(0,me.useState)(ze()().format("YYYY-MM-DD")),W=p()(E,2),V=W[0],Fe=W[1],ie=function(z){var q=z.label;return(0,S.jsx)(M.Z,{title:"".concat(b,": ").concat(q),children:(0,S.jsxs)("div",{className:Ze.Z.stardardDateFilterSelected,children:[q," ",(0,S.jsx)(G.Z,{})]})})},J=function(z,q){q&&(Fe(q),D(q))},re=function(z){z&&V&&D(V)};return(0,S.jsx)(k.Z,v()(v()({},s),{},{placeholder:(0,S.jsxs)("div",{style:{color:"#383838",textAlign:"center"},children:[b," ",(0,S.jsx)(G.Z,{})]}),allowClear:!0,showSearch:!0,bordered:!1,showArrow:!1,optionFilterProp:"label",optionLabelProp:"label",className:Ze.Z.stardardFilter,dropdownStyle:{minWidth:280},dropdownRender:function(z){return(0,S.jsxs)(S.Fragment,{children:[z,(0,S.jsx)(te.Z,{style:{margin:"8px 0"}}),(0,S.jsxs)(K.Z,{style:{padding:"0 8px 4px"},children:[(0,S.jsx)("span",{children:(0,S.jsx)(ne.Z,{checked:h===V,onChange:function(T){return re(T.target.checked)},children:"\u81EA\u9009\u65E5\u671F"})}),(0,S.jsx)(_.Z,{locale:Be.Z,onChange:J,value:ze()(V),allowClear:!1,autoFocus:!0,getPopupContainer:function(T){return T.parentNode},popupStyle:{width:300,height:300,minWidth:300}})]})]})},children:we.map(function(Q){var z=Q.label,q=Q.desc,T=Q.value;return(0,S.jsxs)(Pe,{label:ie(Q),value:T,children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{style:{fontWeight:"bold"},children:z}),(0,S.jsx)("div",{style:{fontSize:12,color:"#888"},children:q})]})," "]},T)})}))};Y.Z=xe},27034:function(ke,Y,t){t.r(Y),t.d(Y,{default:function(){return Vt}});var X=t(35290),v=t.n(X),he=t(411),p=t.n(he),me=t(46686),k=t.n(me),M=t(85170),te=t(41318),K=t(58110),ne=t(6771),_=t(42147),P=t(49871),De=t(40838),Be=t(33285),Ze=t(96498),G=t(46394),ce=t(31810),ze=t(43267),S=t(43520),Pe=t(2800),we=t(28931),xe=t(16798),Xe=t(37922),s=t(88208),b=t(13949),D=t(1166),h=t(22196),E=t(83655),W=t(73477),V=t(25536),Fe=t(42109),ie=t(74907),J=t(55578),re=t(45850),Q=t(24862),z=t(78730),q=t(30279),T=t.n(q),Ve=t(75782),Ge={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},Ne=Ge,Je=t(70325),je=function(m,y){return M.createElement(Je.Z,(0,Ve.Z)((0,Ve.Z)({},m),{},{ref:y,icon:Ne}))};je.displayName="ArrowLeftOutlined";var nt=M.forwardRef(je),rt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-260 72h96v209.9L621.5 312 572 347.4V136zm220 752H232V136h280v296.9c0 3.3 1 6.6 3 9.3a15.9 15.9 0 0022.3 3.7l83.8-59.9 81.4 59.4c2.7 2 6 3.1 9.4 3.1 8.8 0 16-7.2 16-16V136h64v752z"}}]},name:"book",theme:"outlined"},at=rt,$e=function(m,y){return M.createElement(Je.Z,(0,Ve.Z)((0,Ve.Z)({},m),{},{ref:y,icon:at}))};$e.displayName="BookOutlined";var Qe=M.forwardRef($e),j=t(13590),qe=t(11039),Ke=t(77070),et=t(29633),_e={main:"main___aPSaM",leftMenu:"leftMenu___Nu2Lv",right:"right___VSmVB",title:"title___fUUS3",readFont:"readFont___k8cYw",unreadFont:"unreadFont___IU0P3","table-row-action-button":"table-row-action-button___q5rSw","editable-row":"editable-row___zhlCj"},ct=t(56888),dt=t(48865),st={main:"main___Io1Ob",leftMenu:"leftMenu___TcH9Z",headerInfo:"headerInfo___NyLfm",right:"right___s8paL",title:"title___M0mor",readFont:"readFont___jYIRD",unreadFont:"unreadFont___pkilf"},ut=t(36765),Re=t(88665),e=t(43010),ft={gtid:"",sid:"",from:"",to:"",create_time:0,subject:"",html:"",read_num:0,read_time:0,read_recently:0,click_num:0,click_time:0,click_recently:0,success:!1,error:""},ht=function(m){var y=m.visible,d=m.onCancel,Z=m.current,R=(0,D.Z)({gtid:"",sid:"",from:"",to:"",create_time:0,subject:"",html:"",htmlId:"",markId:"",read_num:0,read_time:0,read_recently:0,click_num:0,click_time:0,click_recently:0,error:"",status:"error"}),x=k()(R,2),u=x[0],O=x[1],ee=u.gtid,I=u.sid,w=u.from,ae=u.to,de=u.create_time,L=u.subject,N=u.html,se=u.read_num,oe=u.read_time,le=u.read_recently,Ce=u.click_num,ve=u.click_time,be=u.click_recently,Ee=u.status,H=u.error;(0,M.useEffect)(function(){y&&O(T()(T()({},ft),Z))},[y]);var $=function(){var r=p()(v()().mark(function l(){var o,f;return v()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(o=u.htmlId,!o){g.next=8;break}return g.next=4,(0,b.d_)({id:o});case 4:if(f=g.sent,!(f&&f.html)){g.next=8;break}return O({html:f.html}),g.abrupt("return");case 8:O({html:"<p>null</p>"});case 9:case"end":return g.stop()}},l)}));return function(){return r.apply(this,arguments)}}(),C=function(){d()};return(0,e.jsx)(ut.Z,{title:!1,placement:"left",onClose:C,open:y,width:640,children:(0,e.jsxs)(j.Z,{title:"\u53D1\u9001\u8BE6\u60C5",column:2,size:"small",layout:"vertical",bordered:!0,children:[(0,e.jsx)(j.Z.Item,{label:"\u4EFB\u52A1ID",children:ee}),(0,e.jsx)(j.Z.Item,{label:"\u53D1\u9001ID",children:I}),(0,e.jsx)(j.Z.Item,{label:"\u53D1\u4FE1\u5730\u5740",children:w}),(0,e.jsx)(j.Z.Item,{label:"\u6536\u4FE1\u5730\u5740",children:ae}),(0,e.jsx)(j.Z.Item,{label:"\u53D1\u9001\u65F6\u95F4",children:(0,Re.pV)(de)}),(0,e.jsx)(j.Z.Item,{label:"\u53D1\u9001\u7ED3\u679C",children:Ee==="success"?"\u6210\u529F":"\u5931\u8D25"}),(0,e.jsx)(j.Z.Item,{label:"\u9519\u8BEF\u63D0\u793A",span:2,children:H}),(0,e.jsx)(j.Z.Item,{label:"\u9605\u8BFB\u6B21\u6570",children:se}),(0,e.jsx)(j.Z.Item,{label:"\u70B9\u51FB\u6B21\u6570",children:Ce}),(0,e.jsx)(j.Z.Item,{label:"\u9996\u6B21\u9605\u8BFB",children:(0,Re.pV)(oe)}),(0,e.jsx)(j.Z.Item,{label:"\u9996\u6B21\u70B9\u51FB",children:(0,Re.pV)(ve)}),(0,e.jsx)(j.Z.Item,{label:"\u6700\u8FD1\u9605\u8BFB",children:(0,Re.pV)(le)}),(0,e.jsx)(j.Z.Item,{label:"\u6700\u8FD1\u70B9\u51FB",children:(0,Re.pV)(be)}),(0,e.jsx)(j.Z.Item,{label:"\u90AE\u4EF6\u4E3B\u9898",span:2,children:L}),(0,e.jsx)(j.Z.Item,{label:"\u90AE\u4EF6\u6B63\u6587",children:N?(0,e.jsx)("div",{dangerouslySetInnerHTML:{__html:N}}):(0,e.jsx)("a",{onClick:$,children:"\u663E\u793A\u90AE\u4EF6\u6B63\u6587"})})]})})},mt=ht,vt=t(43525),gt=t(10248),xt=t(36541),jt=function(m){var y=m.visible,d=m.onCancel,Z=m.changeType,R=m.setCount,x=m.gtid,u=m.status,O=ce.Z.useForm(),ee=k()(O,1),I=ee[0],w=(0,D.Z)({changeField:null,changeValue:null,tagsOptions:[],tagsItem:{}}),ae=k()(w,2),de=ae[0],L=ae[1],N=(0,h.useRequest)(gt.vs,{manual:!0,onSuccess:function($){!$||L({tagsItem:{belongTo:"contact",dataIndex:"tags",items:$}})}}),se=N.run,oe=(0,h.useRequest)(b.j9,{manual:!0,onSuccess:function(){te.ZP.success("\u6807\u7B7E\u66F4\u65B0\u6210\u529F"),d(),I.resetFields()}}),le=oe.run;(0,M.useEffect)(function(){y&&se()},[y]);var Ce=function(){var H=p()(v()().mark(function $(){var C,r;return v()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,I.validateFields();case 3:if(C=o.sent,r=C.changeValue,!(!r||!r.length)){o.next=8;break}return te.ZP.error("\u6807\u7B7E\u4E0D\u80FD\u4E3A\u7A7A"),o.abrupt("return");case 8:le({gtid:x,status:u,tags:r,type:Z}),o.next=14;break;case 11:o.prev=11,o.t0=o.catch(0),console.log("Failed:",o.t0);case 14:case"end":return o.stop()}},$,null,[[0,11]])}));return function(){return H.apply(this,arguments)}}(),ve=function($){L(T()({},$))},be=function(){return Z==="add"?(0,e.jsxs)("div",{children:["\u8D34\u6807\u7B7E (\u5DF2\u9009\u62E9",(0,e.jsx)("a",{children:R}),"\u4E2A\u8054\u7CFB\u4EBA)"]}):(0,e.jsxs)("div",{children:["\u6495\u6807\u7B7E (\u5DF2\u9009\u62E9",(0,e.jsx)("a",{children:R}),"\u4E2A\u8054\u7CFB\u4EBA)"]})},Ee=function(){return Z==="add"?(0,e.jsx)("div",{style:{fontSize:16},children:"\u6DFB\u52A0\u4EE5\u4E0B\u6807\u7B7E (\u53EF\u9009\u62E9\u591A\u4E2A)"}):(0,e.jsx)("div",{style:{fontSize:16},children:"\u5220\u9664\u4EE5\u4E0B\u6807\u7B7E (\u53EF\u9009\u62E9\u591A\u4E2A)"})};return(0,e.jsx)(K.Z,{title:be(),width:480,bodyStyle:{padding:"24px 48px 24px"},destroyOnClose:!0,open:y,onCancel:d,okText:"\u786E\u5B9A",onOk:Ce,children:(0,e.jsxs)("div",{children:[(0,e.jsx)(vt.Z,{message:"\u76F4\u63A5\u8F93\u5165\u65B0\u6807\u7B7E\u540D\u79F0\u53EF\u81EA\u52A8\u521B\u5EFA",type:"info",showIcon:!0,style:{marginBottom:12}}),(0,e.jsx)(ce.Z,{layout:"vertical",form:I,onValuesChange:ve,children:(0,e.jsx)(ce.Z.Item,{label:Ee(),name:"changeValue",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6807\u7B7E"}],children:(0,e.jsx)(xt.Z,{field:de.tagsItem,size:"large"})})})]})})},pt=jt,Se=function(m){var y=m.name,d=m.count;return(0,e.jsxs)(Ze.Z,{children:[(0,e.jsx)(G.Z,{span:18,children:(0,e.jsx)("span",{children:y})}),(0,e.jsx)(G.Z,{span:6,children:(0,e.jsx)("span",{children:d})})]})},Ct=function(m){var y=(0,M.useRef)(),d=m.task,Z=(0,D.Z)({loading:!1,selectKey:"delivered",detailsVisible:!1,current:{},tagsCount:0,setTagsVisible:!1,logsTotal:0,changeType:"add"}),R=k()(Z,2),x=R[0],u=R[1],O=d.gtid,ee=d.total_count,I=d.send_count,w=d.error_count,ae=d.opened_num,de=d.clicked_num,L=d.bounced_count,N=d.unsubscribed,se=d.spamreports,oe=d.notsent_count,le=d.reply_num,Ce=[{title:"\u5E8F\u53F7",dataIndex:"id",valueType:"indexBorder",tip:"\u5E8F\u53F7id,\u7CFB\u7EDF\u81EA\u52A8\u751F\u6210"},{title:"\u53D1\u4FE1\u5730\u5740",dataIndex:"from",valueType:"text"},{title:"\u6536\u4FE1\u5730\u5740",dataIndex:"to",valueType:"text"},{title:"\u9605\u8BFB\u6B21\u6570",dataIndex:"read_num",sorter:function(r,l){return r.read_num-l.read_num},sortDirections:["descend","ascend"]},{title:"\u70B9\u51FB\u6B21\u6570",dataIndex:"click_num",sorter:function(r,l){return r.click_num-l.click_num},sortDirections:["descend","ascend"]},{title:"\u53D1\u9001\u65F6\u95F4",dataIndex:"create_time",hideInSearch:!0,valueType:"dateTime"},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(r,l){return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("a",{onClick:function(){return u({detailsVisible:!0,current:l})},children:"\u66F4\u591A\u4FE1\u606F"})})}}],ve=function(){y.current&&y.current.reload()},be=function(r){u({selectKey:r}),ve()},Ee=function(){var C=p()(v()().mark(function r(l,o,f){var A,g;return v()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return A=x.selectKey,f=T()(T()({},f),{},{gtid:O,status:A}),U.next=4,(0,b.Oe)(T()(T()({},l),{},{sorter:o,filter:f}));case 4:return g=U.sent,u({logsTotal:g.total}),U.abrupt("return",g);case 7:case"end":return U.stop()}},r)}));return function(l,o,f){return C.apply(this,arguments)}}(),H=function(){var C=p()(v()().mark(function r(l){return v()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:u({setTagsVisible:!0,changeType:l});case 1:case"end":return f.stop()}},r)}));return function(l){return C.apply(this,arguments)}}(),$=function(){var r=x.selectKey;return r==="total"?"\u53D1\u9001 ".concat(ee):r==="error"?"\u5931\u8D25 ".concat(w):r==="delivered"?"\u9001\u8FBE ".concat(I):r==="opened"?"\u9605\u8BFB ".concat(ae):r==="reply"?"\u56DE\u590D ".concat(le):r==="clicked"?"\u70B9\u51FB ".concat(de):r==="bounced"?"\u9000\u4FE1 ".concat(L):r==="unsubscribed"?"\u9000\u8BA2 ".concat(N):r==="spamreports"?"\u6295\u8BC9 ".concat(se):r==="notsent"?"\u672A\u53D1\u9001 ".concat(oe):null};return(0,e.jsxs)("div",{className:st.main,children:[(0,e.jsx)("div",{className:st.leftMenu,children:(0,e.jsx)(ct.Z,{mode:"inline",selectedKeys:[x.selectKey],onClick:function(r){var l=r.key;return be(l)},items:[{key:"total",label:(0,e.jsx)(Se,{name:"\u53D1\u9001",count:ee})},{key:"error",label:(0,e.jsx)(Se,{name:"\u5931\u8D25",count:w})},{key:"delivered",label:(0,e.jsx)(Se,{name:"\u9001\u8FBE",count:I})},{key:"opened",label:(0,e.jsx)(Se,{name:"\u9605\u8BFB",count:ae})},{key:"clicked",label:(0,e.jsx)(Se,{name:"\u70B9\u51FB",count:de})},{key:"bounced",label:(0,e.jsx)(Se,{name:"\u9000\u4FE1",count:L})},{key:"unsubscribed",label:(0,e.jsx)(Se,{name:"\u9000\u8BA2",count:N})},{key:"spamreports",label:(0,e.jsx)(Se,{name:"\u6295\u8BC9",count:se})},{key:"notsent",label:(0,e.jsx)(Se,{name:"\u672A\u53D1\u9001",count:oe})}]})}),(0,e.jsx)("div",{className:st.right,children:(0,e.jsx)(dt.ZP,{headerTitle:$(),actionRef:y,rowKey:"to",toolBarRender:function(){return x.logsTotal?[(0,e.jsx)(xe.ZP,{type:"primary",onClick:function(){return H("add")},children:"\u8D34\u6807\u7B7E"},"addTags"),(0,e.jsx)(xe.ZP,{onClick:function(){return H("remove")},children:"\u6495\u6807\u7B7E"},"delTags")]:[]},tableAlertRender:function(r){var l=r.selectedRowKeys;return(0,e.jsxs)("div",{children:["\u5DF2\u9009\u62E9 ",(0,e.jsx)("a",{style:{fontWeight:600},children:l.length})," \u9879\xA0\xA0"]})},request:function(r,l,o){return Ee(r,l,o)},columns:Ce,rowSelection:!1,search:!1})}),(0,e.jsx)(mt,{visible:x.detailsVisible,onCancel:function(){return u({detailsVisible:!1})},current:x.current}),(0,e.jsx)(pt,{visible:x.setTagsVisible,onCancel:function(){return u({setTagsVisible:!1})},changeType:x.changeType,setCount:x.logsTotal,gtid:O,status:x.selectKey})]})},bt=Ct,Me=t(20423),We=function(m){var y=m.title,d=m.per,Z=m.sub1Title,R=m.sub1Value,x=m.sub2Title,u=m.sub2Value;return(0,e.jsxs)(Ze.Z,{gutter:24,children:[(0,e.jsxs)(G.Z,{sm:12,xs:12,children:[(0,e.jsx)("div",{style:{fontSize:24},children:(0,e.jsxs)("span",{style:{marginRight:10,fontWeight:500},children:[y," ",(0,e.jsxs)("a",{children:[d,"%"]})]})}),(0,e.jsx)("div",{style:{marginTop:24,fontSize:16},children:(0,e.jsxs)(Ze.Z,{children:[(0,e.jsx)(G.Z,{span:18,children:(0,e.jsx)("span",{children:Z})}),(0,e.jsx)(G.Z,{span:6,children:(0,e.jsx)("span",{children:R})})]})}),(0,e.jsx)(_.Z,{style:{marginTop:10}}),(0,e.jsx)("div",{style:{marginTop:24,fontSize:16},children:(0,e.jsxs)(Ze.Z,{children:[(0,e.jsx)(G.Z,{span:18,children:(0,e.jsx)("span",{children:x})}),(0,e.jsx)(G.Z,{span:6,children:(0,e.jsx)("span",{children:u})})]})}),(0,e.jsx)(_.Z,{style:{marginTop:10}})]}),(0,e.jsx)(G.Z,{sm:12,xs:12,children:(0,e.jsx)("div",{style:{marginTop:24,textAlign:"center"},children:(0,e.jsx)(De.Z,{type:"circle",percent:d,status:"normal"})})})]})},Et=function(m){var y=m.delivered,d=m.opened,Z=m.clicked,R=m.sended,x=m.downed;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(Me.ZP,{gutter:8,title:!1,children:[(0,e.jsx)(Me.ZP,{colSpan:{xs:24,sm:8},layout:"center",bordered:!0,children:We(R)}),(0,e.jsx)(Me.ZP,{colSpan:{xs:24,sm:8},layout:"center",bordered:!0,children:We(y)}),(0,e.jsx)(Me.ZP,{colSpan:{xs:24,sm:8},layout:"center",bordered:!0,children:We(d)})]}),(0,e.jsxs)(Me.ZP,{style:{marginTop:12},gutter:8,title:!1,children:[(0,e.jsx)(Me.ZP,{colSpan:{xs:24,sm:8},layout:"center",bordered:!0,children:We(Z)}),(0,e.jsx)(Me.ZP,{colSpan:{xs:24,sm:8},layout:"center",bordered:!0,children:We(x)})]})]})},yt=Et,Zt=function(m){var y=m.visible,d=m.onCancel,Z=m.gtid,R=m.name,x=m.taskReload,u=(0,D.Z)({name:"",gtid:""}),O=k()(u,2),ee=O[0],I=O[1],w=(0,h.useRequest)(b.A1,{manual:!0,onSuccess:function(){te.ZP.success("\u4EFB\u52A1\u540D\u79F0\u4FEE\u6539\u6210\u529F"),d(),x()}}),ae=w.run,de=function(){var L=p()(v()().mark(function N(){var se;return v()().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:se=ee.name,ae({gtid:Z,name:se});case 2:case"end":return le.stop()}},N)}));return function(){return L.apply(this,arguments)}}();return(0,M.useEffect)(function(){y&&I({name:R,gtid:Z})},[y]),(0,e.jsx)(K.Z,{destroyOnClose:!0,width:420,title:null,open:y,onCancel:function(){return d()},footer:null,children:(0,e.jsxs)("div",{style:{textAlign:"center"},children:[(0,e.jsx)("div",{style:{fontSize:16,fontWeight:550},children:"\u4FEE\u6539\u4EFB\u52A1\u540D\u79F0"}),(0,e.jsx)(Pe.Z,{style:{width:360,marginTop:24,marginBottom:36},size:"large",value:ee.name,onChange:function(N){return I({name:N.target.value})}}),(0,e.jsx)(xe.ZP,{type:"primary",onClick:de,children:"\u4FDD\u5B58"})]})})},Ft=Zt,it={gtid:"",channel:1,name:"",status:"",create_time:0,timeStart:0,update_time:0,finish_time:0,send_time:0,total_count:0,send_count:0,balance:0,sendCount:0,senders:[],senderMore:!1,senderList:[],subjects:[],subjectMore:!1,subjectList:[],contents:[],contentMore:!1,contentList:[]},ot={waiting:"\u7B49\u5F85\u5BA1\u6838",deny:"\u7B49\u5F85\u88AB\u62D2",running:"\u8FD0\u884C\u4E2D",finished:"\u5DF2\u5B8C\u6210",draft:"\u8349\u7A3F",pause:"\u5DF2\u6682\u505C",schedule:"\u5B9A\u65F6\u4E2D"},St=function(m){var y=m.visible,d=m.onCancel,Z=m.current,R=(0,D.Z)(T()({},it)),x=k()(R,2),u=x[0],O=x[1],ee=u.gtid,I=u.channel,w=u.name,ae=u.timeStart,de=u.finish_time,L=u.total_count,N=u.send_count,se=u.bounced_count,oe=u.notsent_count,le=function(){var r=p()(v()().mark(function l(){var o,f;return v()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return O({contentMore:!0}),o=u.contents,g.next=4,(0,b.q)({type:"content",ids:o});case 4:f=g.sent,f&&O({contentList:f});case 6:case"end":return g.stop()}},l)}));return function(){return r.apply(this,arguments)}}();(0,M.useEffect)(function(){y&&(O(T()({},it)),O(T()({},Z)))},[y]);var Ce=function(){d()},ve=function(){var l=u.status;return ot[l]?ot[l]:l},be=function(){var r=p()(v()().mark(function l(){var o,f;return v()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return O({senderMore:!0}),o=u.senders,g.next=4,(0,b.q)({type:"sender",ids:o});case 4:f=g.sent,f&&O({senderList:f});case 6:case"end":return g.stop()}},l)}));return function(){return r.apply(this,arguments)}}(),Ee=function(){var l=u.senders,o=u.senderMore,f=u.senderList;return o?(0,e.jsxs)("div",{children:["\u6570\u91CF\uFF1A",l.length,f.map(function(A){return(0,e.jsxs)("div",{children:[(0,e.jsx)(_.Z,{style:{marginTop:12,marginBottom:12}}),(0,e.jsxs)("div",{children:[A.mail_addr,"(",A.mail_name,")"]})]},A.mail_addr)})]}):(0,e.jsxs)("div",{children:["\u6570\u91CF\uFF1A",l.length," ",(0,e.jsx)("a",{onClick:be,children:"\u663E\u793A\u8BE6\u7EC6"})]})},H=function(){var r=p()(v()().mark(function l(){var o,f;return v()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return O({subjectMore:!0}),o=u.subjects,g.next=4,(0,b.q)({type:"subject",ids:o});case 4:f=g.sent,f&&O({subjectList:f});case 6:case"end":return g.stop()}},l)}));return function(){return r.apply(this,arguments)}}(),$=function(){var l=u.subjects,o=u.subjectMore,f=u.subjectList;return o?(0,e.jsxs)("div",{children:["\u6570\u91CF\uFF1A",l.length,f.map(function(A){return(0,e.jsxs)("div",{children:[(0,e.jsx)(_.Z,{style:{marginTop:12,marginBottom:12}}),(0,e.jsx)("div",{children:A.subject})]},A.subject)})]}):(0,e.jsxs)("div",{children:["\u6570\u91CF\uFF1A",l.length," ",(0,e.jsx)("a",{onClick:H,children:"\u663E\u793A\u8BE6\u7EC6"})]})},C=function(){var l=u.contents,o=u.contentMore,f=u.contentList;return o?(0,e.jsxs)("div",{children:["\u6570\u91CF\uFF1A",l.length,f.map(function(A){return(0,e.jsxs)("div",{children:[(0,e.jsx)(_.Z,{style:{marginTop:12,marginBottom:12}}),(0,e.jsx)("div",{dangerouslySetInnerHTML:{__html:A.html}})]},A.id)})]}):(0,e.jsxs)("div",{children:["\u6570\u91CF\uFF1A",l.length," ",(0,e.jsx)("a",{onClick:le,children:"\u663E\u793A\u8BE6\u7EC6"})]})};return(0,e.jsx)(ut.Z,{title:!1,placement:"right",onClose:Ce,open:y,width:640,children:(0,e.jsxs)(j.Z,{title:"\u4EFB\u52A1\u8BE6\u60C5",column:2,size:"small",layout:"vertical",bordered:!0,children:[(0,e.jsxs)(j.Z.Item,{label:"\u4EFB\u52A1ID",children:[ee," "]}),(0,e.jsx)(j.Z.Item,{label:"\u4EFB\u52A1\u540D\u79F0",children:w}),(0,e.jsx)(j.Z.Item,{label:"\u53D1\u9001\u6E20\u9053",children:I===1?"\u81EA\u6709\u90AE\u7BB1":"\u7CFB\u7EDF\u90AE\u7BB1"}),(0,e.jsx)(j.Z.Item,{label:"\u72B6\u6001",children:ve()}),(0,e.jsx)(j.Z.Item,{label:"\u603B\u6570",children:L}),(0,e.jsx)(j.Z.Item,{label:"\u6210\u529F",children:N}),(0,e.jsx)(j.Z.Item,{label:"\u9000\u4FE1",children:se}),(0,e.jsx)(j.Z.Item,{label:"\u672A\u53D1\u9001",children:oe}),(0,e.jsx)(j.Z.Item,{label:"\u53D1\u4FE1\u90AE\u7BB1",span:2,children:Ee()}),(0,e.jsx)(j.Z.Item,{label:"\u90AE\u4EF6\u4E3B\u9898",span:2,children:$()}),(0,e.jsx)(j.Z.Item,{label:"\u90AE\u4EF6\u5185\u5BB9",span:2,children:C()})]})})},Dt=St,Bt=t(74637),tt=t.n(Bt),Tt=t(4587),Le=t.n(Tt),At={waiting:"\u7B49\u5F85\u5BA1\u6838",deny:"\u7B49\u5F85\u88AB\u62D2",running:"\u8FD0\u884C\u4E2D",finished:"\u5DF2\u5B8C\u6210",draft:"\u8349\u7A3F",pause:"\u5DF2\u6682\u505C",schedule:"\u5B9A\u65F6\u4E2D",revoke:"\u5DF2\u64A4\u9500"},Ot=function(m){var y=m.onCancel,d=m.gtid,Z=(0,D.Z)({tabActiveKey:"performance",loading:!1,task:{},sended:{title:"\u53D1\u9001\u7387",per:0,sub1Title:"\u63D0\u4EA4\u4EBA\u6570",sub1Value:0,sub2Title:"\u53D1\u9001\u4EBA\u6570",sub2Value:0},delivered:{title:"\u9001\u8FBE\u7387",per:0,sub1Title:"\u53D1\u9001\u4EBA\u6570",sub1Value:0,sub2Title:"\u9001\u8FBE\u4EBA\u6570",sub2Value:0},opened:{title:"\u9605\u8BFB\u7387",per:0,sub1Title:"\u9605\u8BFB\u4EBA\u6570",sub1Value:0,sub2Title:"\u9605\u8BFB\u4EBA\u6B21",sub2Value:0},clicked:{title:"\u70B9\u51FB\u7387",per:0,sub1Title:"\u70B9\u51FB\u4EBA\u6570",sub1Value:0,sub2Title:"\u70B9\u51FB\u4EBA\u6B21",sub2Value:0},downed:{title:"\u4E0B\u8F7D\u7387",per:0,sub1Title:"\u4E0B\u8F7D\u4EBA\u6570",sub1Value:0,sub2Title:"\u4E0B\u8F7D\u4EBA\u6B21",sub2Value:0},senderNum:0,subjectNum:0,contentNum:0,inforVisiable:!1,taskName:"",editTaskName:!1}),R=k()(Z,2),x=R[0],u=R[1],O=x.delivered,ee=x.opened,I=x.clicked,w=x.sended,ae=x.downed,de=function(r){u({tabActiveKey:r})},L=function(){var r=x.tabActiveKey;switch(r){case"recipients":return(0,e.jsx)(bt,{task:x.task});case"performance":return(0,e.jsx)(yt,{delivered:O,opened:ee,clicked:I,sended:w,downed:ae});default:break}return null},N=function(r,l,o,f){if(!r)return null;var A=l;return r===2&&(A=l-f+o/20),(0,e.jsxs)("div",{children:[(0,e.jsx)("a",{children:A}),"\u5C01",r===2?(0,e.jsxs)("span",{children:["(\u989D\u5EA6\u6D88\u8017",(0,e.jsx)("a",{children:l}),"\u4E2A",o?(0,e.jsxs)("span",{children:[", \u4F59\u989D\u8D2D\u4E70",(0,e.jsx)("a",{children:o/20}),"\u4E2A"]}):null,f?(0,e.jsxs)("span",{children:[", \u8FD4\u8FD8\u989D\u5EA6",(0,e.jsx)("a",{children:f}),"\u4E2A"]}):null,")"]}):null]})},se=function(r){var l=r.create_time,o=r.timeStart;return o?tt()(o).format("YYYY-MM-DD HH:mm:ss"):tt()(l).format("YYYY-MM-DD HH:mm:ss")},oe=function(r){if(!r)return"";var l=r.views,o=r.tags,f=l.map(function(g){var ye=g.name,U=g.id;return(0,e.jsx)(ne.Z,{title:"\u89C6\u56FE",children:(0,e.jsx)(P.Z,{color:"success",children:ye})},U)}),A=o.map(function(g){var ye=g.name,U=g.id,Ae=g.color;return(0,e.jsx)(ne.Z,{title:"\u6807\u7B7E",children:(0,e.jsx)(P.Z,{color:Ae,children:ye})},U)});return(0,e.jsxs)("span",{children:[f,A]})},le=function(){var r=x.task,l=r.channel,o=r.create_time,f=r.finish_time,A=r.notsent_count,g=r.balance,ye=r.sendCount,U=r.status,Ae=r.matchList,fe=r.excludeList;return(0,e.jsx)(et.X.Consumer,{children:function(Ue){var Oe=Ue.isMobile;return(0,e.jsxs)(j.Z,{className:_e.headerList,size:"small",column:Oe?1:2,children:[(0,e.jsx)(j.Z.Item,{label:"\u4EFB\u52A1ID",children:d}),(0,e.jsx)(j.Z.Item,{label:"\u521B\u5EFA\u65F6\u95F4",children:tt()(o).format("YYYY-MM-DD HH:mm:ss")}),(0,e.jsx)(j.Z.Item,{label:"\u5F00\u59CB\u65F6\u95F4",children:se(r)}),(0,e.jsx)(j.Z.Item,{label:"\u7ED3\u675F\u65F6\u95F4",children:f?tt()(f).format("YYYY-MM-DD HH:mm:ss"):null}),(0,e.jsx)(j.Z.Item,{label:"\u6536\u4EF6\u4EBA",children:oe(Ae)}),(0,e.jsx)(j.Z.Item,{label:"\u6392\u9664\u5BF9\u8C61",children:oe(fe)}),(0,e.jsx)(j.Z.Item,{label:"\u6D88\u8017\u989D\u5EA6",children:N(l,ye,g,A)}),(0,e.jsxs)(j.Z.Item,{label:"\u6D88\u8017\u4F59\u989D",children:["\xA5 ",Le()(g/1e3).format("0,0.00")]}),(0,e.jsx)(j.Z.Item,{label:"\u72B6\u6001",children:At[U]}),(0,e.jsx)(j.Z.Item,{label:"\u66F4\u591A",children:(0,e.jsx)(xe.ZP,{type:"primary",size:"small",onClick:function(){return u({inforVisiable:!0})},children:"\u66F4\u591A\u4FE1\u606F"})})]})}})},Ce=function(r){var l=r.bounced_count,o=r.total_count,f=r.send_count,A=r.opened_count,g=r.opened_num,ye=r.clicked_count,U=r.clicked_num,Ae=r.senders,fe=r.subjects,He=r.contents,Ue=r.down_count,Oe=r.down_num,ge=Le()((f+l)/o*100).format("0,0.00");u({sended:T()(T()({},w),{},{per:ge,sub1Value:o,sub2Value:f+l})}),ge=Le()(f/(f+l)*100).format("0,0.00"),u({delivered:T()(T()({},O),{},{per:ge,sub1Value:f+l,sub2Value:f})}),ge=Le()(g/f*100).format("0,0.00"),u({opened:T()(T()({},ee),{},{per:ge,sub1Value:g,sub2Value:A})}),ge=Le()(U/f*100).format("0,0.00"),u({clicked:T()(T()({},I),{},{per:ge,sub1Value:U,sub2Value:ye})}),ge=Le()(Oe/f*100).format("0,0.00"),u({downed:T()(T()({},ae),{},{per:ge,sub1Value:Oe,sub2Value:Ue})}),Ae&&u({senderNum:Ae.length}),fe&&u({subjectNum:fe.length}),He&&u({contentNum:He.length})},ve=(0,h.useRequest)(b.RO,{manual:!0,onSuccess:function(r){r&&(u({task:r}),Ce(r))}}),be=ve.run,Ee=ve.refresh,H=function(){var r=x.task,l=r.name;return(0,e.jsxs)(we.Z,{size:"large",style:{fontSize:20,marginBottom:12},children:[(0,e.jsx)("a",{onClick:y,children:(0,e.jsx)(nt,{})}),(0,e.jsxs)("span",{children:["\u4EFB\u52A1\u540D\u79F0\uFF1A",l]}),d?(0,e.jsx)("a",{onClick:function(){return u({editTaskName:!0,taskName:l})},children:(0,e.jsx)(E.Z,{style:{color:"#2eabff"}})}):null]})};(0,M.useEffect)(function(){be({gtid:d})},[]);var $=function(r){var l="\u7EDF \u8BA1";return r==="recipients"&&(l="\u5BA2 \u6237"),x.tabActiveKey===r?(0,e.jsxs)("span",{children:[(0,e.jsx)(Qe,{})," ",l]}):(0,e.jsx)("span",{children:(0,e.jsxs)(qe.Z,{dot:!0,children:[(0,e.jsx)(Qe,{})," ",l]})})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(Be.Z,{children:[H(),le(),(0,e.jsx)(Dt,{visible:x.inforVisiable,current:x.task,onCancel:function(){return u({inforVisiable:!1})}}),(0,e.jsx)(Ft,{visible:x.editTaskName,onCancel:function(){return u({editTaskName:!1})},gtid:d,name:x.taskName,taskReload:function(){return Ee()}})]}),(0,e.jsx)(Be.Z,{style:{marginTop:12},children:(0,e.jsxs)(Ke.Z,{onChange:de,type:"card",children:[(0,e.jsx)(Ke.Z.TabPane,{tab:$("performance"),children:L()},"performance"),(0,e.jsx)(Ke.Z.TabPane,{tab:$("recipients"),children:L()},"recipients")]})})]})},It=Ot,kt=t(33131),Te=t(69602),Rt=t(66694),Mt=t(10584),Ut=t(45393),Pt=t(10439),wt=function(){var m=(0,D.Z)({selectKey:"running",waitingCount:0,runningCount:0,pauseCount:0,finishedCount:0,draftCount:0,denyCount:0,scheduleCount:0,recycleCount:0,revokeCount:0,status:"running",detailsShow:!1,gtid:"",massVisible:!1,action:"create",filterValues:{},scrollY:600,tasksData:[],taskTotal:0,total:0,current:1,pageSize:10,sort:{},showMore:!1}),y=k()(m,2),d=y[0],Z=y[1],R=(0,h.useRequest)(b.be,{manual:!0,pollingInterval:6e4,debounceInterval:500,onSuccess:function(){var i=p()(v()().mark(function a(c){var F,B,ue,Ie;return v()().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:F=d.taskTotal,B=c.list,ue=c.current,Ie=c.total,Ie&&Ie>F&&(F=Ie),Z({tasksData:B,current:ue,total:Ie,taskTotal:F});case 4:case"end":return Ye.stop()}},a)}));function n(a){return i.apply(this,arguments)}return n}()}),x=R.run,u=R.loading,O=R.refresh,ee=(0,h.useRequest)(Rt.rZ,{onSuccess:function(n){if(!!n){Z({owners:n});var a=[];for(var c in n){var F=n[c],B=F.nickname,ue=F.userid;a.push({title:B,value:ue,key:ue})}Z({userTreeData:a})}}}),I=ee.data,w=function(n){var a=d.filterValues,c=d.pageSize,F=d.sort;n||(n=a),Z({current:1}),x({filter:n,current:1,pageSize:c,sort:F})},ae=(0,h.useRequest)(b.qi,{manual:!0,onSuccess:function(){te.ZP.success("\u5220\u9664\u4EFB\u52A1\u6210\u529F\uFF01"),w()}}),de=ae.run,L=function(){var i=p()(v()().mark(function n(a){var c;return v()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:c=a.gtid,K.Z.confirm({title:"\u5220\u9664\u4EFB\u52A1",content:"\u786E\u5B9A\u5220\u9664\u8BE5\u4EFB\u52A1\u5417\uFF1F",onOk:function(){return de({gtid:c})}});case 2:case"end":return B.stop()}},n)}));return function(a){return i.apply(this,arguments)}}(),N=(0,h.useRequest)(b.mC,{manual:!0,onSuccess:function(){te.ZP.success("\u6E05\u9664\u4EFB\u52A1\u6210\u529F\uFF01"),w()}}),se=N.run,oe=function(){var i=p()(v()().mark(function n(a){var c;return v()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:c=a.gtid,K.Z.confirm({title:"\u6E05\u9664\u4EFB\u52A1",content:"\u786E\u5B9A\u6E05\u9664\u8BE5\u4EFB\u52A1\u5417\uFF1F\u8BE5\u64CD\u4F5C\u4E0D\u53EF\u6062\u590D",onOk:function(){return se({gtid:c})}});case 2:case"end":return B.stop()}},n)}));return function(a){return i.apply(this,arguments)}}(),le=(0,h.useRequest)(b.ti,{manual:!0,onSuccess:function(){te.ZP.success("\u5F00\u59CB\u4EFB\u52A1\u6210\u529F\uFF01"),w()}}),Ce=le.run,ve=function(){var i=p()(v()().mark(function n(a){var c;return v()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:c=a.gtid,K.Z.confirm({title:"\u5F00\u59CB\u4EFB\u52A1",content:"\u786E\u5B9A\u8FD0\u884C\u8BE5\u4EFB\u52A1\u5417\uFF1F",onOk:function(){return Ce({gtid:c})}});case 2:case"end":return B.stop()}},n)}));return function(a){return i.apply(this,arguments)}}(),be=(0,h.useRequest)(b.jy,{manual:!0,onSuccess:function(){te.ZP.success("\u6682\u505C\u4EFB\u52A1\u6210\u529F\uFF01"),w()}}),Ee=be.run,H=function(){var i=p()(v()().mark(function n(a){var c;return v()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:c=a.gtid,K.Z.confirm({title:"\u6682\u505C\u4EFB\u52A1",content:"\u786E\u5B9A\u6682\u505C\u8BE5\u4EFB\u52A1\u5417\uFF1F",onOk:function(){return Ee({gtid:c})}});case 2:case"end":return B.stop()}},n)}));return function(a){return i.apply(this,arguments)}}(),$=(0,h.useRequest)(b.V$,{manual:!0,onSuccess:function(){te.ZP.success("\u64A4\u9500\u4EFB\u52A1\u6210\u529F\uFF01"),w()}}),C=$.run,r=function(){var i=p()(v()().mark(function n(a){var c;return v()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:c=a.gtid,K.Z.confirm({title:"\u64A4\u9500\u4EFB\u52A1",content:"\u786E\u5B9A\u64A4\u9500\u8BE5\u4EFB\u52A1\u5417\uFF1F",onOk:function(){return C({gtid:c})}});case 2:case"end":return B.stop()}},n)}));return function(a){return i.apply(this,arguments)}}(),l=function(n){var a=n.gtid;return(0,e.jsx)("a",{onClick:function(){return Z({detailsShow:!0,gtid:a})},children:"\u8BE6\u60C5"})},o=function(n){return(0,e.jsx)(ne.Z,{title:"\u5220\u9664\u4EFB\u52A1\u5E76\u653E\u5165\u56DE\u6536\u7AD9\u4E2D\uFF0C\u5220\u9664\u540E\u4E0D\u53EF\u91CD\u65B0\u8FD0\u884C",children:(0,e.jsx)("a",{href:"#",onClick:function(){return L(n)},style:{color:"red"},children:"\u5220\u9664"})})},f=function(n){return(0,e.jsx)(ne.Z,{title:"\u5C06\u4EFB\u52A1\u5F7B\u5E95\u5220\u9664\uFF0C\u8BE5\u64CD\u4F5C\u4E0D\u53EF\u6062\u590D",children:(0,e.jsx)("a",{href:"#",onClick:function(){return oe(n)},style:{color:"red"},children:"\u6E05\u9664"})})},A=function(n){return(0,e.jsx)("a",{href:"#",onClick:function(){return ve(n)},children:"\u5F00\u59CB"})},g=function(n){return(0,e.jsx)("a",{href:"#",onClick:function(){return H(n)},style:{color:"orange"},children:"\u6682\u505C"})},ye=function(n){return(0,e.jsx)(ne.Z,{title:"\u5C06\u4EFB\u52A1\u9000\u56DE\u5E76\u5C06\u989D\u5EA6\u8FD4\u56DE",children:(0,e.jsx)("a",{onClick:function(){return r(n)},style:{color:"orange"},children:"\u64A4\u9500"})})},U=function(n){var a=n.seat,c=n.status;return a==="draft"?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("a",{onClick:function(){return Z({gtid:n.gtid,massVisible:!0,action:"edit"})},children:"\u7F16\u8F91"}),(0,e.jsx)(_.Z,{type:"vertical"}),o(n)]}):a==="recycle"?(0,e.jsxs)(e.Fragment,{children:[l(n),(0,e.jsx)(_.Z,{type:"vertical"}),f(n)]}):c==="running"?(0,e.jsxs)(e.Fragment,{children:[l(n),(0,e.jsx)(_.Z,{type:"vertical"}),g(n)]}):c==="pause"?(0,e.jsxs)(e.Fragment,{children:[l(n),(0,e.jsx)(_.Z,{type:"vertical"}),A(n),(0,e.jsx)(_.Z,{type:"vertical"}),ye(n)]}):c==="deny"?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("a",{onClick:function(){return Z({gtid:n.gtid,massVisible:!0,action:"change"})},children:"\u4FEE\u6539"}),(0,e.jsx)(_.Z,{type:"vertical"}),ye(n)]}):c==="finished"||c==="revoke"?(0,e.jsxs)(e.Fragment,{children:[l(n),(0,e.jsx)(_.Z,{type:"vertical"}),o(n)]}):c==="schedule"?(0,e.jsxs)(e.Fragment,{children:[l(n),(0,e.jsx)(_.Z,{type:"vertical"}),g(n)]}):(0,e.jsx)(e.Fragment,{})},Ae=function(n){var a=n.channel;return a===2?(0,e.jsx)(P.Z,{color:"success",children:"\u4F18\u8D28\u901A\u9053"}):a===1?(0,e.jsx)(P.Z,{children:"\u81EA\u6709\u90AE\u7BB1"}):(0,e.jsxs)(P.Z,{children:["\u5176\u4ED6(",a,")"]})},fe=function(n){var a=n.status;return a==="draft"?(0,e.jsx)(P.Z,{icon:(0,e.jsx)(E.Z,{}),color:"default",children:"\u8349\u7A3F\u7BB1"}):a==="running"?(0,e.jsx)(P.Z,{icon:(0,e.jsx)(W.Z,{spin:!0}),color:"processing",children:"\u8FD0\u884C\u4E2D"}):a==="finished"?(0,e.jsx)(P.Z,{icon:(0,e.jsx)(V.Z,{}),color:"success",children:"\u5DF2\u5B8C\u6210"}):a==="waiting"?(0,e.jsx)(P.Z,{icon:(0,e.jsx)(Fe.Z,{}),color:"default",children:"\u7B49\u5F85\u5BA1\u6838"}):a==="schedule"?(0,e.jsx)(P.Z,{icon:(0,e.jsx)(Fe.Z,{}),color:"default",children:"\u5B9A\u65F6\u4E2D"}):a==="deleted"?(0,e.jsx)(P.Z,{icon:(0,e.jsx)(ie.Z,{}),color:"error",children:"\u5DF2\u53D6\u6D88"}):a==="paused"||a==="pause"?(0,e.jsx)(P.Z,{icon:(0,e.jsx)(J.Z,{}),color:"warning",children:"\u5DF2\u6682\u505C"}):a==="deny"?(0,e.jsx)(P.Z,{icon:(0,e.jsx)(J.Z,{}),color:"error",children:"\u5BA1\u6838\u88AB\u62D2"}):a==="revoke"?(0,e.jsx)(P.Z,{icon:(0,e.jsx)(J.Z,{}),color:"warning",children:"\u5DF2\u64A4\u9500"}):a},He=function(n){var a=n.seat;return a==="recycle"?(0,e.jsx)(P.Z,{color:"red",icon:(0,e.jsx)(re.Z,{}),children:"\u56DE\u6536\u7AD9"}):a==="list"?(0,e.jsx)(P.Z,{color:"blue",children:"\u6B63\u5E38\u4EFB\u52A1"}):a==="draft"?(0,e.jsx)(P.Z,{children:"\u8349\u7A3F\u7BB1"}):a},Ue=function(n){return(0,e.jsx)(De.Z,{percent:n,size:"small"})},Oe=function(n){return"".concat(n,"%")},ge=function(n){var a=n.total_count;return(0,e.jsx)("a",{children:a})},Lt=function(n){var a=n.userid;if(!I||!I.length)return"\u6211\u81EA\u5DF1";var c=I.findIndex(function(B){return B.userid===a});if(c>=0){var F=I[c].nickname;return F}return"\u672A\u77E5\u7528\u6237"},zt=[{title:"\u4EFB\u52A1id",dataIndex:"gtid",width:96},{title:"\u521B\u5EFA\u8005",dataIndex:"userid",width:128,render:function(n,a){return Lt(a)}},{title:"\u4E3B\u9898\u540D\u79F0",dataIndex:"name",width:256},{title:"\u53D1\u9001\u6E20\u9053",dataIndex:"channel",width:100,render:function(n,a){return Ae(a)}},{title:"\u4F4D\u7F6E",dataIndex:"seat",width:100,render:function(n,a){return He(a)}},{title:"\u72B6\u6001",dataIndex:"status",width:100,render:function(n,a){return fe(a)}},{title:"\u53D1\u9001\u8FDB\u5EA6",dataIndex:"progress",render:function(n){return Ue(n)},width:128},{title:"\u603B\u6570",dataIndex:"total_count",render:function(n,a){return ge(a)},sorter:function(n,a){return n.total_count-a.total_count},width:96},{title:"\u53D1\u9001\u7387",dataIndex:"sendPer",width:96,render:function(n){return Oe(n)}},{title:"\u9001\u8FBE\u7387",dataIndex:"deliverPer",width:96,render:function(n){return Oe(n)}},{title:"\u9605\u8BFB\u7387",dataIndex:"openedPer",width:96,render:function(n){return Oe(n)}},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"create_time",width:160,sorter:function(n,a){return n.create_time-a.create_time},render:function(n,a){var c=a.create_time;return(0,Re.pV)(c)}},{title:"\u5F00\u59CB\u65F6\u95F4",dataIndex:"timeStart",width:160,sorter:function(n,a){return n.timeStart-a.timeStart},render:function(n,a){var c=a.timeStart;return(0,Re.pV)(c)}},{title:"\u64CD\u4F5C",dataIndex:"option",fixed:"right",width:134,render:function(n,a){return U(a)}}],Nt=function(n,a,c){var F=n.current,B=n.pageSize,ue={},Ie=c.field,lt=c.order;lt==="ascend"?ue[Ie]=1:lt==="descend"&&(ue[Ie]=-1),Z({sort:ue});var Ye=d.filterValues;x({current:F,pageSize:B,filter:Ye,sort:ue})};(0,M.useEffect)(function(){w()},[]);var $t=function(n){var a=d.filterValues,c=a.owners,F=n.value;return c&&c.length&&c[0]===F?(0,e.jsxs)("div",{className:Te.Z.stardardFilterSelected,children:["\u521B\u5EFA\u8005 (",c.length,")"]}):(0,e.jsx)("span",{})},Kt=function(n){var a=d.filterValues,c=n.value,F=a.seat;return F&&F.length&&F[0]===c?(0,e.jsxs)("div",{className:Te.Z.stardardFilterSelected,children:["\u4EFB\u52A1\u4F4D\u7F6E (",F.length,")"]}):(0,e.jsx)("span",{})},_t=function(n){var a=d.filterValues,c=n.value,F=a.status;return F&&F.length&&F[0]===c?(0,e.jsxs)("div",{className:Te.Z.stardardFilterSelected,children:["\u4EFB\u52A1\u72B6\u6001 (",F.length,")"]}):(0,e.jsx)("span",{})},Wt=function(n,a){Z({current:n,pageSize:a});var c=d.filterValues;x({current:n,pageSize:a,filter:c})},Ht=function(){var i=p()(v()().mark(function n(a,c){return v()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:Z({filterValues:c}),w(c);case 2:case"end":return B.stop()}},n)}));return function(a,c){return i.apply(this,arguments)}}();return(0,e.jsxs)(s.Z,{pageTitle:!1,pageGroup:"marketing",pageActive:"tasks",children:[d.detailsShow?(0,e.jsx)(It,{onCancel:function(){return Z({detailsShow:!1})},gtid:d.gtid}):(0,e.jsxs)(Be.Z,{children:[(0,e.jsx)(Be.Z,{className:"both-down",children:(0,e.jsxs)(Ze.Z,{children:[(0,e.jsx)(G.Z,{xl:12,children:(0,e.jsx)(ce.Z,{layout:"inline",initialValues:d.filterValues,onValuesChange:Ht,children:(0,e.jsxs)("div",{className:Te.Z.standardFilterConditions,children:[I!=null&&I.length?(0,e.jsx)(ce.Z.Item,{name:"owners",noStyle:!0,children:(0,e.jsx)(ze.Z,{treeCheckable:!0,treeData:d.userTreeData,dropdownStyle:{maxHeight:400,minWidth:200},placeholder:(0,e.jsxs)("div",{style:{color:"#383838",textAlign:"center"},children:["\u521B\u5EFA\u8005 ",(0,e.jsx)(Q.Z,{})]}),tagRender:$t,showArrow:!1,allowClear:!0,className:Te.Z.stardardFilter,bordered:!1})}):null,(0,e.jsx)(ce.Z.Item,{name:"seat",noStyle:!0,children:(0,e.jsxs)(S.Z,{mode:"multiple",placeholder:(0,e.jsxs)("div",{style:{color:"#383838",textAlign:"center"},children:["\u4EFB\u52A1\u4F4D\u7F6E ",(0,e.jsx)(Q.Z,{})]}),bordered:!1,className:Te.Z.stardardFilter,showArrow:!1,tagRender:Kt,allowClear:!0,children:[(0,e.jsx)(S.Z.Option,{value:"list",title:"\u6B63\u5E38\u4EFB\u52A1",children:"\u6B63\u5E38\u4EFB\u52A1"},"list"),(0,e.jsx)(S.Z.Option,{value:"draft",children:"\u8349\u7A3F\u7BB1"},"draft"),(0,e.jsx)(S.Z.Option,{value:"recycle",children:"\u56DE\u6536\u7AD9"},"recycle")]})}),(0,e.jsx)(ce.Z.Item,{name:"status",noStyle:!0,children:(0,e.jsxs)(S.Z,{mode:"multiple",placeholder:(0,e.jsxs)("div",{style:{color:"#383838",textAlign:"center"},children:["\u4EFB\u52A1\u72B6\u6001 ",(0,e.jsx)(Q.Z,{})]}),tagRender:_t,bordered:!1,className:Te.Z.stardardFilter,allowClear:!0,children:[(0,e.jsx)(S.Z.Option,{value:"running",children:fe({status:"running"})},"running"),(0,e.jsx)(S.Z.Option,{value:"finished",children:fe({status:"finished"})},"finished"),(0,e.jsx)(S.Z.Option,{value:"waiting",children:fe({status:"waiting"})},"waiting"),(0,e.jsx)(S.Z.Option,{value:"deny",children:fe({status:"deny"})},"deny"),(0,e.jsx)(S.Z.Option,{value:"schedule",children:fe({status:"schedule"})},"schedule"),(0,e.jsx)(S.Z.Option,{value:"paused",children:fe({status:"paused"})},"paused"),(0,e.jsx)(S.Z.Option,{value:"revoke",children:fe({status:"revoke"})},"revoke")]})}),(0,e.jsx)(ce.Z.Item,{name:"createTime",children:(0,e.jsx)(Pt.Z,{name:"\u521B\u5EFA\u65F6\u95F4"})}),(0,e.jsx)(ce.Z.Item,{name:"keyword",tooltip:"\u4EFB\u52A1\u540D\u79F0\u5173\u952E\u8BCD",children:(0,e.jsx)(Pe.Z.Search,{placeholder:"\u540D\u79F0\u641C\u7D22",style:{width:160,verticalAlign:"middle"},className:Te.Z.stardardFilter,allowClear:!0},"searchKey")})]})})}),(0,e.jsx)(G.Z,{xl:12,style:{textAlign:"right"},children:(0,e.jsxs)(we.Z,{size:"large",children:[(0,e.jsx)(xe.ZP,{loading:u,onClick:O,children:"\u5237\u65B0"}),(0,e.jsxs)(xe.ZP,{type:"primary",onClick:function(){return Z({gtid:"",massVisible:!0,action:"create"})},children:[(0,e.jsx)(z.Z,{}),"\u521B\u5EFA\u4EFB\u52A1"]})]})})]})}),(0,e.jsx)(Mt.Z,{onResize:function(){var n=window,a=n.innerHeight;if(a>=500){var c=a-320;Z({scrollY:c})}},children:(0,e.jsx)(Xe.Z,{loading:u,rowKey:"gtid",dataSource:d.tasksData,className:"both-up",columns:zt,pagination:{position:["bottomCenter"],total:d.total,pageSize:d.pageSize,current:d.current,showTotal:function(n){return"\u603B\u4EFB\u52A1\u6570 ".concat(n," ")},onChange:Wt,showQuickJumper:!0},scroll:{x:"100%",y:d.scrollY},onChange:Nt,size:"middle"})},"resize-observer")]}),(0,e.jsx)(kt.Z,{visible:d.massVisible,onCancel:function(){return Z({massVisible:!1})},actionReload:function(){return O()},taskId:d.gtid,action:d.action})]})},Vt=wt},69602:function(ke,Y){Y.Z={infocard:"infocard___PfFNu",standardFilterConditions:"standardFilterConditions___oJhoT",stardardFilter:"stardardFilter___YhL7B",stardardFilterSelected:"stardardFilterSelected___CTm0h",stardardDateFilterSelected:"stardardDateFilterSelected___Od63I","tbl-operator":"tbl-operator___jBHoi","table-row-action-button":"table-row-action-button___KEAY0","editable-row":"editable-row___S3pJM"}},49871:function(ke,Y,t){t.d(Y,{Z:function(){return Xe}});var X=t(53566),v=t(84875),he=t.n(v),p=t(85170),me=t(97618),k=t(99188),M=t(34208),te=t(68141),K=t(21288);function ne(s){return typeof s!="string"?s:s.charAt(0).toUpperCase()+s.slice(1)}var _=t(11802),P=t(14485);const De=(s,b,D)=>{const h=ne(D);return{[`${s.componentCls}-${b}`]:{color:s[`color${D}`],background:s[`color${h}Bg`],borderColor:s[`color${h}Border`]}}},Be=s=>(0,_.j)(s,(b,D)=>{let{textColor:h,lightBorderColor:E,lightColor:W,darkColor:V}=D;return{[`${s.componentCls}-${b}`]:{color:h,background:W,borderColor:E,"&-inverse":{color:s.colorTextLightSolid,background:V,borderColor:V}}}}),Ze=s=>{const{paddingXXS:b,lineWidth:D,tagPaddingHorizontal:h,componentCls:E}=s,W=h-D,V=b-D;return{[E]:Object.assign(Object.assign({},(0,P.Wf)(s)),{display:"inline-block",height:"auto",marginInlineEnd:s.marginXS,paddingInline:W,fontSize:s.tagFontSize,lineHeight:`${s.tagLineHeight}px`,whiteSpace:"nowrap",background:s.tagDefaultBg,border:`${s.lineWidth}px ${s.lineType} ${s.colorBorder}`,borderRadius:s.borderRadiusSM,opacity:1,transition:`all ${s.motionDurationMid}`,textAlign:"start",[`&${E}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:s.tagDefaultColor},[`${E}-close-icon`]:{marginInlineStart:V,color:s.colorTextDescription,fontSize:s.tagIconSize,cursor:"pointer",transition:`all ${s.motionDurationMid}`,"&:hover":{color:s.colorTextHeading}},[`&${E}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${s.iconCls}-close, ${s.iconCls}-close:hover`]:{color:s.colorTextLightSolid}},["&-checkable"]:{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${E}-checkable-checked):hover`]:{color:s.colorPrimary,backgroundColor:s.colorFillSecondary},"&:active, &-checked":{color:s.colorTextLightSolid},"&-checked":{backgroundColor:s.colorPrimary,"&:hover":{backgroundColor:s.colorPrimaryHover}},"&:active":{backgroundColor:s.colorPrimaryActive}},["&-hidden"]:{display:"none"},[`> ${s.iconCls} + span, > span + ${s.iconCls}`]:{marginInlineStart:W}})}};var G=(0,te.Z)("Tag",s=>{const{fontSize:b,lineHeight:D,lineWidth:h,fontSizeIcon:E}=s,W=Math.round(b*D),V=s.fontSizeSM,Fe=W-h*2,ie=s.colorFillAlter,J=s.colorText,re=(0,K.TS)(s,{tagFontSize:V,tagLineHeight:Fe,tagDefaultBg:ie,tagDefaultColor:J,tagIconSize:E-2*h,tagPaddingHorizontal:8});return[Ze(re),Be(re),De(re,"success","Success"),De(re,"processing","Info"),De(re,"error","Error"),De(re,"warning","Warning")]}),ce=function(s,b){var D={};for(var h in s)Object.prototype.hasOwnProperty.call(s,h)&&b.indexOf(h)<0&&(D[h]=s[h]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var E=0,h=Object.getOwnPropertySymbols(s);E<h.length;E++)b.indexOf(h[E])<0&&Object.prototype.propertyIsEnumerable.call(s,h[E])&&(D[h[E]]=s[h[E]]);return D},S=s=>{var{prefixCls:b,className:D,checked:h,onChange:E,onClick:W}=s,V=ce(s,["prefixCls","className","checked","onChange","onClick"]);const{getPrefixCls:Fe}=p.useContext(me.E_),ie=q=>{E==null||E(!h),W==null||W(q)},J=Fe("tag",b),[re,Q]=G(J),z=he()(J,{[`${J}-checkable`]:!0,[`${J}-checkable-checked`]:h},D,Q);return re(p.createElement("span",Object.assign({},V,{className:z,onClick:ie})))},Pe=function(s,b){var D={};for(var h in s)Object.prototype.hasOwnProperty.call(s,h)&&b.indexOf(h)<0&&(D[h]=s[h]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var E=0,h=Object.getOwnPropertySymbols(s);E<h.length;E++)b.indexOf(h[E])<0&&Object.prototype.propertyIsEnumerable.call(s,h[E])&&(D[h[E]]=s[h[E]]);return D};const we=(s,b)=>{var{prefixCls:D,className:h,rootClassName:E,style:W,children:V,icon:Fe,color:ie,onClose:J,closeIcon:re,closable:Q=!1}=s,z=Pe(s,["prefixCls","className","rootClassName","style","children","icon","color","onClose","closeIcon","closable"]);const{getPrefixCls:q,direction:T}=p.useContext(me.E_),[Ve,Ge]=p.useState(!0);p.useEffect(()=>{"visible"in z&&Ge(z.visible)},[z.visible]);const Ne=(0,k.o2)(ie)||(0,k.yT)(ie),Je=Object.assign({backgroundColor:ie&&!Ne?ie:void 0},W),je=q("tag",D),[nt,rt]=G(je),at=he()(je,{[`${je}-${ie}`]:Ne,[`${je}-has-color`]:ie&&!Ne,[`${je}-hidden`]:!Ve,[`${je}-rtl`]:T==="rtl"},h,E,rt),$e=_e=>{_e.stopPropagation(),J==null||J(_e),!_e.defaultPrevented&&Ge(!1)},Qe=()=>Q?re?p.createElement("span",{className:`${je}-close-icon`,onClick:$e},re):p.createElement(X.Z,{className:`${je}-close-icon`,onClick:$e}):null,j=typeof z.onClick=="function"||V&&V.type==="a",qe=Fe||null,Ke=qe?p.createElement(p.Fragment,null,qe,p.createElement("span",null,V)):V,et=p.createElement("span",Object.assign({},z,{ref:b,className:at,style:Je}),Ke,Qe());return nt(j?p.createElement(M.Z,null,et):et)},xe=p.forwardRef(we);xe.CheckableTag=S;var Xe=xe}}]);
