"use strict";(self.webpackChunklaifaxin_web=self.webpackChunklaifaxin_web||[]).push([[1791],{42631:function(je,Q){var t={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"};Q.Z=t},45850:function(je,Q,t){var Y=t(75782),b=t(85170),P=t(42631),Z=t(70325),k=function(oe,V){return b.createElement(Z.Z,(0,Y.Z)((0,Y.Z)({},oe),{},{ref:V,icon:P.Z}))};k.displayName="DeleteOutlined",Q.Z=b.forwardRef(k)},72920:function(je,Q,t){var Y=t(75782),b=t(85170),P=t(18929),Z=t(70325),k=function(oe,V){return b.createElement(Z.Z,(0,Y.Z)((0,Y.Z)({},oe),{},{ref:V,icon:P.Z}))};k.displayName="DownOutlined",Q.Z=b.forwardRef(k)},83655:function(je,Q,t){var Y=t(75782),b=t(85170),P=t(62658),Z=t(70325),k=function(oe,V){return b.createElement(Z.Z,(0,Y.Z)((0,Y.Z)({},oe),{},{ref:V,icon:P.Z}))};k.displayName="EditOutlined",Q.Z=b.forwardRef(k)},88208:function(je,Q,t){var Y=t(30279),b=t.n(Y),P=t(85170),Z=t(91522),k=t(43010);Q.Z=function(J){var oe=J.children,V=J.pageTitle;return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(Z._z,b()(b()({header:{title:V,breadcrumb:{}}},J),{},{children:oe}))})}},12826:function(je,Q,t){t.r(Q),t.d(Q,{default:function(){return Mn}});var Y=t(46686),b=t.n(Y),P=t(85170),Z=t(33285),k=t(88208),J=t(1166),oe=t(93275),V=t.n(oe),We=t(94434),he=t.n(We),ze=t(44463),De=t.n(ze),Oe=t(30279),o=t.n(Oe),Ue=t(15286),h=t(6550),q=t(59245),Ae=t(40202),Ve=[h.g4.Down,h.g4.Right,h.g4.Up,h.g4.Left],Re=function(i,c){var d=c.context,x=d.active,M=d.droppableRects,B=d.droppableContainers,p=d.collisionRect;if(Ve.includes(i.code)){if(i.preventDefault(),!x||!p)return;var S=[];B.getEnabled().forEach(function(E){if(!(!E||E!=null&&E.disabled)){var W=M.get(E.id);if(!!W){var j=E.data.current;if(j){var ie=j.type,_=j.children;if(ie==="container"&&(_==null?void 0:_.length)>0){var me;if(((me=x.data.current)===null||me===void 0?void 0:me.type)!=="container")return}}switch(i.code){case h.g4.Down:p.top<W.top&&S.push(E);break;case h.g4.Up:p.top>W.top&&S.push(E);break;case h.g4.Left:p.left>=W.left+W.width&&S.push(E);break;case h.g4.Right:p.left+p.width<=W.left&&S.push(E);break}}}});var z=(0,h.ey)({active:x,collisionRect:p,droppableRects:M,droppableContainers:S,pointerCoordinates:null}),D=(0,h._8)(z,"id");if(D!=null){var C=B.get(D),O=C==null?void 0:C.node.current,R=C==null?void 0:C.rect.current;if(O&&R){var L;return C.id==="placeholder"?{x:R.left+(R.width-p.width)/2,y:R.top+(R.height-p.height)/2}:((L=C.data.current)===null||L===void 0?void 0:L.type)==="container"?{x:R.left+20,y:R.top+74}:{x:R.left,y:R.top}}}}},I=t(33335),ee=function(i){return i};function G(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ee;return _toConsumableArray(new Array(a)).map(function(c,d){return i(d)})}function n(a){var i={},c={},d=a.filter(function(C){return C.folder});for(var x in d){var M=d[x].id;c[M]=[]}for(var B in a){var p=a[B],S=p.id,z=p.parent,D=p.folder;i[S]=a[B],!D&&c[z]&&(c[z]=[].concat(he()(c[z]),[S]))}return{tagsItems:c,tagsObjs:i}}var y=t(10248),g=t(22196),s=t(41318),v=t(58110),ne=t(28931),U=t(11484),te=t(16798),le=t(83655),ue=t(45850),ce=t(72920),Me=t(78730),be=t(35290),fe=t.n(be),Qe=t(411),Be=t.n(Qe),A=t(31810),ve=t(2800),Ne=t(43520),ae=t(77707),Se=t(49871),Ye=t(88665),e=t(43010),Ke={labelCol:{span:6},wrapperCol:{span:16}},Ge=["#ff7043","#ffca28","#ffa726","#f2da04","#26a69a","#66bb6a","#9ccc65","#c4d330","#5c6bc0","#42a5f5","#29b6f6","#26c6d9","#ab47bb","#ec407a","#ef5350","#afaeb0","#000000","#FF00FF","#000080"],qe=function(i){var c=i.visible,d=i.onCancel,x=i.actionReload,M=i.parentId,B=A.Z.useForm(),p=b()(B,1),S=p[0],z=(0,J.Z)({dirsOptions:[],color:"",name:""}),D=b()(z,2),C=D[0],O=D[1],R=(0,g.useRequest)(y.IV,{manual:!0,onSuccess:function(F){if(!!F){var re=[{label:"\u9876\u7EA7\u76EE\u5F55",value:"0"}];for(var ye in F){var N=F[ye],X=N.id,l=N.name;re.push({label:l,value:X})}O({dirsOptions:re})}}}),L=R.run,E=(0,g.useRequest)(y.eN,{manual:!0,onSuccess:function(){s.ZP.success("\u65B0\u589E\u6807\u7B7E\u6210\u529F"),d(),x()}}),W=E.run,j=E.loading,ie=function(){var T=Be()(fe()().mark(function F(){var re;return fe()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.prev=0,N.next=3,S.validateFields();case 3:re=N.sent,W(re),N.next=10;break;case 7:N.prev=7,N.t0=N.catch(0),console.log("Failed:",N.t0);case 10:case"end":return N.stop()}},F,null,[[0,7]])}));return function(){return T.apply(this,arguments)}}();(0,P.useEffect)(function(){if(c){L();var T=(0,Ye.M2)(Ge);O({name:"",color:T,parent:M}),S.resetFields(),S.setFieldsValue({parent:M||"0",color:T})}},[c]);var _=function(){return(0,e.jsxs)("div",{style:{textAlign:"center"},children:[(0,e.jsx)(te.ZP,{style:{marginRight:16},onClick:function(){return d()},children:"\u53D6\u6D88"}),(0,e.jsx)(te.ZP,{type:"primary",onClick:function(){return ie()},loading:j,children:"\u63D0\u4EA4"})]})},me=function(F){O(o()({},F))};return(0,e.jsx)(v.Z,{destroyOnClose:!0,title:"\u521B\u5EFA\u65B0\u6807\u7B7E",open:c,onCancel:function(){return d()},footer:_(),maskClosable:!1,centered:!0,children:(0,e.jsxs)(A.Z,o()(o()({},Ke),{},{form:S,onValuesChange:me,children:[(0,e.jsx)(A.Z.Item,{label:"\u6807\u7B7E\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u7B7E\u540D\u79F0"}],children:(0,e.jsx)(ve.Z,{placeholder:"\u8BF7\u8F93\u5165\u6807\u7B7E\u540D\u79F0"})}),(0,e.jsx)(A.Z.Item,{label:"\u6240\u5C5E\u6587\u4EF6\u5939",name:"parent",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6587\u4EF6\u5939"}],children:(0,e.jsx)(Ne.Z,{showArrow:!0,showSearch:!0,style:{width:"100%"},optionFilterProp:"label",placeholder:"\u8BF7\u9009\u62E9\u6587\u4EF6\u5939",options:C.dirsOptions})}),(0,e.jsx)(A.Z.Item,{label:"\u6807\u7B7E\u989C\u8272",name:"color",children:(0,e.jsxs)(ae.ZP.Group,{children:[(0,e.jsx)(ae.ZP,{value:"",children:(0,e.jsx)(Se.Z,{color:"",children:"\xA0\xA0"})},"null"),Ge.map(function(T){return(0,e.jsx)(ae.ZP,{value:T,children:(0,e.jsx)(Se.Z,{color:T,children:"\xA0\xA0"})},T)})]})}),(0,e.jsx)(A.Z.Item,{label:"\u9884\u89C8\u6548\u679C",name:"preview",children:(0,e.jsx)("div",{children:C.name?(0,e.jsx)(Se.Z,{color:C.color,children:C.name}):null})}),(0,e.jsx)(A.Z.Item,{label:"\u5907\u6CE8",name:"description",children:(0,e.jsx)(ve.Z,{})})]}))})},He=qe,en={labelCol:{span:6},wrapperCol:{span:16}},ke=["#ff7043","#ffca28","#ffa726","#f2da04","#26a69a","#66bb6a","#9ccc65","#c4d330","#5c6bc0","#42a5f5","#29b6f6","#26c6d9","#ab47bb","#ec407a","#ef5350","#afaeb0","#000000","#FF00FF","#000080"],$e=function(i){var c=i.visible,d=i.onCancel,x=i.actionReload,M=i.initValues,B=A.Z.useForm(),p=b()(B,1),S=p[0],z=(0,J.Z)({dirsOptions:[],color:"",name:""}),D=b()(z,2),C=D[0],O=D[1],R=(0,g.useRequest)(y.IV,{manual:!0,onSuccess:function(F){if(!!F){var re=[{label:"\u9876\u7EA7\u76EE\u5F55",value:"0"}];for(var ye in F){var N=F[ye],X=N.id,l=N.name;re.push({label:l,value:X})}O({dirsOptions:re})}}}),L=R.run,E=(0,g.useRequest)(y.E3,{manual:!0,onSuccess:function(){s.ZP.success("\u4FEE\u6539\u6807\u7B7E\u6210\u529F"),d(),x()}}),W=E.run,j=E.loading,ie=function(){var T=Be()(fe()().mark(function F(){var re,ye;return fe()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.prev=0,X.next=3,S.validateFields();case 3:re=X.sent,ye=M.id,W(o()(o()({},re),{},{id:ye})),X.next=11;break;case 8:X.prev=8,X.t0=X.catch(0),console.log("Failed:",X.t0);case 11:case"end":return X.stop()}},F,null,[[0,8]])}));return function(){return T.apply(this,arguments)}}();(0,P.useEffect)(function(){c&&(L(),S.resetFields(),S.setFieldsValue(M),O(o()({},M)))},[c]);var _=function(){return(0,e.jsxs)("div",{style:{textAlign:"center"},children:[(0,e.jsx)(te.ZP,{style:{marginRight:16},onClick:function(){return d()},children:"\u53D6\u6D88"}),(0,e.jsx)(te.ZP,{type:"primary",onClick:function(){return ie()},loading:j,children:"\u63D0\u4EA4"})]})},me=function(F){O(o()({},F))};return(0,e.jsx)(v.Z,{destroyOnClose:!0,title:"\u4FEE\u6539\u6807\u7B7E",open:c,onCancel:function(){return d()},footer:_(),maskClosable:!1,children:(0,e.jsxs)(A.Z,o()(o()({},en),{},{form:S,onValuesChange:me,children:[(0,e.jsx)(A.Z.Item,{label:"\u6807\u7B7E\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u7B7E\u540D\u79F0"}],children:(0,e.jsx)(ve.Z,{placeholder:"\u8BF7\u8F93\u5165\u6807\u7B7E\u540D\u79F0"})}),(0,e.jsx)(A.Z.Item,{label:"\u6240\u5C5E\u6587\u4EF6\u5939",name:"parent",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6587\u4EF6\u5939"}],children:(0,e.jsx)(Ne.Z,{showArrow:!0,showSearch:!0,style:{width:"100%"},optionFilterProp:"label",placeholder:"\u8BF7\u9009\u62E9\u6587\u4EF6\u5939",options:C.dirsOptions})}),(0,e.jsx)(A.Z.Item,{label:"\u6807\u7B7E\u989C\u8272",name:"color",children:(0,e.jsxs)(ae.ZP.Group,{children:[(0,e.jsx)(ae.ZP,{value:"",children:(0,e.jsx)(Se.Z,{color:"",children:"\xA0"})},"null"),ke.map(function(T){return(0,e.jsx)(ae.ZP,{value:T,children:(0,e.jsx)(Se.Z,{color:T,children:"\xA0"})},T)})]})}),(0,e.jsx)(A.Z.Item,{label:"\u9884\u89C8\u6548\u679C",name:"preview",children:(0,e.jsx)("div",{children:C.name?(0,e.jsx)(Se.Z,{color:C.color,children:C.name}):null})}),(0,e.jsx)(A.Z.Item,{label:"\u5907\u6CE8",name:"description",children:(0,e.jsx)(ve.Z,{})})]}))})},hn=$e,pn={labelCol:{span:6},wrapperCol:{span:16}},Cn=function(i){var c=i.visible,d=i.onCancel,x=i.actionReload,M=A.Z.useForm(),B=b()(M,1),p=B[0],S=(0,g.useRequest)(y.QH,{manual:!0,onSuccess:function(){s.ZP.success("\u65B0\u589E\u76EE\u5F55\u6210\u529F"),d(),x()}}),z=S.run,D=S.loading,C=function(){var R=Be()(fe()().mark(function L(){var E;return fe()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.prev=0,j.next=3,p.validateFields();case 3:E=j.sent,z(E),j.next=10;break;case 7:j.prev=7,j.t0=j.catch(0),console.log("Failed:",j.t0);case 10:case"end":return j.stop()}},L,null,[[0,7]])}));return function(){return R.apply(this,arguments)}}();(0,P.useEffect)(function(){c&&p.resetFields()},[c]);var O=function(){return(0,e.jsxs)("div",{style:{textAlign:"center"},children:[(0,e.jsx)(te.ZP,{style:{marginRight:16},onClick:function(){return d()},children:"\u53D6\u6D88"}),(0,e.jsx)(te.ZP,{type:"primary",onClick:function(){return C()},loading:D,children:"\u63D0\u4EA4"})]})};return(0,e.jsx)(v.Z,{destroyOnClose:!0,title:"\u521B\u5EFA\u65B0\u76EE\u5F55",open:c,onCancel:function(){return d()},footer:O(),maskClosable:!1,centered:!0,children:(0,e.jsxs)(A.Z,o()(o()({},pn),{},{form:p,children:[(0,e.jsx)(A.Z.Item,{label:"\u76EE\u5F55\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u76EE\u5F55\u540D\u79F0"}],children:(0,e.jsx)(ve.Z,{placeholder:"\u8BF7\u8F93\u5165\u76EE\u5F55\u540D\u79F0"})}),(0,e.jsx)(A.Z.Item,{label:"\u5907\u6CE8",name:"description",children:(0,e.jsx)(ve.Z,{})})]}))})},bn=Cn,yn={labelCol:{span:6},wrapperCol:{span:16}},Sn=function(i){var c=i.visible,d=i.onCancel,x=i.actionReload,M=i.initValues,B=A.Z.useForm(),p=b()(B,1),S=p[0],z=(0,g.useRequest)(y.E3,{manual:!0,onSuccess:function(){s.ZP.success("\u66F4\u65B0\u76EE\u5F55\u6210\u529F"),d(),x()}}),D=z.run,C=z.loading,O=function(){var L=Be()(fe()().mark(function E(){var W,j;return fe()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.prev=0,_.next=3,S.validateFields();case 3:W=_.sent,j=M.id,D(o()(o()({},W),{},{id:j})),_.next=11;break;case 8:_.prev=8,_.t0=_.catch(0),console.log("Failed:",_.t0);case 11:case"end":return _.stop()}},E,null,[[0,8]])}));return function(){return L.apply(this,arguments)}}();(0,P.useEffect)(function(){c&&(S.resetFields(),S.setFieldsValue(M))},[c]);var R=function(){return(0,e.jsxs)("div",{style:{textAlign:"center"},children:[(0,e.jsx)(te.ZP,{style:{marginRight:16},onClick:function(){return d()},children:"\u53D6\u6D88"}),(0,e.jsx)(te.ZP,{type:"primary",onClick:function(){return O()},loading:C,children:"\u63D0\u4EA4"})]})};return(0,e.jsx)(v.Z,{destroyOnClose:!0,title:"\u4FEE\u6539\u76EE\u5F55",open:c,onCancel:function(){return d()},footer:R(),maskClosable:!1,children:(0,e.jsxs)(A.Z,o()(o()({},yn),{},{form:S,children:[(0,e.jsx)(A.Z.Item,{label:"\u76EE\u5F55\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u76EE\u5F55\u540D\u79F0"}],children:(0,e.jsx)(ve.Z,{placeholder:"\u8BF7\u8F93\u5165\u76EE\u5F55\u540D\u79F0"})}),(0,e.jsx)(A.Z.Item,{label:"\u5907\u6CE8",name:"description",children:(0,e.jsx)(ve.Z,{})})]}))})},En=Sn,xn=t(11146),jn=["children","columns","disabled","id","items","style"];function Dn(){var a=(0,P.useState)(!1),i=b()(a,2),c=i[0],d=i[1];return(0,P.useEffect)(function(){var x=setTimeout(function(){return d(!0)},500);return function(){return clearTimeout(x)}},[]),c}function On(a){var i=a.disabled,c=a.id,d=a.index,x=a.handle,M=a.renderItem,B=a.style,p=a.containerId,S=a.getIndex,z=a.wrapperStyle,D=a.color,C=a.value,O=(0,q.nB)({id:c}),R=O.setNodeRef,L=O.setActivatorNodeRef,E=O.listeners,W=O.isDragging,j=O.isSorting,ie=O.over,_=O.overIndex,me=O.transform,T=O.transition,F=Dn(),re=W&&!F;return(0,e.jsx)(I.yp,{ref:i?void 0:R,value:C,dragging:W,sorting:j,handle:x,handleProps:x?{ref:L}:void 0,index:d,wrapperStyle:z({index:d}),style:B({index:d,value:c,isDragging:W,isSorting:j,overIndex:ie?S(ie.id):_,containerId:p}),color:D,transition:T,transform:me,fadeIn:re,listeners:E,renderItem:M})}var Rn=function(i){return(0,q.cP)(o()(o()({},i),{},{wasDragging:!0}))};function Tn(a){var i,c=a.children,d=a.columns,x=d===void 0?1:d,M=a.disabled,B=a.id,p=a.items,S=a.style,z=De()(a,jn),D=(0,q.nB)({id:B,data:{type:"container",children:p},animateLayoutChanges:Rn}),C=D.active,O=D.attributes,R=D.isDragging,L=D.listeners,E=D.over,W=D.setNodeRef,j=D.transition,ie=D.transform,_=E?B===E.id&&(C==null||(i=C.data.current)===null||i===void 0?void 0:i.type)!=="container"||p.includes(E.id):!1;return B==="0"?(0,e.jsx)(I.W2,o()(o()({columns:x},z),{},{handle:!1,children:c})):(0,e.jsx)(I.W2,o()(o()({ref:M?void 0:W,style:o()(o()({},S),{},{transition:j,transform:Ae.ux.Translate.toString(ie),opacity:R?.5:void 0}),hover:_,handleProps:o()(o()({},O),L),columns:x},z),{},{children:c}))}var Pn={sideEffects:(0,h.Ai)({styles:{active:{opacity:"0.5"}}})},Xe="void",sn="placeholder";function In(a){var i=a.id,c=(0,h.Zj)({id:i}),d=c.setNodeRef,x=c.isOver;return(0,e.jsx)("div",{ref:d,style:{display:"flex",alignItems:"center",justifyContent:"center",position:"fixed",left:"50%",marginLeft:-150,bottom:20,width:300,height:60,borderRadius:5,border:"1px solid",borderColor:x?"red":"#DDD"},children:"Drop here to delete"})}function Zn(a){var i=a.adjustScale,c=i===void 0?!1:i,d=a.cancelDrop,x=a.columns,M=a.handle,B=M===void 0?!1:M,p=a.containerStyle,S=a.coordinateGetter,z=S===void 0?Re:S,D=a.getItemStyles,C=D===void 0?function(){return{}}:D,O=a.wrapperStyle,R=O===void 0?function(){return{}}:O,L=a.minimal,E=L===void 0?!1:L,W=a.modifiers,j=a.renderItem,ie=a.strategy,_=ie===void 0?q.qw:ie,me=a.trashable,T=me===void 0?!1:me,F=a.vertical,re=F===void 0?!1:F,ye=a.scrollable,N=(0,P.useState)({}),X=b()(N,2),l=X[0],_e=X[1],Bn=(0,P.useState)([]),on=b()(Bn,2),pe=on[0],nn=on[1],_n=(0,P.useState)({}),ln=b()(_n,2),un=ln[0],Ln=ln[1],wn=(0,P.useState)(null),cn=b()(wn,2),se=cn[0],Te=cn[1],Je=(0,P.useRef)(null),tn=(0,P.useRef)(!1),Un=se?pe.includes(se):!1,$n=(0,J.Z)({parentId:"",current:{},createVisible:!1,updateVisible:!1,dirCreateVisible:!1,dirUpdateVisible:!1}),dn=b()($n,2),Pe=dn[0],Ee=dn[1],Wn=(0,g.useRequest)(y.qF,{onSuccess:function(f){if(!!f){var m=n(f),u=m.tagsItems,$=m.tagsObjs;Ln($),_e(u),nn(Object.keys(u))}}}),zn=Wn.run,Ie=function(){zn()},Vn=(0,g.useRequest)(xn.Jf,{manual:!0,onSuccess:function(){Ie()}}),fn=Vn.run,Nn=(0,g.useRequest)(y.L7,{manual:!0,onSuccess:function(){Ie()}}),Kn=Nn.run,Gn=(0,g.useRequest)(y.Su,{manual:!0,onSuccess:function(){Ie()}}),Hn=Gn.run,kn=function(f){var m;if((m=l[f])!==null&&m!==void 0&&m.length){s.ZP.error("\u76EE\u5F55\u5185\u5B58\u5728\u6807\u7B7E\u65F6\u4E0D\u53EF\u5220\u9664");return}fn({id:f})},Xn=function(f,m,u){u||(u="\u65E0"),v.Z.confirm({centered:!0,title:"\u786E\u8BA4\u5220\u9664\u6807\u7B7E: ".concat(m),content:"\u6807\u7B7E\u5907\u6CE8\uFF1A".concat(u),onOk:function(){return fn({id:f})}})},Ze=function(f){return un[f]?un[f]:{}},Jn=(0,P.useCallback)(function(r){if(se&&se in l)return(0,h.pE)(o()(o()({},r),{},{droppableContainers:r.droppableContainers.filter(function(K){return K.id in l})}));var f=(0,h.j2)(r),m=f.length>0?f:(0,h.Xo)(r),u=(0,h._8)(m,"id");if(u!==null){if(u===Xe)return m;if(u in l){var $=l[u];if($.length>0){var w;u=(w=(0,h.pE)(o()(o()({},r),{},{droppableContainers:r.droppableContainers.filter(function(K){return K.id!==u&&$.includes(K.id)})}))[0])===null||w===void 0?void 0:w.id}}return Je.current=u,[{id:u}]}return tn.current&&(Je.current=se),Je.current?[{id:Je.current}]:[]},[se,l]),Qn=(0,P.useState)(null),vn=b()(Qn,2),mn=vn[0],gn=vn[1],Yn=(0,h.Dy)((0,h.VT)(h.MA),(0,h.VT)(h.LO),(0,h.VT)(h.Lg,{coordinateGetter:z})),Le=function(f){return f in l?f:Object.keys(l).find(function(m){return l[m].includes(f)})},rn=function(f){var m=Le(f);if(!m)return-1;var u=l[m].indexOf(f);return u},qn=function(){mn&&_e(mn),Te(null),gn(null)};(0,P.useEffect)(function(){requestAnimationFrame(function(){tn.current=!1})},[l]);function et(r){var f=Ze(r),m=f.name,u=f.color;return(0,e.jsx)(I.yp,{value:m,handle:B,style:C({containerId:Le(r),overIndex:-1,index:rn(r),value:r,isSorting:!0,isDragging:!0,isDragOverlay:!0}),color:u,wrapperStyle:R({index:0}),renderItem:j,dragOverlay:!0})}function nt(r){var f=Ze(r),m=f.name;return(0,e.jsx)(I.W2,{label:m,columns:x,style:{height:"100%",background:"none"},shadow:!0,unstyled:!1,children:l[r].map(function(u,$){var w=Ze(u),K=w.name,H=w.color;return(0,e.jsx)(I.yp,{value:K,handle:B,style:C({containerId:r,overIndex:-1,index:rn(u),value:u,isDragging:!1,isSorting:!1,isDragOverlay:!1}),color:H,wrapperStyle:R({index:$}),renderItem:j},u)})})}function tt(){var r=Object.keys(l),f=r[r.length-1];return String.fromCharCode(f.charCodeAt(0)+1)}return(0,e.jsxs)(h.LB,{sensors:Yn,collisionDetection:Jn,measuring:{droppable:{strategy:h.uN.Always}},onDragStart:function(f){var m=f.active;Te(m.id),gn(l)},onDragOver:function(f){var m=f.active,u=f.over,$=u==null?void 0:u.id;if(!($===null||$===Xe||m.id in l)){var w=Le($),K=Le(m.id);!w||!K||K!==w&&_e(function(){var H,Fe=l[K],ge=l[w],xe=ge.indexOf($),de=Fe.indexOf(m.id),Ce;if($ in l)Ce=ge.length+1;else{var we=u&&m.rect.current.translated&&m.rect.current.translated.top>u.rect.top+u.rect.height,an=we?1:0;Ce=xe>=0?xe+an:ge.length+1}return tn.current=!0,o()(o()({},l),{},(H={},V()(H,K,l[K].filter(function(rt){return rt!==m.id})),V()(H,w,[].concat(he()(l[w].slice(0,Ce)),[l[K][de]],he()(l[w].slice(Ce,l[w].length)))),H))})}},onDragEnd:function(f){var m=f.active,u=f.over;m.id in l&&u!==null&&u!==void 0&&u.id&&nn(function(){var de=pe.indexOf(m.id),Ce=pe.indexOf(u.id),we=(0,q.Rp)(pe,de,Ce);return m.id!==u.id&&Kn({ids:we}),we});var $=Le(m.id);if(!$){Te(null);return}var w=u==null?void 0:u.id;if(w===null){Te(null);return}if(w===Xe){_e(function(){return o()(o()({},l),{},V()({},$,l[$].filter(function(de){return de!==se})))}),Te(null);return}if(w===sn){var K=tt();(0,Ue.unstable_batchedUpdates)(function(){nn(function(){return[].concat(he()(pe),[K])}),_e(function(){var de;return o()(o()({},l),{},(de={},V()(de,$,l[$].filter(function(Ce){return Ce!==se})),V()(de,K,[m.id]),de))}),Te(null)});return}var H=Le(w);if(H){var Fe=l[$].indexOf(m.id),ge=l[H].indexOf(w),xe=(0,q.Rp)(l[H],Fe,ge);Hn({dirId:H,ids:xe}),Fe!==ge&&_e(function(){return o()(o()({},l),{},V()({},H,(0,q.Rp)(l[H],Fe,ge)))})}Te(null)},cancelDrop:d,onDragCancel:qn,modifiers:W,children:[(0,e.jsxs)("div",{style:{display:"inline-grid",boxSizing:"border-box",padding:20,gridAutoFlow:re?"row":"column"},children:[(0,e.jsx)(q.Fo,{items:[].concat(he()(pe),[sn]),strategy:re?q.qw:q.PG,children:pe==null?void 0:pe.map(function(r){var f=Ze(r),m=f.id,u=f.name,$=f.description;if(m){var w,K;return(0,e.jsx)(Tn,{id:r,label:(0,e.jsx)("div",{children:(0,e.jsxs)(ne.Z,{children:[(0,e.jsx)(U.Z,{menu:{items:[{key:"save",label:"\u4FEE\u6539\u76EE\u5F55",icon:(0,e.jsx)(le.Z,{}),onClick:function(){Ee({current:Ze(r),dirUpdateVisible:!0})}},{key:"delete",label:"\u5220\u9664\u76EE\u5F55",icon:(0,e.jsx)(ue.Z,{}),onClick:function(){return kn(r)}}]},disabled:r==="0",children:(0,e.jsx)("div",{style:{fontSize:16,fontWeight:"bold"},children:(0,e.jsxs)(ne.Z,{children:[u,(0,e.jsx)("a",{style:{fontSize:14,fontWeight:400},children:(w=l[r])===null||w===void 0?void 0:w.length}),r==="0"?null:(0,e.jsx)(ce.Z,{})]})})}),$?(0,e.jsxs)("span",{style:{fontSize:10,fontWeight:50},children:["\u5907\u6CE8\uFF1A",$]}):null]})}),columns:x,items:l[r],scrollable:ye,style:p,unstyled:E,onRemove:void 0,handle:!0,children:(0,e.jsxs)(q.Fo,{items:l[r],strategy:_,children:[(K=l[r])===null||K===void 0?void 0:K.map(function(H,Fe){var ge=Ze(H),xe=ge.id,de=ge.name,Ce=ge.color,we=ge.description;return(0,e.jsx)(On,{disabled:Un,id:xe,value:(0,e.jsx)(U.Z,{menu:{items:[{key:"save",icon:(0,e.jsx)(le.Z,{}),label:"\u4FEE\u6539\u6807\u7B7E",onClick:function(){return Ee({current:Ze(xe),updateVisible:!0})}},{key:"delete",icon:(0,e.jsx)(ue.Z,{}),label:"\u5220\u9664\u6807\u7B7E",onClick:function(){return Xn(xe,de,we)}}]},children:(0,e.jsx)("div",{style:{width:"100%",textOverflow:"ellipsis",overflow:"hidden"},children:de})}),index:Fe,handle:B,style:C,wrapperStyle:R,renderItem:j,containerId:r,getIndex:rn,color:Ce},H)}),(0,e.jsxs)(te.ZP,{type:"dashed",onClick:function(){return Ee({parentId:r,createVisible:!0})},size:"small",children:[(0,e.jsx)(Me.Z,{})," \u65B0\u589E\u6807\u7B7E"]})]})},r)}return null})}),(0,e.jsxs)(te.ZP,{type:"dashed",style:{width:"100%",marginBottom:8,height:54,fontSize:16},onClick:function(){return Ee({dirCreateVisible:!0})},children:[(0,e.jsx)(Me.Z,{}),"\u65B0\u589E\u6807\u7B7E\u76EE\u5F55"]})]}),(0,Ue.createPortal)((0,e.jsx)(h.y9,{adjustScale:c,dropAnimation:Pn,children:se?pe.includes(se)?nt(se):et(se):null}),document.body),T&&se&&!pe.includes(se)?(0,e.jsx)(In,{id:Xe}):null,(0,e.jsx)(He,{visible:Pe.createVisible,onCancel:function(){return Ee({createVisible:!1})},actionReload:function(){return Ie()},parentId:Pe.parentId}),(0,e.jsx)(hn,{visible:Pe.updateVisible,onCancel:function(){return Ee({updateVisible:!1})},actionReload:function(){return Ie()},initValues:Pe.current}),(0,e.jsx)(bn,{visible:Pe.dirCreateVisible,onCancel:function(){return Ee({dirCreateVisible:!1})},actionReload:function(){return Ie()}}),(0,e.jsx)(En,{visible:Pe.dirUpdateVisible,onCancel:function(){return Ee({dirUpdateVisible:!1})},actionReload:function(){return Ie()},initValues:Pe.current})]})}var Fn=t(10584),An=function(){var i=(0,J.Z)({tagColumns:6}),c=b()(i,2),d=c[0],x=c[1];return(0,e.jsx)(k.Z,{pageTitle:!1,pageGroup:"settings",pageActive:"tags",className:"both-down",children:(0,e.jsx)(Z.Z,{bodyStyle:{padding:0},children:(0,e.jsx)(Fn.Z,{onResize:function(){var B=window,p=B.innerWidth;p>=1920?x({tagColumns:8}):p>=1600?x({tagColumns:8}):p>=1200?x({tagColumns:6}):x({tagColumns:4})},children:(0,e.jsx)(Zn,{columns:d.tagColumns,strategy:q.U2,containerStyle:{width:"100%"},vertical:!0,handle:!0})},"resize-observer")})})},Mn=An},11146:function(je,Q,t){t.d(Q,{Jf:function(){return q},fz:function(){return oe}});var Y=t(35290),b=t.n(Y),P=t(411),Z=t.n(P),k=t(88665),J=t(22196);function oe(){return V.apply(this,arguments)}function V(){return V=Z()(b()().mark(function I(){return b()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.abrupt("return",(0,J.request)("/api/settings/fields/show",{method:"POST"}));case 1:case"end":return G.stop()}},I)})),V.apply(this,arguments)}function We(I){return he.apply(this,arguments)}function he(){return he=_asyncToGenerator(_regeneratorRuntime().mark(function I(ee){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/settings/templets/show",{method:"POST",data:ee}));case 1:case"end":return n.stop()}},I)})),he.apply(this,arguments)}function ze(I){return De.apply(this,arguments)}function De(){return De=_asyncToGenerator(_regeneratorRuntime().mark(function I(ee){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/settings/signatures/show",{method:"POST",data:ee}));case 1:case"end":return n.stop()}},I)})),De.apply(this,arguments)}function Oe(){return o.apply(this,arguments)}function o(){return o=_asyncToGenerator(_regeneratorRuntime().mark(function I(){return _regeneratorRuntime().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.abrupt("return",request("/api/settings/tags/contact-dirs",{method:"POST"}));case 1:case"end":return G.stop()}},I)})),o.apply(this,arguments)}function Ue(I){return h.apply(this,arguments)}function h(){return h=_asyncToGenerator(_regeneratorRuntime().mark(function I(ee){var G,n,y,g,s,v;return _regeneratorRuntime().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return G=formatParams(ee),U.next=3,request("/api/settings/tags/contact-list",{method:"POST",data:G});case 3:return n=U.sent,y=n.data,g=y.total,s=y.current,v=y.list,U.abrupt("return",{data:v,total:g,current:s});case 7:case"end":return U.stop()}},I)})),h.apply(this,arguments)}function q(I){return Ae.apply(this,arguments)}function Ae(){return Ae=Z()(b()().mark(function I(ee){return b()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,J.request)("/api/settings/tags/contact-delete",{method:"POST",data:ee}));case 1:case"end":return n.stop()}},I)})),Ae.apply(this,arguments)}function Ve(I){return Re.apply(this,arguments)}function Re(){return Re=_asyncToGenerator(_regeneratorRuntime().mark(function I(ee){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/settings/tags/contact-move",{method:"POST",data:ee}));case 1:case"end":return n.stop()}},I)})),Re.apply(this,arguments)}},49871:function(je,Q,t){t.d(Q,{Z:function(){return G}});var Y=t(53566),b=t(84875),P=t.n(b),Z=t(85170),k=t(97618),J=t(99188),oe=t(34208),V=t(68141),We=t(21288);function he(n){return typeof n!="string"?n:n.charAt(0).toUpperCase()+n.slice(1)}var ze=t(11802),De=t(14485);const Oe=(n,y,g)=>{const s=he(g);return{[`${n.componentCls}-${y}`]:{color:n[`color${g}`],background:n[`color${s}Bg`],borderColor:n[`color${s}Border`]}}},o=n=>(0,ze.j)(n,(y,g)=>{let{textColor:s,lightBorderColor:v,lightColor:ne,darkColor:U}=g;return{[`${n.componentCls}-${y}`]:{color:s,background:ne,borderColor:v,"&-inverse":{color:n.colorTextLightSolid,background:U,borderColor:U}}}}),Ue=n=>{const{paddingXXS:y,lineWidth:g,tagPaddingHorizontal:s,componentCls:v}=n,ne=s-g,U=y-g;return{[v]:Object.assign(Object.assign({},(0,De.Wf)(n)),{display:"inline-block",height:"auto",marginInlineEnd:n.marginXS,paddingInline:ne,fontSize:n.tagFontSize,lineHeight:`${n.tagLineHeight}px`,whiteSpace:"nowrap",background:n.tagDefaultBg,border:`${n.lineWidth}px ${n.lineType} ${n.colorBorder}`,borderRadius:n.borderRadiusSM,opacity:1,transition:`all ${n.motionDurationMid}`,textAlign:"start",[`&${v}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:n.tagDefaultColor},[`${v}-close-icon`]:{marginInlineStart:U,color:n.colorTextDescription,fontSize:n.tagIconSize,cursor:"pointer",transition:`all ${n.motionDurationMid}`,"&:hover":{color:n.colorTextHeading}},[`&${v}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${n.iconCls}-close, ${n.iconCls}-close:hover`]:{color:n.colorTextLightSolid}},["&-checkable"]:{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${v}-checkable-checked):hover`]:{color:n.colorPrimary,backgroundColor:n.colorFillSecondary},"&:active, &-checked":{color:n.colorTextLightSolid},"&-checked":{backgroundColor:n.colorPrimary,"&:hover":{backgroundColor:n.colorPrimaryHover}},"&:active":{backgroundColor:n.colorPrimaryActive}},["&-hidden"]:{display:"none"},[`> ${n.iconCls} + span, > span + ${n.iconCls}`]:{marginInlineStart:ne}})}};var h=(0,V.Z)("Tag",n=>{const{fontSize:y,lineHeight:g,lineWidth:s,fontSizeIcon:v}=n,ne=Math.round(y*g),U=n.fontSizeSM,te=ne-s*2,le=n.colorFillAlter,ue=n.colorText,ce=(0,We.TS)(n,{tagFontSize:U,tagLineHeight:te,tagDefaultBg:le,tagDefaultColor:ue,tagIconSize:v-2*s,tagPaddingHorizontal:8});return[Ue(ce),o(ce),Oe(ce,"success","Success"),Oe(ce,"processing","Info"),Oe(ce,"error","Error"),Oe(ce,"warning","Warning")]}),q=function(n,y){var g={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&y.indexOf(s)<0&&(g[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,s=Object.getOwnPropertySymbols(n);v<s.length;v++)y.indexOf(s[v])<0&&Object.prototype.propertyIsEnumerable.call(n,s[v])&&(g[s[v]]=n[s[v]]);return g},Ve=n=>{var{prefixCls:y,className:g,checked:s,onChange:v,onClick:ne}=n,U=q(n,["prefixCls","className","checked","onChange","onClick"]);const{getPrefixCls:te}=Z.useContext(k.E_),le=fe=>{v==null||v(!s),ne==null||ne(fe)},ue=te("tag",y),[ce,Me]=h(ue),be=P()(ue,{[`${ue}-checkable`]:!0,[`${ue}-checkable-checked`]:s},g,Me);return ce(Z.createElement("span",Object.assign({},U,{className:be,onClick:le})))},Re=function(n,y){var g={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&y.indexOf(s)<0&&(g[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,s=Object.getOwnPropertySymbols(n);v<s.length;v++)y.indexOf(s[v])<0&&Object.prototype.propertyIsEnumerable.call(n,s[v])&&(g[s[v]]=n[s[v]]);return g};const I=(n,y)=>{var{prefixCls:g,className:s,rootClassName:v,style:ne,children:U,icon:te,color:le,onClose:ue,closeIcon:ce,closable:Me=!1}=n,be=Re(n,["prefixCls","className","rootClassName","style","children","icon","color","onClose","closeIcon","closable"]);const{getPrefixCls:fe,direction:Qe}=Z.useContext(k.E_),[Be,A]=Z.useState(!0);Z.useEffect(()=>{"visible"in be&&A(be.visible)},[be.visible]);const ve=(0,J.o2)(le)||(0,J.yT)(le),Ne=Object.assign({backgroundColor:le&&!ve?le:void 0},ne),ae=fe("tag",g),[Se,Ye]=h(ae),e=P()(ae,{[`${ae}-${le}`]:ve,[`${ae}-has-color`]:le&&!ve,[`${ae}-hidden`]:!Be,[`${ae}-rtl`]:Qe==="rtl"},s,v,Ye),Ke=$e=>{$e.stopPropagation(),ue==null||ue($e),!$e.defaultPrevented&&A(!1)},Ge=()=>Me?ce?Z.createElement("span",{className:`${ae}-close-icon`,onClick:Ke},ce):Z.createElement(Y.Z,{className:`${ae}-close-icon`,onClick:Ke}):null,qe=typeof be.onClick=="function"||U&&U.type==="a",He=te||null,en=He?Z.createElement(Z.Fragment,null,He,Z.createElement("span",null,U)):U,ke=Z.createElement("span",Object.assign({},be,{ref:y,className:e,style:Ne}),en,Ge());return Se(qe?Z.createElement(oe.Z,null,ke):ke)},ee=Z.forwardRef(I);ee.CheckableTag=Ve;var G=ee}}]);
