"use strict";(self.webpackChunklaifaxin_web=self.webpackChunklaifaxin_web||[]).push([[7815],{24691:function(le,z,a){a.r(z);var H=a(35290),_=a.n(H),Y=a(411),x=a.n(Y),q=a(30279),u=a.n(q),V=a(46686),J=a.n(V),S=a(85170),ee=a(64268),d=a(31810),ae=a(96498),te=a(46394),se=a(33285),i=a(13590),f=a(41318),s=a(77707),c=a(43525),o=a(2800),r=a(34833),D=a(16798),C=a(98215),O=a(24521),M=a(1166),b=a(55051),F=a(25106),v=a(68027),B=a(22196),e=a(43010),U=ee.Z.Dragger,L={xs:24,sm:24,md:24,lg:12,xl:12},Z={labelCol:{lg:{span:8},xl:{span:4,offset:4}},wrapperCol:{lg:{span:12},xl:{span:8}}},y={wrapperCol:{lg:{span:12,offset:0},xl:{span:8,offset:8}}},Q=window.localStorage.getItem("uid")||"",I=window.localStorage.getItem("accesstoken")||"",j={uid:Q,accesstoken:I},W=function(){var E=d.Z.useForm(),k=J()(E,1),A=k[0],K=(0,M.Z)({realName:"",idNum:"",authTime:0,type:"personal",fileList:[],agree:!1,imageUrl:""}),N=J()(K,2),h=N[0],g=N[1],w=(0,B.useRequest)(b.Qv,{manual:!0,onSuccess:function(l){g(u()({},l))}}),X=w.run,re=function(){var p=x()(_()().mark(function l(){return _()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:X();case 1:case"end":return n.stop()}},l)}));return function(){return p.apply(this,arguments)}}(),t=function(){return(0,e.jsx)(ae.Z,{gutter:24,children:(0,e.jsx)(te.Z,u()(u()({},L),{},{children:(0,e.jsx)(se.Z,{headStyle:{color:"#85C974",backgroundColor:"#EFF8EC",fontSize:"18px"},title:(0,e.jsxs)("span",{children:[(0,e.jsx)(C.Z,{})," \u4E2A\u4EBA\u5B9E\u540D\u8BA4\u8BC1\u5B8C\u6210\uFF01"]}),children:(0,e.jsxs)(i.Z,{column:2,style:{width:"100%"},children:[(0,e.jsx)(i.Z.Item,{label:"\u771F\u5B9E\u59D3\u540D",children:h.realName}),(0,e.jsx)(i.Z.Item,{label:"\u8BC1\u4EF6\u53F7\u7801",children:h.idNum}),(0,e.jsx)(i.Z.Item,{label:"\u8BA4\u8BC1\u7C7B\u578B",children:"\u4E2A\u4EBA"}),(0,e.jsx)(i.Z.Item,{label:"\u8BA4\u8BC1\u65F6\u95F4",children:h.authTime})]})})}))})},ie=function(){var p=x()(_()().mark(function l(m){var n,P,$,ne,R;return _()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return n=m.file,n.size>=5242880&&f.ZP.warning("\u6587\u4EF6\u8FC7\u5927\uFF01\u53EA\u652F\u63015MB\u4EE5\u5185\u7684\u56FE\u7247\uFF01"),g({fileList:[{name:n.name,uid:n.uid,status:"uploading"}]}),G.next=5,(0,F.c)(n,"id",!0);case 5:P=G.sent,$=P.success,ne=P.data,$&&(R=ne.url,g({fileList:[{name:n.name,uid:n.uid,status:"done"}],imageUrl:R}));case 9:case"end":return G.stop()}},l)}));return function(m){return p.apply(this,arguments)}}(),ce=function(l){var m=l.target.checked;g({agree:m}),A.setFieldsValue({agreement:m})},oe=function(l,m){var n=Promise,P=/^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/;return m&&!P.test(m)?n.reject("\u975E\u6CD5\u8EAB\u4EFD\u8BC1\u683C\u5F0F(18\u4F4D)"):n.resolve()},ue=(0,B.useRequest)(b.n0,{manual:!0,onSuccess:function(l){g(u()({},l))}}),_e=ue.run,de=ue.loading,me=function(){var p=x()(_()().mark(function l(m){var n,P,$;return _()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:n=h.imageUrl,P=m.realName,$=m.idNum,_e({realName:P,idNum:$,imageUrl:n});case 3:case"end":return R.stop()}},l)}));return function(m){return p.apply(this,arguments)}}(),Ee=function(){return(0,e.jsx)(se.Z,{children:(0,e.jsxs)(d.Z,u()(u()({},Z),{},{form:A,onFinish:me,children:[(0,e.jsx)(d.Z.Item,{name:"type",label:"\u8EAB\u4EFD\u6CE8\u518C",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6CE8\u518C\u7C7B\u578B"}],children:(0,e.jsxs)(s.ZP.Group,{children:[(0,e.jsx)(s.ZP,{value:"personal",children:"\u4E2A\u4EBA"}),(0,e.jsx)(s.ZP,{value:"enterprise",disabled:!0,children:"\u4F01\u4E1A"})]})}),(0,e.jsx)(d.Z.Item,u()(u()({name:"tips"},y),{},{children:(0,e.jsx)(c.Z,{message:"\u771F\u5B9E\u59D3\u540D\u9700\u8DDF\u63D0\u73B0\u94F6\u884C\u5361\u540D\u5B57\u4E00\u81F4\uFF0C\u5426\u5219\u5C06\u65E0\u6CD5\u63D0\u73B0",type:"info",showIcon:!0})})),(0,e.jsx)(d.Z.Item,{name:"realName",label:"\u771F\u5B9E\u59D3\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u771F\u5B9E\u59D3\u540D"}],children:(0,e.jsx)(o.Z,{size:"large",placeholder:"\u5982\uFF1A\u5F20\u4E09"})}),(0,e.jsx)(d.Z.Item,{name:"idNum",label:"\u8EAB\u4EFD\u8BC1\u53F7\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8EAB\u4EFD\u8BC1\u53F7"},{validator:oe}],children:(0,e.jsx)(o.Z,{placeholder:"\u5982\uFF1A110xxx"})}),(0,e.jsx)(d.Z.Item,{name:"image",label:"\u8BC1\u4EF6\u7167\u7247",rules:[{required:!0,message:"\u8BF7\u4E0A\u4F20\u8EAB\u4EFD\u8BC1\u6B63\u9762\u7167\u7247"}],children:(0,e.jsxs)(U,{headers:j,customRequest:ie,fileList:h.fileList,children:[(0,e.jsx)("p",{className:"ant-upload-drag-icon",children:(0,e.jsx)(O.Z,{})}),(0,e.jsx)("p",{className:"ant-upload-text",children:"\u70B9\u51FB\u6216\u62D6\u62FD\u4E0A\u4F20\u8EAB\u4EFD\u8BC1\u6B63\u9762"}),(0,e.jsx)("p",{className:"ant-upload-hint",children:"\u6587\u4EF6\u683C\u5F0F\uFF1AJPG \u6216 PNG (\u6700\u5927\u4E0D\u8D85\u8FC75M)"})]})}),(0,e.jsx)(d.Z.Item,u()(u()({name:"agreement"},y),{},{rules:[{required:!0,message:"\u8BF7\u540C\u610F\u540E\u786E\u8BA4\u63D0\u4EA4"}],children:(0,e.jsx)(r.Z,{checked:h.agree,onChange:ce,children:"\u6211\u786E\u8BA4\u4E0A\u8FF0\u63D0\u4F9B\u7684\u4FE1\u606F\u5B8C\u5168\u771F\u5B9E\u53CA\u540C\u610F\u4E0A\u4F20\u5230\u6765\u53D1\u4FE1"})})),(0,e.jsx)(d.Z.Item,u()(u()({},y),{},{style:{marginTop:32},children:(0,e.jsx)(D.ZP,{type:"primary",htmlType:"submit",loading:de,children:"\u63D0\u4EA4"})}))]}))})};return(0,S.useEffect)(function(){re(),A.setFieldsValue({type:"personal"})},[]),(0,e.jsx)(v.f,{children:h.idNum?t():Ee()})};z.default=W},25106:function(le,z,a){a.d(z,{c:function(){return te}});var H=a(35290),_=a.n(H),Y=a(411),x=a.n(Y),q=a(30279),u=a.n(q),V=a(22196);function J(i){return S.apply(this,arguments)}function S(){return S=x()(_()().mark(function i(f){var s;return _()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,V.request)("/api/file/get-auth",{method:"POST",data:u()({},f)});case 2:return s=o.sent,o.abrupt("return",s);case 4:case"end":return o.stop()}},i)})),S.apply(this,arguments)}function ee(i){return d.apply(this,arguments)}function d(){return d=x()(_()().mark(function i(f){var s,c;return _()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,V.request)("/api/file/save-log",{method:"POST",data:u()({},f)});case 2:return s=r.sent,c=s.data,r.abrupt("return",c);case 5:case"end":return r.stop()}},i)})),d.apply(this,arguments)}var ae=a(21156),te=function(){var i=x()(_()().mark(function f(s,c,o){var r,D,C,O,M,b,F,v,B,e,U,L,Z,y,Q,I,j,W,T,E,k,A,K,N,h,g,w,X;return _()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r={success:!1,data:{},error:""},t.prev=1,D=s.name,C=s.type,O=s.size,M=D.split("."),b=Date.now(),F=M[M.length-1].toLowerCase(),t.next=8,J({type:c});case 8:if(v=t.sent,B=v.success,e=v.data,U=v.message,L=v.status,B){t.next=15;break}return t.abrupt("return",{success:B,error:U,status:L});case 15:return Z=e.SecurityToken,y=e.AccessKeyId,Q=e.AccessKeySecret,I=e.region,j=e.bucket,W=e.uid,T=e.dirName,E=e.id,k=e.webSite,A={timeout:36e4},K="".concat(c,"/").concat(T,"/").concat(E,"_").concat(b,".").concat(F),c==="att"&&(A["Content-Disposition"]="attachment",A["Cache-Control"]="no-cache",K="".concat(c,"/").concat(T,"/").concat(E,"/").concat(D)),N=new ae({bucket:j,region:I,accessKeyId:y,accessKeySecret:Q,stsToken:Z}),t.next=22,N.put(K,s,A);case 22:if(h=t.sent,g=h.url,k&&(g="".concat(k,"/").concat(K)),w=h.name,!o){t.next=32;break}return t.next=29,ee({iid:E,id:E,name:D,url:g,filePath:w,bucket:j,region:I,filename:"".concat(E,".").concat(F),dirName:T,uid:W,fileType:C,type:c,size:O});case 29:r.data=t.sent,t.next=33;break;case 32:r.data={name:D,url:g,filePath:w,bucket:j,region:I,filename:"".concat(E,".").concat(F),dirName:T,uid:W,fileType:C,type:c,size:O,iid:E,id:E};case 33:r.success=!0,t.next=40;break;case 36:t.prev=36,t.t0=t.catch(1),X=t.t0.message,r.error=X;case 40:return t.abrupt("return",r);case 41:case"end":return t.stop()}},f,null,[[1,36]])}));return function(s,c,o){return i.apply(this,arguments)}}(),se=null}}]);
