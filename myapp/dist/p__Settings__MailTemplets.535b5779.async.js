"use strict";(self.webpackChunklaifaxin_web=self.webpackChunklaifaxin_web||[]).push([[1600],{32398:function(b,v,e){e.d(v,{Z:function(){return h}});var d=e(75782),u=e(85170),m={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M862 465.3h-81c-4.6 0-9 2-12.1 5.5L550 723.1V160c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v563.1L255.1 470.8c-3-3.5-7.4-5.5-12.1-5.5h-81c-6.8 0-10.5 8.1-6 13.2L487.9 861a31.96 31.96 0 0048.3 0L868 478.5c4.5-5.2.8-13.2-6-13.2z"}}]},name:"arrow-down",theme:"outlined"},a=m,c=e(70325),f=function(y,E){return u.createElement(c.Z,(0,d.Z)((0,d.Z)({},y),{},{ref:E,icon:a}))};f.displayName="ArrowDownOutlined";var h=u.forwardRef(f)},40727:function(b,v,e){e.d(v,{Z:function(){return h}});var d=e(75782),u=e(85170),m={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 545.5L536.1 163a31.96 31.96 0 00-48.3 0L156 545.5a7.97 7.97 0 006 13.2h81c4.6 0 9-2 12.1-5.5L474 300.9V864c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V300.9l218.9 252.3c3 3.5 7.4 5.5 12.1 5.5h81c6.8 0 10.5-8 6-13.2z"}}]},name:"arrow-up",theme:"outlined"},a=m,c=e(70325),f=function(y,E){return u.createElement(c.Z,(0,d.Z)((0,d.Z)({},y),{},{ref:E,icon:a}))};f.displayName="ArrowUpOutlined";var h=u.forwardRef(f)},7962:function(b,v,e){var d=e(75782),u=e(85170),m=e(54709),a=e(70325),c=function(h,D){return u.createElement(a.Z,(0,d.Z)((0,d.Z)({},h),{},{ref:D,icon:m.Z}))};c.displayName="EllipsisOutlined",v.Z=u.forwardRef(c)},55197:function(b,v,e){var d=e(75782),u=e(85170),m=e(19148),a=e(70325),c=function(h,D){return u.createElement(a.Z,(0,d.Z)((0,d.Z)({},h),{},{ref:D,icon:m.Z}))};c.displayName="FolderOpenOutlined",v.Z=u.forwardRef(c)},54948:function(b,v,e){var d=e(75782),u=e(85170),m=e(65735),a=e(70325),c=function(h,D){return u.createElement(a.Z,(0,d.Z)((0,d.Z)({},h),{},{ref:D,icon:m.Z}))};c.displayName="FolderOutlined",v.Z=u.forwardRef(c)},73173:function(b,v,e){e.d(v,{Z:function(){return h}});var d=e(75782),u=e(85170),m={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 512h-56c-4.4 0-8 3.6-8 8v320H184V184h320c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V520c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M355.9 534.9L354 653.8c-.1 8.9 7.1 16.2 16 16.2h.4l118-2.9c2-.1 4-.9 5.4-2.3l415.9-415c3.1-3.1 3.1-8.2 0-11.3L785.4 114.3c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-415.8 415a8.3 8.3 0 00-2.3 5.6zm63.5 23.6L779.7 199l45.2 45.1-360.5 359.7-45.7 1.1.7-46.4z"}}]},name:"form",theme:"outlined"},a=m,c=e(70325),f=function(y,E){return u.createElement(c.Z,(0,d.Z)((0,d.Z)({},y),{},{ref:E,icon:a}))};f.displayName="FormOutlined";var h=u.forwardRef(f)},10022:function(b,v,e){var d=e(35290),u=e.n(d),m=e(30279),a=e.n(m),c=e(411),f=e.n(c),h=e(46686),D=e.n(h),y=e(85170),E=e(31810),ee=e(41318),V=e(2800),N=e(58110),z=e(74729),M=e(43010),$={labelCol:{span:7},wrapperCol:{span:13}},ne=function(g){var I=E.Z.useForm(),te=D()(I,1),P=te[0],H=g.visible,R=g.folder,S=g.onCancel,k=g.actionReload,U=g.type;(0,y.useEffect)(function(){H&&(R?P.setFieldsValue(R):P.resetFields())},[g.visible,g.folder]);var re=function(){var X=f()(u()().mark(function A(){var L,B;return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(P){i.next=2;break}return i.abrupt("return");case 2:return P.submit(),i.prev=3,i.next=6,P.validateFields();case 6:if(L=i.sent,R){i.next=13;break}return i.next=10,(0,z.dK)(a()(a()({},L),{},{type:U}));case 10:B=i.sent,i.next=16;break;case 13:return i.next=15,(0,z.Xn)(a()(a()({},L),{},{type:U}));case 15:B=i.sent;case 16:B&&(ee.ZP.success("".concat(R?"\u4FDD\u5B58":"\u65B0\u589E","\u5206\u7EC4\u6210\u529F!")),S(),k()),i.next=22;break;case 19:i.prev=19,i.t0=i.catch(3),console.log("Failed:",i.t0);case 22:case"end":return i.stop()}},A,null,[[3,19]])}));return function(){return X.apply(this,arguments)}}(),G={okText:"\u4FDD\u5B58",onOk:re,onCancel:S},le=function(){return(0,M.jsxs)(E.Z,a()(a()({},$),{},{form:P,children:[(0,M.jsx)(E.Z.Item,{hidden:!0,name:"foid",label:"\u4FDD\u5B58id",children:(0,M.jsx)(V.Z,{})}),(0,M.jsx)(E.Z.Item,{name:"name",label:"\u5206\u7EC4\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5206\u7EC4\u540D\u79F0"}],children:(0,M.jsx)(V.Z,{placeholder:"\u8BF7\u8F93\u5165\u5206\u7EC4\u540D\u79F0"})})]}))};return(0,M.jsx)(N.Z,a()(a()({title:"".concat(R?"\u7F16\u8F91":"\u65B0\u589E","\u5206\u7EC4"),width:480,bodyStyle:{padding:"28px 0 0"},destroyOnClose:!0,open:H,maskClosable:!1},G),{},{children:le()}))};v.Z=ne},94267:function(b,v,e){e.r(v),e.d(v,{default:function(){return me}});var d=e(30279),u=e.n(d),m=e(35290),a=e.n(m),c=e(411),f=e.n(c),h=e(46686),D=e.n(h),y=e(85170),E=e(41318),ee=e(74954),V=e(96498),N=e(46394),z=e(11484),M=e(58110),$=e(42147),ne=e(10364),se=e(33285),g=e(77070),I=e(16798),te=e(28931),P=e(54948),H=e(55197),R=e(40727),S=e(32398),k=e(73173),U=e(45850),re=e(7962),G=e(78730),le=e(88208),X=e(48865),A=e(74729),L=e(12653),B=e(10022),ue=e(1166),i=e(84207),J=e(22196),fe=function(_){return _.forEach(function(w){var Q=w.bool,s=w.run1,p=w.run2;return Q?s==null?void 0:s():p==null?void 0:p()})},n=e(43010),ve=function(){var _=(0,y.useRef)(),w=(0,ue.Z)({contentVisible:!1,folderVisible:!1,folder:null,folderItems:[],type:"content",treeHeight:600,tableHeight:600,treeSelectKeys:["0"],foid:"0",action:"add",currentValues:{},owner:"mine"}),Q=D()(w,2),s=Q[0],p=Q[1],pe=(0,J.useRequest)(A.Pd,{manual:!0,onSuccess:function(t){!t||p({folderItems:t})}}),ie=pe.run,T=function(){var t=s.type,r=s.owner;ie({type:t,owner:r})},de=function(){_.current&&_.current.reload(),T()},Ee=(0,J.useRequest)(A.p9,{manual:!0,onSuccess:function(){E.ZP.success("\u5220\u9664\u90AE\u4EF6\u6A21\u677F\u6210\u529F\uFF01"),_.current&&_.current.reload(),T()}}),_e=Ee.run,Oe=(0,J.useRequest)(A.Ht,{manual:!0,onSuccess:function(){E.ZP.success("\u5220\u9664\u5206\u7EC4\u6210\u529F!"),T()}}),De=Oe.run,ye=function(){var o=f()(a()().mark(function t(r){var l;return a()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return l=s.type,C.next=3,De({type:l,foid:r});case 3:case"end":return C.stop()}},t)}));return function(r){return o.apply(this,arguments)}}(),Ce=(0,J.useRequest)(A.uO,{manual:!0,onSuccess:function(){T()}}),xe=Ce.run,ce=function(){var o=f()(a()().mark(function t(r,l,O){var C,x,K,W,Y,q;return a()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:C=s.folderItems,x=s.type,K=O.foid,r==="up"?W=l-1:W=l+1,Y=C[W].foid,q=[K,Y],xe({type:x,ids:q});case 6:case"end":return Z.stop()}},t)}));return function(r,l,O){return o.apply(this,arguments)}}(),je=function(t,r){var l=t.foid,O=t.name,C=t.count,x=s.treeSelectKeys,K=(0,n.jsx)(P.Z,{});x&&x.length&&x[0]===l&&(K=(0,n.jsx)(H.Z,{}));var W=function(){var j=[];return fe([{bool:r>1,run1:function(){return j.push({key:"up",label:(0,n.jsxs)("a",{onClick:function(F){F.stopPropagation(),ce("up",r,t)},children:[(0,n.jsx)(R.Z,{}),"\u4E0A\u5347"]})})},run2:function(){return j.push({key:"up",icon:(0,n.jsx)(R.Z,{}),label:"\u4E0A\u5347",disabled:!0})}},{bool:r<1||s.folderItems.length===r+1,run1:function(){return j.push({key:"down",icon:(0,n.jsx)(S.Z,{}),label:"\u4E0B\u964D",disabled:!0})},run2:function(){return j.push({key:"down",label:(0,n.jsxs)("a",{onClick:function(F){F.stopPropagation(),ce("down",r,t)},children:[(0,n.jsx)(S.Z,{}),"\u4E0B\u964D"]})})}},{bool:r>=1,run1:function(){return j.push({key:"rename",label:(0,n.jsxs)("a",{onClick:function(F){F.stopPropagation(),p({folderVisible:!0,folder:t})},children:[(0,n.jsx)(k.Z,{})," \u91CD\u547D\u540D"]})},{key:"delete",label:(0,n.jsx)(ee.Z,{title:"\u786E\u8BA4\u5220\u9664\u5206\u7EC4\uFF1A".concat(O,"?"),children:(0,n.jsxs)("a",{onClick:function(F){F.stopPropagation(),ye(l)},children:[(0,n.jsx)(U.Z,{}),"\u5220\u9664\u5206\u7EC4"]})})})},run2:function(){return j.push({key:"rename",icon:(0,n.jsx)(k.Z,{}),label:"\u91CD\u547D\u540D",disabled:!0},{key:"delete",icon:(0,n.jsx)(U.Z,{}),label:"\u5220\u9664\u5206\u7EC4",disabled:!0})}}]),j},Y=(0,n.jsx)("span",{className:"tree-leaf",children:(0,n.jsxs)(V.Z,{style:{width:"100%",whiteSpace:"nowrap"},children:[(0,n.jsx)(N.Z,{span:20,children:(0,n.jsxs)("span",{className:"name",children:[O,"(",C,")"]})}),(0,n.jsx)(N.Z,{span:4,className:"action",style:{textAlign:"right"},children:(0,n.jsx)(z.Z,{menu:{items:W()},children:(0,n.jsx)(re.Z,{onClick:function(j){j.stopPropagation()}})})})]})});return{key:l,title:Y,icon:K}},ge=function(t){if(!t)return[];var r=t.map(function(l,O){return je(l,O)});return r};(0,y.useEffect)(function(){T()},[]);var Ze=function(t){var r=t._id,l=t.name;M.Z.confirm({title:"\u5220\u9664\u6A21\u677F\uFF1A".concat(l),content:"\u786E\u5B9A\u5220\u9664\uFF1F",onOk:function(){return _e({id:r})}})},Me=[{title:"\u540D\u79F0",dataIndex:"name",valueType:"text"},{title:"\u4E3B\u9898",dataIndex:"subject",valueType:"text"},{title:"\u90AE\u4EF6\u6B63\u6587",dataIndex:"html",valueType:"text",ellipsis:!0,width:"50%",render:function(t,r){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{style:{overflow:"hidden"},children:(0,n.jsx)("div",{style:{maxHeight:100},dangerouslySetInnerHTML:{__html:r.html}})})})}},{title:"\u521B\u5EFA\u8005",dataIndex:"userid",valueType:"text"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"create_time",hideInSearch:!0,valueType:"dateTime",sorter:function(t,r){return t.create_time-r.create_time}},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(t,r){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("a",{onClick:function(){p({contentVisible:!0,currentValues:r,action:"copy"})},children:"\u590D\u5236"}),(0,n.jsx)($.Z,{type:"vertical"}),(0,n.jsx)("a",{onClick:function(){p({contentVisible:!0,currentValues:r,action:"update"})},children:"\u4FEE\u6539"}),(0,n.jsx)($.Z,{type:"vertical"}),(0,n.jsx)("a",{onClick:function(){return Ze(r)},children:"\u5220\u9664"})]})}}],Pe=function(t){var r,l;t.length?l=t[0]:(t=["all"],l="all"),_==null||(r=_.current)===null||r===void 0||r.reset(),p({treeSelectKeys:t,foid:l}),de()},ae=function(){return(0,n.jsx)("div",{style:{overflow:"auto"},children:(0,n.jsx)(ne.Z,{blockNode:!0,showIcon:!0,treeData:ge(s.folderItems),onSelect:Pe,selectedKeys:s.treeSelectKeys})})},Re=function(){var o=f()(a()().mark(function t(r){var l,O;return a()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:O=s.type,p({owner:r}),ie({type:O,owner:r}),_==null||(l=_.current)===null||l===void 0||l.reload();case 5:case"end":return x.stop()}},t)}));return function(r){return o.apply(this,arguments)}}();return(0,n.jsxs)(le.Z,{pageTitle:!1,pageGroup:"settings",pageActive:"templets",className:"both-down",children:[(0,n.jsx)(se.Z,{children:(0,n.jsxs)(i.Z,{split:"vertical",children:[(0,n.jsxs)(i.Z,{colSpan:"256px",className:"both-down",children:[(0,n.jsx)(g.Z,{activeKey:s.owner,onChange:function(t){return Re(t)},items:[{label:"\u6211\u7684",key:"mine",children:ae()},{label:"\u56E2\u961F",key:"team",children:ae()},{label:"\u7CFB\u7EDF",key:"system",children:ae(),disabled:!0}]}),s.owner==="mine"?(0,n.jsxs)(I.ZP,{style:{width:"100%"},type:"primary",onClick:function(){return p({folderVisible:!0,folder:null})},children:[(0,n.jsx)(G.Z,{})," \u65B0\u589E\u76EE\u5F55"]}):null]}),(0,n.jsx)(i.Z,{headerBordered:!0,className:"both-down",children:(0,n.jsx)(X.ZP,{headerTitle:"\u90AE\u4EF6\u6A21\u677F",actionRef:_,rowKey:"_id",toolBarRender:function(t,r){var l=r.selectedRows;return[(0,n.jsxs)(I.ZP,{type:"primary",onClick:function(){p({contentVisible:!0,action:"add",currentValues:{}})},children:[(0,n.jsx)(G.Z,{})," \u65B0\u5EFA"]},"create"),l&&l.length>0&&(0,n.jsx)(te.Z,{children:(0,n.jsx)(I.ZP,{children:"\u6279\u91CF\u5220\u9664"},"333")},"skey")]},tableAlertRender:function(t){var r=t.selectedRowKeys;return(0,n.jsxs)("div",{children:["\u5DF2\u9009\u62E9 ",(0,n.jsx)("a",{style:{fontWeight:600},children:r.length})," \u9879\xA0\xA0"]})},request:function(t,r,l){return(0,A.sN)(u()(u()({},t),{},{sorter:r,filter:l,foid:s.foid,owner:s.owner}))},columns:Me,search:!1})})]})}),(0,n.jsx)(L.Z,{visible:s.contentVisible,onCancel:function(){return p({contentVisible:!1})},current:s.currentValues,actionReload:de,folderItems:s.folderItems,action:s.action}),(0,n.jsx)(B.Z,{visible:s.folderVisible,onCancel:function(){return p({folderVisible:!1})},folder:s.folder,actionReload:T,type:s.type})]})},me=ve}}]);
