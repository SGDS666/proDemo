"use strict";(self.webpackChunklaifaxin_web=self.webpackChunklaifaxin_web||[]).push([[9366],{65375:function(Me,Z,r){r.r(Z),r.d(Z,{default:function(){return de}});var O=r(35290),o=r.n(O),R=r(30279),h=r.n(R),k=r(411),m=r.n(k),z=r(46686),E=r.n(z),G=r(30261),P=r(85170),e=r(43010),W=function(){var l="\u5357\u4EAC\u77E5\u673A\u4FE1\u606F\u79D1\u6280\u6709\u9650\u516C\u53F8",c=new Date().getFullYear();return(0,e.jsx)(G.q,{copyright:"".concat(c," ").concat(l),links:[]})},H=W,u=r(22196);function V(p,l){return M.apply(this,arguments)}function M(){return M=m()(o()().mark(function p(l,c){return o()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.abrupt("return",(0,u.request)("/api/login/captcha",h()({method:"GET",params:h()({},l)},c||{})));case 1:case"end":return x.stop()}},p)})),M.apply(this,arguments)}var Y=r(98096),K=r(78485),Q=r(3091),J=r(50085),I=r(36407),X=r(16921),q=r(56302),_=r(22848),ee=r(8463),S=r(10677),re=r(66698),ae=r(22242),w=r(4190),b=r(43525),y=r(41318),te=r(77070),B=r(70478),se=r(82087),L=r(15286),ne=r(55051),C=window.navigator.userAgent,ue=function(){var l=!0;if(C.includes("Chrome/")){var c=C.split("Chrome/")[1].split(".")[0];parseInt(c)>=90&&(l=!1)}else if(C.includes("Firefox/")){var v=C.split("Firefox/")[1].split(".")[0];parseInt(v)>=90&&(l=!1)}return l?(0,e.jsx)(b.Z,{showIcon:!1,message:(0,e.jsxs)("div",{style:{color:"white",height:64,marginLeft:48,paddingTop:12},children:[(0,e.jsx)("div",{children:"\u672C\u7F51\u7AD9\u63D0\u4F9B\u7684\u90E8\u5206\u670D\u52A1\u5728\u4F60\u5F53\u524D\u6D4F\u89C8\u5668\u4E2D\u65E0\u6CD5\u4F7F\u7528\uFF0C\u5EFA\u8BAE\u4F60\u66F4\u6362\u4E3A Edge \u6216 Chrome \u6D4F\u89C8\u5668\u67E5\u770B\u672C\u7F51\u7AD9\u3002"}),(0,e.jsxs)("div",{style:{marginTop:6},children:[(0,e.jsx)("a",{href:"https://www.microsoft.com/zh-cn/edge/download",target:"_blank",rel:"noreferrer",children:"Edge \u6D4F\u89C8\u5668\u4E0B\u8F7D\u5730\u5740"}),(0,e.jsx)("a",{href:"https://www.google.cn/intl/zh-CN/chrome",target:"_blank",rel:"noreferrer",style:{marginLeft:36},children:"Chrome \u6D4F\u89C8\u5668\u4E0B\u8F7D\u5730\u5740"}),(0,e.jsx)("a",{href:"https://browser.360.cn/se",target:"_blank",rel:"noreferrer",style:{marginLeft:36},children:"360 \u6D4F\u89C8\u5668\u4E0B\u8F7D\u5730\u5740(\u7248\u672CSE14)"})]})]}),banner:!0,style:{backgroundColor:"black"}}):null},ie=ue,oe=window.location.host,le=function(){var l=(0,w.l)(function(c){var v=c.token;return{marginLeft:"8px",color:"rgba(0, 0, 0, 0.2)",fontSize:"24px",verticalAlign:"middle",cursor:"pointer",transition:"color 0.3s","&:hover":{color:v.colorPrimaryActive}}});return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Y.Z,{className:l},"AlipayCircleOutlined"),(0,e.jsx)(K.Z,{className:l},"TaobaoCircleOutlined"),(0,e.jsx)(Q.Z,{className:l},"WeiboCircleOutlined")]})},ce=function(){var l=(0,w.l)(function(c){var v=c.token;return{width:42,height:42,lineHeight:"42px",position:"fixed",right:16,borderRadius:v.borderRadius,":hover":{backgroundColor:v.colorBgTextHover}}});return(0,e.jsx)("div",{className:l,"data-lang":!0,children:u.SelectLang&&(0,e.jsx)(u.SelectLang,{})})},T=function(l){var c=l.content;return(0,e.jsx)(b.Z,{style:{marginBottom:24},message:c,type:"error",showIcon:!0})},ge=function(){var l=(0,P.useState)({status:"",errorMessage:""}),c=E()(l,2),v=c[0],x=c[1],fe=(0,P.useState)("account"),U=E()(fe,2),j=U[0],he=U[1],$=(0,u.useModel)("@@initialState"),g=$.initialState,D=$.setInitialState,me=function(){var i=m()(o()().mark(function t(){var s,n;return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g==null||(s=g.fetchUserInfo)===null||s===void 0?void 0:s.call(g);case 2:n=a.sent,n&&(0,L.flushSync)(function(){D(function(F){return h()(h()({},F),{},{currentUser:n})})});case 4:case"end":return a.stop()}},t)}));return function(){return i.apply(this,arguments)}}(),ve=function(){var i=m()(o()().mark(function t(){var s,n;return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g==null||(s=g.fetchPageAuth)===null||s===void 0?void 0:s.call(g);case 2:n=a.sent,n&&(0,L.flushSync)(function(){D(function(F){return h()(h()({},F),{},{pageAuth:n})})});case 4:case"end":return a.stop()}},t)}));return function(){return i.apply(this,arguments)}}(),pe=function(){var i=m()(o()().mark(function t(){var s,n;return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g==null||(s=g.fetchUserPermissions)===null||s===void 0?void 0:s.call(g);case 2:n=a.sent,n&&(0,L.flushSync)(function(){D(function(F){return h()(h()({},F),{},{userPermissions:n})})});case 4:case"end":return a.stop()}},t)}));return function(){return i.apply(this,arguments)}}(),Fe=function(){var i=m()(o()().mark(function t(){return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,me();case 2:return n.next=4,ve();case 4:return n.next=6,pe();case 6:case"end":return n.stop()}},t)}));return function(){return i.apply(this,arguments)}}(),xe=(0,w.l)(function(){return{display:"flex",flexDirection:"column",height:"100vh",overflow:"auto",backgroundImage:"url('https://mdn.alipayobjects.com/yuyan_qk0oxh/afts/img/V-_oS6r-i7wAAAAAAAAAAAAAFl94AQBr')",backgroundSize:"100% 100%"}}),f=(0,u.useIntl)(),je=function(){var i=m()(o()().mark(function t(s){var n,d,a,F;return o()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(s){A.next=3;break}return y.ZP.error("\u767B\u5F55\u5F02\u5E38!"),A.abrupt("return");case 3:return x({status:"ok",errorMessage:""}),n=s.accesstoken,d=s.orgId,a="\u767B\u5F55\u6210\u529F\uFF01",y.ZP.success(a),window.localStorage.setItem("accesstoken",n),window.localStorage.setItem("orgId",d),A.next=11,Fe();case 11:F=new URL(window.location.href).searchParams,u.history.push(F.get("redirect")||"/");case 13:case"end":return A.stop()}},t)}));return function(s){return i.apply(this,arguments)}}(),Ae=(0,u.useRequest)(ne.xt,{manual:!0,onSuccess:function(t){je(t)},onError:function(t){if(t.info){var s=t.info.message;y.ZP.error(s),x({status:"error",errorMessage:s})}}}),ye=Ae.run,Ce=function(){var i=m()(o()().mark(function t(s){var n;return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:n=window.navigator.userAgent,ye(h()(h()({},s),{},{type:j,host:oe,userAgent:n}));case 2:case"end":return a.stop()}},t)}));return function(s){return i.apply(this,arguments)}}(),N=v.status;return(0,e.jsxs)("div",{className:xe,children:[(0,e.jsx)(ie,{}),(0,e.jsx)(u.Helmet,{children:(0,e.jsxs)("title",{children:[f.formatMessage({id:"menu.login",defaultMessage:"\u767B\u5F55\u9875"}),"- ",se.Z.title]})}),(0,e.jsx)(ce,{}),(0,e.jsx)("div",{style:{flex:"1",padding:"32px 0"},children:(0,e.jsxs)(ee.U,{contentStyle:{minWidth:280,maxWidth:"75vw"},logo:(0,e.jsx)("img",{alt:"logo",src:"/logo.svg"}),title:"\u6765\u53D1\u4FE1",subTitle:f.formatMessage({id:"pages.layouts.userLayout.title"}),initialValues:{autoLogin:!0},actions:[(0,e.jsx)(u.FormattedMessage,{id:"pages.login.loginWith",defaultMessage:"\u5176\u4ED6\u767B\u5F55\u65B9\u5F0F"},"loginWith"),(0,e.jsx)(le,{},"icons"),(0,e.jsx)(u.Link,{style:{float:"right"},to:"/user/regist",children:(0,e.jsx)(u.FormattedMessage,{id:"pages.login.registerAccount",defaultMessage:"\u6CE8\u518C\u8D26\u6237"})},"UserRegist")],onFinish:function(){var i=m()(o()().mark(function t(s){return o()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,Ce(s);case 2:case"end":return d.stop()}},t)}));return function(t){return i.apply(this,arguments)}}(),children:[(0,e.jsx)(te.Z,{activeKey:j,onChange:he,centered:!0,items:[{key:"account",label:f.formatMessage({id:"pages.login.accountLogin.tab",defaultMessage:"\u8D26\u6237\u5BC6\u7801\u767B\u5F55"})},{disabled:!0,key:"mobile",label:f.formatMessage({id:"pages.login.phoneLogin.tab",defaultMessage:"\u624B\u673A\u53F7\u767B\u5F55"})}]}),N==="error"&&j==="account"&&(0,e.jsx)(T,{content:f.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF"})}),j==="account"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(S.Z,{name:"username",fieldProps:{size:"large",prefix:(0,e.jsx)(J.Z,{})},placeholder:f.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u7528\u6237\u540D: admin or user"}),rules:[{required:!0,message:(0,e.jsx)(u.FormattedMessage,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),(0,e.jsx)(S.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,e.jsx)(I.Z,{})},placeholder:f.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801: ant.design"}),rules:[{required:!0,message:(0,e.jsx)(u.FormattedMessage,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]}),N==="error"&&j==="mobile"&&(0,e.jsx)(T,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF"}),j==="mobile"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(S.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(X.Z,{})},name:"mobile",placeholder:f.formatMessage({id:"pages.login.phoneNumber.placeholder",defaultMessage:"\u624B\u673A\u53F7"}),rules:[{required:!0,message:(0,e.jsx)(u.FormattedMessage,{id:"pages.login.phoneNumber.required",defaultMessage:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"})},{pattern:/^1\d{10}$/,message:(0,e.jsx)(u.FormattedMessage,{id:"pages.login.phoneNumber.invalid",defaultMessage:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"})}]}),(0,e.jsx)(re.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(I.Z,{})},captchaProps:{size:"large"},placeholder:f.formatMessage({id:"pages.login.captcha.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}),captchaTextRender:function(t,s){return t?"".concat(s," ").concat(f.formatMessage({id:"pages.getCaptchaSecondText",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})):f.formatMessage({id:"pages.login.phoneLogin.getVerificationCode",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})},name:"captcha",rules:[{required:!0,message:(0,e.jsx)(u.FormattedMessage,{id:"pages.login.captcha.required",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"})}],onGetCaptcha:function(){var i=m()(o()().mark(function t(s){var n;return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,V({phone:s});case 2:if(n=a.sent,n){a.next=5;break}return a.abrupt("return");case 5:y.ZP.success("\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F\uFF01\u9A8C\u8BC1\u7801\u4E3A\uFF1A1234");case 6:case"end":return a.stop()}},t)}));return function(t){return i.apply(this,arguments)}}()})]}),(0,e.jsxs)("div",{style:{marginBottom:24},children:[(0,e.jsx)(ae.Z,{noStyle:!0,name:"autoLogin",children:(0,e.jsx)(u.FormattedMessage,{id:"pages.login.rememberMe",defaultMessage:"\u81EA\u52A8\u767B\u5F55"})}),(0,e.jsx)(u.Link,{style:{float:"right"},to:"/user/reset",children:(0,e.jsx)(u.FormattedMessage,{id:"pages.login.forgotPassword",defaultMessage:"\u5FD8\u8BB0\u5BC6\u7801"})},"ForgetPassword")]})]})}),(0,e.jsx)(H,{}),(0,e.jsxs)(B.Z.Group,{trigger:"hover",type:"primary",style:{right:24},icon:(0,e.jsx)(q.Z,{}),children:[(0,e.jsx)(B.Z,{tooltip:(0,e.jsx)("div",{children:"\u8054\u7CFB\u7535\u8BDD\uFF1A17091913071"})}),(0,e.jsx)(B.Z,{icon:(0,e.jsx)(_.Z,{}),tooltip:(0,e.jsx)("div",{children:"\u70B9\u6211\u6DFB\u52A0\u5BA2\u670D\u5FAE\u4FE1"}),onClick:function(){return window.open("https://www.laifaxin.com/assets/images/img/apan.png")}})]})]})},de=ge}}]);
